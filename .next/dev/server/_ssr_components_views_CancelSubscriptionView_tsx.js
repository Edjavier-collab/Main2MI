"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_components_views_CancelSubscriptionView_tsx";
exports.ids = ["_ssr_components_views_CancelSubscriptionView_tsx"];
exports.modules = {

/***/ "(ssr)/./components/ui/Toast.tsx":
/*!*********************************!*\
  !*** ./components/ui/Toast.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Toast: () => (/* binding */ Toast),\n/* harmony export */   ToastContainer: () => (/* binding */ ToastContainer),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useToast: () => (/* binding */ useToast)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ Toast,ToastContainer,useToast,default auto */ \n\n// Default durations by type (errors stay longer so users can read them)\nconst DEFAULT_DURATIONS = {\n    success: 3000,\n    info: 4000,\n    warning: 5000,\n    error: 6000\n};\nconst Toast = ({ message, type = 'info', duration, onClose })=>{\n    // Use provided duration or fall back to type-based default\n    const effectiveDuration = duration ?? DEFAULT_DURATIONS[type];\n    const [isVisible, setIsVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Toast.useEffect\": ()=>{\n            if (effectiveDuration > 0) {\n                const timer = setTimeout({\n                    \"Toast.useEffect.timer\": ()=>{\n                        setIsVisible(false);\n                        setTimeout({\n                            \"Toast.useEffect.timer\": ()=>onClose?.()\n                        }[\"Toast.useEffect.timer\"], 300); // Wait for fade out\n                    }\n                }[\"Toast.useEffect.timer\"], effectiveDuration);\n                return ({\n                    \"Toast.useEffect\": ()=>clearTimeout(timer)\n                })[\"Toast.useEffect\"];\n            }\n        }\n    }[\"Toast.useEffect\"], [\n        effectiveDuration,\n        onClose\n    ]);\n    const typeClasses = {\n        success: 'bg-[var(--color-success)] text-white',\n        error: 'bg-[var(--color-error)] text-white',\n        warning: 'bg-[var(--color-warning)] text-white',\n        info: 'bg-[var(--color-info)] text-white'\n    };\n    const icons = {\n        success: 'fa-check-circle',\n        error: 'fa-exclamation-circle',\n        warning: 'fa-exclamation-triangle',\n        info: 'fa-info-circle'\n    };\n    if (!isVisible) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `fixed z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg ${typeClasses[type]} animate-slide-in-right max-w-[calc(100vw-2rem)] sm:max-w-sm`,\n        style: {\n            top: `max(1rem, env(safe-area-inset-top, 1rem))`,\n            right: `max(1rem, env(safe-area-inset-right, 1rem))`\n        },\n        role: \"alert\",\n        \"aria-live\": \"assertive\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                className: `fa-solid ${icons[type]} flex-shrink-0`,\n                \"aria-hidden\": \"true\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 69,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"flex-1 text-sm font-medium\",\n                children: message\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 70,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    setIsVisible(false);\n                    setTimeout(()=>onClose?.(), 300);\n                },\n                className: \"flex-shrink-0 ml-2 hover:opacity-80 transition-opacity\",\n                \"aria-label\": \"Close notification\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                    className: \"fa-solid fa-times\",\n                    \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                    lineNumber: 79,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 71,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n        lineNumber: 60,\n        columnNumber: 5\n    }, undefined);\n};\nconst ToastContainer = ({ toasts, onRemove })=>{\n    if (toasts.length === 0) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed z-50 space-y-2\",\n        style: {\n            top: `max(1rem, env(safe-area-inset-top, 1rem))`,\n            right: `max(1rem, env(safe-area-inset-right, 1rem))`\n        },\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        children: toasts.map((toast)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Toast, {\n                message: toast.message,\n                type: toast.type,\n                onClose: ()=>onRemove(toast.id)\n            }, toast.id, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 104,\n                columnNumber: 9\n            }, undefined))\n    }, void 0, false, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n        lineNumber: 94,\n        columnNumber: 5\n    }, undefined);\n};\n// Hook for managing toasts\nconst useToast = ()=>{\n    const [toasts, setToasts] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const showToast = (message, type = 'info')=>{\n        const id = Math.random().toString(36).substring(7);\n        setToasts((prev)=>[\n                ...prev,\n                {\n                    id,\n                    message,\n                    type\n                }\n            ]);\n        return id;\n    };\n    const removeToast = (id)=>{\n        setToasts((prev)=>prev.filter((toast)=>toast.id !== id));\n    };\n    return {\n        toasts,\n        showToast,\n        removeToast,\n        ToastContainer\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Toast);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBRTtRQUNwRCxPQUFPK0I7SUFDVDtJQUVBLE1BQU1TLGNBQWMsQ0FBQ1Q7UUFDbkJFLFVBQVUsQ0FBQ00sT0FBU0EsS0FBS0UsTUFBTSxDQUFDLENBQUNYLFFBQVVBLE1BQU1DLEVBQUUsS0FBS0E7SUFDMUQ7SUFFQSxPQUFPO1FBQUVOO1FBQVFTO1FBQVdNO1FBQWFoQjtJQUFlO0FBQzFELEVBQUU7QUFFRixpRUFBZTFCLEtBQUtBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXZpL2Rldi9NYWluMk1JL2NvbXBvbmVudHMvdWkvVG9hc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCB0eXBlIFRvYXN0VHlwZSA9ICdzdWNjZXNzJyB8ICdlcnJvcicgfCAnd2FybmluZycgfCAnaW5mbyc7XG5cbi8vIERlZmF1bHQgZHVyYXRpb25zIGJ5IHR5cGUgKGVycm9ycyBzdGF5IGxvbmdlciBzbyB1c2VycyBjYW4gcmVhZCB0aGVtKVxuY29uc3QgREVGQVVMVF9EVVJBVElPTlM6IFJlY29yZDxUb2FzdFR5cGUsIG51bWJlcj4gPSB7XG4gIHN1Y2Nlc3M6IDMwMDAsICAvLyBRdWljayBjb25maXJtYXRpb25cbiAgaW5mbzogNDAwMCwgICAgIC8vIFN0YW5kYXJkIGluZm9cbiAgd2FybmluZzogNTAwMCwgIC8vIEdpdmUgdGltZSB0byByZWFkXG4gIGVycm9yOiA2MDAwLCAgICAvLyBFcnJvcnMgbmVlZCBtb3JlIHRpbWUgdG8gcmVhZC9hY3Rcbn07XG5cbmludGVyZmFjZSBUb2FzdFByb3BzIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0eXBlPzogVG9hc3RUeXBlO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgb25DbG9zZT86ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBUb2FzdDogUmVhY3QuRkM8VG9hc3RQcm9wcz4gPSAoe1xuICBtZXNzYWdlLFxuICB0eXBlID0gJ2luZm8nLFxuICBkdXJhdGlvbixcbiAgb25DbG9zZSxcbn0pID0+IHtcbiAgLy8gVXNlIHByb3ZpZGVkIGR1cmF0aW9uIG9yIGZhbGwgYmFjayB0byB0eXBlLWJhc2VkIGRlZmF1bHRcbiAgY29uc3QgZWZmZWN0aXZlRHVyYXRpb24gPSBkdXJhdGlvbiA/PyBERUZBVUxUX0RVUkFUSU9OU1t0eXBlXTtcbiAgY29uc3QgW2lzVmlzaWJsZSwgc2V0SXNWaXNpYmxlXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVmZmVjdGl2ZUR1cmF0aW9uID4gMCkge1xuICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0SXNWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvbkNsb3NlPy4oKSwgMzAwKTsgLy8gV2FpdCBmb3IgZmFkZSBvdXRcbiAgICAgIH0sIGVmZmVjdGl2ZUR1cmF0aW9uKTtcblxuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuICB9LCBbZWZmZWN0aXZlRHVyYXRpb24sIG9uQ2xvc2VdKTtcbiAgXG4gIGNvbnN0IHR5cGVDbGFzc2VzID0ge1xuICAgIHN1Y2Nlc3M6ICdiZy1bdmFyKC0tY29sb3Itc3VjY2VzcyldIHRleHQtd2hpdGUnLFxuICAgIGVycm9yOiAnYmctW3ZhcigtLWNvbG9yLWVycm9yKV0gdGV4dC13aGl0ZScsXG4gICAgd2FybmluZzogJ2JnLVt2YXIoLS1jb2xvci13YXJuaW5nKV0gdGV4dC13aGl0ZScsXG4gICAgaW5mbzogJ2JnLVt2YXIoLS1jb2xvci1pbmZvKV0gdGV4dC13aGl0ZScsXG4gIH07XG4gIFxuICBjb25zdCBpY29ucyA9IHtcbiAgICBzdWNjZXNzOiAnZmEtY2hlY2stY2lyY2xlJyxcbiAgICBlcnJvcjogJ2ZhLWV4Y2xhbWF0aW9uLWNpcmNsZScsXG4gICAgd2FybmluZzogJ2ZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlJyxcbiAgICBpbmZvOiAnZmEtaW5mby1jaXJjbGUnLFxuICB9O1xuICBcbiAgaWYgKCFpc1Zpc2libGUpIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2BmaXhlZCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHB4LTQgcHktMyByb3VuZGVkLWxnIHNoYWRvdy1sZyAke3R5cGVDbGFzc2VzW3R5cGVdfSBhbmltYXRlLXNsaWRlLWluLXJpZ2h0IG1heC13LVtjYWxjKDEwMHZ3LTJyZW0pXSBzbTptYXgtdy1zbWB9XG4gICAgICBzdHlsZT17e1xuICAgICAgICB0b3A6IGBtYXgoMXJlbSwgZW52KHNhZmUtYXJlYS1pbnNldC10b3AsIDFyZW0pKWAsXG4gICAgICAgIHJpZ2h0OiBgbWF4KDFyZW0sIGVudihzYWZlLWFyZWEtaW5zZXQtcmlnaHQsIDFyZW0pKWAsXG4gICAgICB9fVxuICAgICAgcm9sZT1cImFsZXJ0XCJcbiAgICAgIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiXG4gICAgPlxuICAgICAgPGkgY2xhc3NOYW1lPXtgZmEtc29saWQgJHtpY29uc1t0eXBlXX0gZmxleC1zaHJpbmstMGB9IGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LTEgdGV4dC1zbSBmb250LW1lZGl1bVwiPnttZXNzYWdlfTwvc3Bhbj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgIHNldElzVmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvbkNsb3NlPy4oKSwgMzAwKTtcbiAgICAgICAgfX1cbiAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBtbC0yIGhvdmVyOm9wYWNpdHktODAgdHJhbnNpdGlvbi1vcGFjaXR5XCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIkNsb3NlIG5vdGlmaWNhdGlvblwiXG4gICAgICA+XG4gICAgICAgIDxpIGNsYXNzTmFtZT1cImZhLXNvbGlkIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuaW50ZXJmYWNlIFRvYXN0Q29udGFpbmVyUHJvcHMge1xuICB0b2FzdHM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbWVzc2FnZTogc3RyaW5nOyB0eXBlPzogVG9hc3RUeXBlIH0+O1xuICBvblJlbW92ZTogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBUb2FzdENvbnRhaW5lcjogUmVhY3QuRkM8VG9hc3RDb250YWluZXJQcm9wcz4gPSAoeyB0b2FzdHMsIG9uUmVtb3ZlIH0pID0+IHtcbiAgaWYgKHRvYXN0cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IFxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBzcGFjZS15LTJcIiBcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHRvcDogYG1heCgxcmVtLCBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCwgMXJlbSkpYCxcbiAgICAgICAgcmlnaHQ6IGBtYXgoMXJlbSwgZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodCwgMXJlbSkpYCxcbiAgICAgIH19XG4gICAgICBhcmlhLWxpdmU9XCJwb2xpdGVcIiBcbiAgICAgIGFyaWEtYXRvbWljPVwidHJ1ZVwiXG4gICAgPlxuICAgICAge3RvYXN0cy5tYXAoKHRvYXN0KSA9PiAoXG4gICAgICAgIDxUb2FzdFxuICAgICAgICAgIGtleT17dG9hc3QuaWR9XG4gICAgICAgICAgbWVzc2FnZT17dG9hc3QubWVzc2FnZX1cbiAgICAgICAgICB0eXBlPXt0b2FzdC50eXBlfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IG9uUmVtb3ZlKHRvYXN0LmlkKX1cbiAgICAgICAgLz5cbiAgICAgICkpfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLy8gSG9vayBmb3IgbWFuYWdpbmcgdG9hc3RzXG5leHBvcnQgY29uc3QgdXNlVG9hc3QgPSAoKSA9PiB7XG4gIGNvbnN0IFt0b2FzdHMsIHNldFRvYXN0c10gPSB1c2VTdGF0ZTxBcnJheTx7IGlkOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZT86IFRvYXN0VHlwZSB9Pj4oW10pO1xuICBcbiAgY29uc3Qgc2hvd1RvYXN0ID0gKG1lc3NhZ2U6IHN0cmluZywgdHlwZTogVG9hc3RUeXBlID0gJ2luZm8nKSA9PiB7XG4gICAgY29uc3QgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG4gICAgc2V0VG9hc3RzKChwcmV2KSA9PiBbLi4ucHJldiwgeyBpZCwgbWVzc2FnZSwgdHlwZSB9XSk7XG4gICAgcmV0dXJuIGlkO1xuICB9O1xuICBcbiAgY29uc3QgcmVtb3ZlVG9hc3QgPSAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFRvYXN0cygocHJldikgPT4gcHJldi5maWx0ZXIoKHRvYXN0KSA9PiB0b2FzdC5pZCAhPT0gaWQpKTtcbiAgfTtcbiAgXG4gIHJldHVybiB7IHRvYXN0cywgc2hvd1RvYXN0LCByZW1vdmVUb2FzdCwgVG9hc3RDb250YWluZXIgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRvYXN0O1xuXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIkRFRkFVTFRfRFVSQVRJT05TIiwic3VjY2VzcyIsImluZm8iLCJ3YXJuaW5nIiwiZXJyb3IiLCJUb2FzdCIsIm1lc3NhZ2UiLCJ0eXBlIiwiZHVyYXRpb24iLCJvbkNsb3NlIiwiZWZmZWN0aXZlRHVyYXRpb24iLCJpc1Zpc2libGUiLCJzZXRJc1Zpc2libGUiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJ0eXBlQ2xhc3NlcyIsImljb25zIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJ0b3AiLCJyaWdodCIsInJvbGUiLCJhcmlhLWxpdmUiLCJpIiwiYXJpYS1oaWRkZW4iLCJzcGFuIiwiYnV0dG9uIiwib25DbGljayIsImFyaWEtbGFiZWwiLCJUb2FzdENvbnRhaW5lciIsInRvYXN0cyIsIm9uUmVtb3ZlIiwibGVuZ3RoIiwiYXJpYS1hdG9taWMiLCJtYXAiLCJ0b2FzdCIsImlkIiwidXNlVG9hc3QiLCJzZXRUb2FzdHMiLCJzaG93VG9hc3QiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJwcmV2IiwicmVtb3ZlVG9hc3QiLCJmaWx0ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/ui/Toast.tsx\n");

/***/ }),

/***/ "(ssr)/./components/views/CancelSubscriptionView.tsx":
/*!*****************************************************!*\
  !*** ./components/views/CancelSubscriptionView.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../types */ \"(ssr)/./types.ts\");\n/* harmony import */ var _services_stripeService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/stripeService */ \"(ssr)/./services/stripeService.ts\");\n/* harmony import */ var _ui_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/Button */ \"(ssr)/./components/ui/Button.tsx\");\n/* harmony import */ var _ui_BackButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/BackButton */ \"(ssr)/./components/ui/BackButton.tsx\");\n/* harmony import */ var _ui_Card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/Card */ \"(ssr)/./components/ui/Card.tsx\");\n/* harmony import */ var _ui_Toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ui/Toast */ \"(ssr)/./components/ui/Toast.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\nconst CancelSubscriptionView = ({ user, userTier, onBack, onTierUpdated })=>{\n    const [subscription, setSubscription] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [actionLoading, setActionLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [success, setSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [premiumTierMismatch, setPremiumTierMismatch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [upgradeLoading, setUpgradeLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showCancellationFlow, setShowCancellationFlow] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { toasts, showToast, removeToast, ToastContainer } = (0,_ui_Toast__WEBPACK_IMPORTED_MODULE_7__.useToast)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CancelSubscriptionView.useEffect\": ()=>{\n            loadSubscription();\n        }\n    }[\"CancelSubscriptionView.useEffect\"], [\n        user.id\n    ]);\n    const loadSubscription = async ()=>{\n        setLoading(true);\n        setError(null);\n        setPremiumTierMismatch(false);\n        try {\n            const sub = await (0,_services_stripeService__WEBPACK_IMPORTED_MODULE_3__.getUserSubscription)(user.id);\n            // Check if this is a premium tier mismatch response\n            if (sub && typeof sub === 'object' && '_premiumTierMismatch' in sub) {\n                setPremiumTierMismatch(true);\n                setError(sub.error);\n                setSubscription(null);\n            // Backend's get-subscription endpoint now automatically recovers subscriptions\n            // using the stored plan from the database, so no need to auto-create here\n            // The subscription should be recovered on the next page load or refresh\n            } else {\n                setSubscription(sub);\n                // Log subscription details for debugging\n                if (sub) {\n                    console.log('[CancelSubscriptionView] Subscription loaded:', {\n                        plan: sub.plan,\n                        originalPrice: sub.originalPrice,\n                        currentPrice: sub.currentPrice,\n                        periodLabel: sub.plan === 'monthly' ? 'month' : 'year',\n                        hasRetentionDiscount: sub.hasRetentionDiscount\n                    });\n                }\n            }\n        } catch (err) {\n            console.error('[CancelSubscriptionView] Error loading subscription:', err);\n            const errorMessage = err instanceof Error ? err.message : 'Failed to load subscription details';\n            // Check if this is a network/server error with more details\n            let displayError = errorMessage;\n            if (errorMessage.includes('endpoint not found') || errorMessage.includes('Failed to fetch')) {\n                displayError = 'Unable to reach the subscription server. Please ensure your Supabase Edge Functions are deployed.';\n            } else if (errorMessage.includes('Mock subscription')) {\n                displayError = errorMessage; // Use the detailed backend error\n            }\n            setError(displayError);\n        } finally{\n            setLoading(false);\n        }\n    };\n    const handleAcceptOffer = async ()=>{\n        setActionLoading('accept');\n        setError(null);\n        setSuccess(null);\n        try {\n            await (0,_services_stripeService__WEBPACK_IMPORTED_MODULE_3__.cancelSubscription)(user.id, true);\n            showToast('Great! Your 30% discount has been applied. You\\'ll continue to enjoy premium features at the discounted rate.', 'success');\n            // Reload subscription to show updated discount\n            await loadSubscription();\n            // Refresh tier if callback provided\n            if (onTierUpdated) {\n                setTimeout(()=>onTierUpdated(), 1000);\n            }\n        } catch (err) {\n            console.error('[CancelSubscriptionView] Error accepting offer:', err);\n            showToast(err instanceof Error ? err.message : 'Failed to apply discount. Please try again.', 'error');\n        } finally{\n            setActionLoading(null);\n        }\n    };\n    const handleCancel = async ()=>{\n        if (!confirm('Are you sure you want to cancel your subscription? You\\'ll lose access to premium features at the end of your billing period.')) {\n            return;\n        }\n        setActionLoading('cancel');\n        setError(null);\n        setSuccess(null);\n        try {\n            const result = await (0,_services_stripeService__WEBPACK_IMPORTED_MODULE_3__.cancelSubscription)(user.id, false);\n            showToast(`Your subscription has been cancelled. You'll continue to have access until ${new Date(result.currentPeriodEnd).toLocaleDateString()}.`, 'info');\n            // Reload subscription to show cancellation status\n            await loadSubscription();\n            // Refresh tier if callback provided\n            if (onTierUpdated) {\n                setTimeout(()=>onTierUpdated(), 1000);\n            }\n        } catch (err) {\n            console.error('[CancelSubscriptionView] Error cancelling:', err);\n            showToast(err instanceof Error ? err.message : 'Failed to cancel subscription. Please try again.', 'error');\n        } finally{\n            setActionLoading(null);\n        }\n    };\n    const handleRestore = async ()=>{\n        setActionLoading('restore');\n        setError(null);\n        setSuccess(null);\n        try {\n            const result = await (0,_services_stripeService__WEBPACK_IMPORTED_MODULE_3__.restoreSubscription)(user.id);\n            showToast('Your subscription has been restored! You\\'ll continue to have access to premium features.', 'success');\n            // Reload subscription to show restored status\n            await loadSubscription();\n            // Refresh tier if callback provided\n            if (onTierUpdated) {\n                setTimeout(()=>onTierUpdated(), 1000);\n            }\n        } catch (err) {\n            console.error('[CancelSubscriptionView] Error restoring:', err);\n            showToast(err instanceof Error ? err.message : 'Failed to restore subscription. Please try again.', 'error');\n        } finally{\n            setActionLoading(null);\n        }\n    };\n    const handleUpgradeToAnnual = async ()=>{\n        console.log('[CancelSubscriptionView] Upgrade to Annual clicked');\n        setUpgradeLoading(true);\n        setError(null);\n        setSuccess(null);\n        try {\n            console.log('[CancelSubscriptionView] Calling upgradeToAnnual for user:', user.id);\n            const result = await (0,_services_stripeService__WEBPACK_IMPORTED_MODULE_3__.upgradeToAnnual)(user.id);\n            console.log('[CancelSubscriptionView] Upgrade response:', result);\n            const message = result?.message || 'Your subscription will be upgraded to Annual at the end of your current billing period.';\n            showToast(message, 'success');\n            // Reload subscription to show updated plan\n            await loadSubscription();\n            // Refresh tier if callback provided\n            if (onTierUpdated) {\n                setTimeout(()=>onTierUpdated(), 1000);\n            }\n        } catch (err) {\n            console.error('[CancelSubscriptionView] Error upgrading:', err);\n            const errorMessage = err instanceof Error ? err.message : 'Failed to upgrade subscription. Please try again.';\n            // Provide more helpful error messages\n            let displayMessage = errorMessage;\n            if (errorMessage.includes('Failed to fetch') || errorMessage.includes('NetworkError')) {\n                displayMessage = 'Unable to reach the subscription server. Please ensure your Supabase Edge Functions are deployed and running.';\n            } else if (errorMessage.includes('No customer found') || errorMessage.includes('No active subscription')) {\n                displayMessage = 'Subscription not found. Please ensure you have an active subscription.';\n            } else if (errorMessage.includes('already on the annual plan')) {\n                displayMessage = 'Your subscription is already on the annual plan.';\n            }\n            showToast(displayMessage, 'error');\n            setError(displayMessage);\n        } finally{\n            setUpgradeLoading(false);\n        }\n    };\n    const formatMockCreationError = (err)=>{\n        const baseMessage = err instanceof Error ? err.message : 'Failed to create mock subscription';\n        if (/Failed to fetch|NetworkError/i.test(baseMessage)) {\n            return 'Unable to reach the subscription server. Please ensure your Supabase Edge Functions are deployed.';\n        }\n        // Return the backend error message as-is for better debugging\n        return baseMessage;\n    };\n    const handleCreateMockSubscription = async ()=>{\n        setLoading(true);\n        setError(null);\n        try {\n            await (0,_services_stripeService__WEBPACK_IMPORTED_MODULE_3__.createMockSubscription)(user.id, 'monthly');\n            await loadSubscription();\n        } catch (err) {\n            console.error('[CancelSubscriptionView] Error creating mock subscription:', err);\n            setError(formatMockCreationError(err));\n            setLoading(false);\n        }\n    };\n    const formatPrice = (price)=>{\n        return `$${price.toFixed(2)}`;\n    };\n    const formatDate = (dateString)=>{\n        return new Date(dateString).toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n    const calculateDiscountedPrice = ()=>{\n        if (!subscription) return null;\n        const discountAmount = subscription.originalPrice * 0.3;\n        return subscription.originalPrice - discountAmount;\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-transparent flex flex-col items-center justify-center p-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-primary)] mx-auto mb-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 234,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-[var(--color-text-secondary)]\",\n                        children: \"Loading subscription details...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 235,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 233,\n                columnNumber: 17\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n            lineNumber: 232,\n            columnNumber: 13\n        }, undefined);\n    }\n    if (error && !subscription) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-transparent flex flex-col items-center justify-center p-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                variant: \"elevated\",\n                padding: \"lg\",\n                className: \"w-full max-w-md text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto mb-4 bg-[var(--color-error-light)] h-20 w-20 rounded-full flex items-center justify-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                    className: \"fa-solid fa-exclamation-triangle text-4xl text-[var(--color-error)]\",\n                                    \"aria-hidden\": \"true\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 247,\n                                    columnNumber: 29\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 246,\n                                columnNumber: 25\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-2xl font-bold text-[var(--color-text-primary)] mb-2\",\n                                children: \"Unable to Load Subscription\"\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 249,\n                                columnNumber: 25\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[var(--color-text-secondary)] mb-4\",\n                                children: error\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 250,\n                                columnNumber: 25\n                            }, undefined),\n                            error.includes('Edge Functions') && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                variant: \"accent\",\n                                padding: \"md\",\n                                className: \"mt-4 text-left\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-[var(--color-text-primary)] mb-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"Setup Required:\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 254,\n                                                columnNumber: 33\n                                            }, undefined),\n                                            \" Deploy your Supabase Edge Functions:\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 253,\n                                        columnNumber: 33\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"code\", {\n                                        className: \"block mt-2 text-xs bg-white p-2 rounded font-mono\",\n                                        children: \"supabase functions deploy\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 256,\n                                        columnNumber: 33\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 252,\n                                columnNumber: 29\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 245,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                        onClick: onBack,\n                        className: \"w-full justify-center\",\n                        label: \"Go Back\"\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 262,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 244,\n                columnNumber: 17\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n            lineNumber: 243,\n            columnNumber: 13\n        }, undefined);\n    }\n    if (!subscription) {\n        // Show special message if user is premium but no subscription found\n        if (premiumTierMismatch || userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-screen bg-transparent flex flex-col items-center justify-center p-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                    variant: \"elevated\",\n                    padding: \"lg\",\n                    className: \"w-full max-w-md text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mx-auto mb-4 bg-[var(--color-warning-light)] h-20 w-20 rounded-full flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        className: \"fa-solid fa-exclamation-triangle text-4xl text-[var(--color-warning)]\",\n                                        \"aria-hidden\": \"true\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 276,\n                                        columnNumber: 33\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 275,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    className: \"text-2xl font-bold text-[var(--color-text-primary)] mb-2\",\n                                    children: \"Subscription Not Found\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 278,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-[var(--color-text-secondary)] mb-4\",\n                                    children: \"Your account shows as premium, but no active Stripe subscription was found. This may happen if your subscription was cancelled or there's a mismatch between your account status and Stripe records.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 279,\n                                    columnNumber: 29\n                                }, undefined),\n                                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-sm text-[var(--color-text-muted)] mb-4\",\n                                    children: error\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 285,\n                                    columnNumber: 33\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-[var(--color-text-secondary)] mb-4\",\n                                    children: \"Please contact support if you believe this is an error, or if you'd like to reactivate your subscription.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 287,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                    onClick: handleCreateMockSubscription,\n                                    variant: \"ghost\",\n                                    size: \"sm\",\n                                    className: \"mb-4\",\n                                    children: \"Fix Subscription (Dev)\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 291,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                            lineNumber: 274,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                            onClick: onBack,\n                            className: \"w-full justify-center\",\n                            label: \"Go Back to Settings\"\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                            lineNumber: 300,\n                            columnNumber: 25\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                    lineNumber: 273,\n                    columnNumber: 21\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 272,\n                columnNumber: 17\n            }, undefined);\n        }\n        // Regular \"no subscription\" message for free tier users\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-transparent flex flex-col items-center justify-center p-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                variant: \"elevated\",\n                padding: \"lg\",\n                className: \"w-full max-w-md text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto mb-4 bg-[var(--color-bg-accent)] h-20 w-20 rounded-full flex items-center justify-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                    className: \"fa-solid fa-info-circle text-4xl text-[var(--color-text-muted)]\",\n                                    \"aria-hidden\": \"true\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 312,\n                                    columnNumber: 29\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 311,\n                                columnNumber: 25\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-2xl font-bold text-[var(--color-text-primary)] mb-2\",\n                                children: \"No Active Subscription\"\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 314,\n                                columnNumber: 25\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[var(--color-text-secondary)]\",\n                                children: \"You don't have an active subscription to cancel.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 315,\n                                columnNumber: 25\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 310,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                        onClick: onBack,\n                        className: \"w-full justify-center\",\n                        label: \"Go Back\"\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 317,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 309,\n                columnNumber: 17\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n            lineNumber: 308,\n            columnNumber: 13\n        }, undefined);\n    }\n    const discountedPrice = calculateDiscountedPrice();\n    // Determine plan type with fallback for 'unknown' plans\n    let detectedPlan = subscription.plan;\n    if (detectedPlan === 'unknown') {\n        // Infer plan from pricing: annual plans are typically > $50\n        // This matches the backend fallback logic\n        if (subscription.originalPrice > 50) {\n            detectedPlan = 'annual';\n            console.warn('[CancelSubscriptionView] Plan was \"unknown\", inferred as \"annual\" from price:', subscription.originalPrice);\n        } else {\n            detectedPlan = 'monthly';\n            console.warn('[CancelSubscriptionView] Plan was \"unknown\", inferred as \"monthly\" from price:', subscription.originalPrice);\n        }\n    }\n    const planName = detectedPlan === 'monthly' ? 'Monthly' : 'Annual';\n    const periodLabel = detectedPlan === 'monthly' ? 'month' : 'year';\n    // Validate that pricing matches plan type\n    // Annual subscriptions should be significantly higher than monthly\n    const isLikelyAnnual = subscription.originalPrice > 50;\n    const isLikelyMonthly = subscription.originalPrice <= 50;\n    if (detectedPlan === 'annual' && !isLikelyAnnual || detectedPlan === 'monthly' && !isLikelyMonthly) {\n        console.warn('[CancelSubscriptionView]  Plan type mismatch detected:', {\n            plan: detectedPlan,\n            originalPrice: subscription.originalPrice,\n            expectedRange: detectedPlan === 'annual' ? '> $50' : '<= $50'\n        });\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-transparent pb-24\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ToastContainer, {\n                toasts: toasts,\n                onRemove: removeToast\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 356,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"px-6 py-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                    onClick: onBack\n                }, void 0, false, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                    lineNumber: 360,\n                    columnNumber: 17\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 359,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-full max-w-md mx-auto px-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-6 text-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto mb-4 bg-[var(--color-primary-lighter)] h-20 w-20 rounded-full flex items-center justify-center ring-8 ring-[var(--color-primary-lighter)]/50\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                    className: \"fa-solid fa-credit-card text-4xl text-[var(--color-primary-dark)]\",\n                                    \"aria-hidden\": \"true\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 366,\n                                    columnNumber: 25\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 365,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-3xl sm:text-4xl font-extrabold text-[var(--color-text-primary)] mb-2\",\n                                children: showCancellationFlow ? 'Cancel Subscription' : 'Manage Subscription'\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 368,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[var(--color-text-secondary)]\",\n                                children: showCancellationFlow ? \"We're sorry to see you go\" : 'View and manage your subscription details'\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 371,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 364,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                        variant: \"elevated\",\n                        padding: \"md\",\n                        className: \"mb-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"text-lg font-bold text-[var(--color-text-primary)] mb-4\",\n                                children: \"Current Subscription\"\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 378,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-[var(--color-text-secondary)]\",\n                                                children: \"Plan\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 381,\n                                                columnNumber: 29\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-semibold text-[var(--color-text-primary)]\",\n                                                children: [\n                                                    planName,\n                                                    \" Plan\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 382,\n                                                columnNumber: 29\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 380,\n                                        columnNumber: 25\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-[var(--color-text-secondary)]\",\n                                                children: \"Current Price\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 385,\n                                                columnNumber: 29\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-semibold text-[var(--color-text-primary)]\",\n                                                children: [\n                                                    formatPrice(subscription.currentPrice),\n                                                    \"/\",\n                                                    periodLabel,\n                                                    subscription.hasRetentionDiscount && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-[var(--color-success)] text-sm ml-2\",\n                                                        children: \"(30% off)\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                        lineNumber: 389,\n                                                        columnNumber: 37\n                                                    }, undefined)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 386,\n                                                columnNumber: 29\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 384,\n                                        columnNumber: 25\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-[var(--color-text-secondary)]\",\n                                                children: \"Next Billing Date\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 394,\n                                                columnNumber: 29\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-semibold text-[var(--color-text-primary)]\",\n                                                children: formatDate(subscription.currentPeriodEnd)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                lineNumber: 395,\n                                                columnNumber: 29\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 393,\n                                        columnNumber: 25\n                                    }, undefined),\n                                    subscription.cancelAtPeriodEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                        variant: \"accent\",\n                                        padding: \"sm\",\n                                        className: \"border-l-4 border-[var(--color-warning)]\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-[var(--color-text-primary)] text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                                    className: \"fa-solid fa-exclamation-triangle mr-2\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 400,\n                                                    columnNumber: 37\n                                                }, undefined),\n                                                \"Your subscription will end on \",\n                                                formatDate(subscription.currentPeriodEnd)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 399,\n                                            columnNumber: 33\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 398,\n                                        columnNumber: 29\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 379,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 377,\n                        columnNumber: 17\n                    }, undefined),\n                    showCancellationFlow && !subscription.hasRetentionDiscount && !subscription.cancelAtPeriodEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                variant: \"accent\",\n                                padding: \"lg\",\n                                className: \"mb-6 border-2 border-[var(--color-primary-light)]\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-center mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"inline-block bg-[var(--color-primary)] text-white text-xs font-bold px-3 py-1 rounded-full uppercase mb-2\",\n                                            children: \"Special Offer\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 414,\n                                            columnNumber: 29\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"text-xl font-bold text-[var(--color-text-primary)] mb-2\",\n                                            children: \"Stay with us for 30% off!\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 417,\n                                            columnNumber: 29\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-[var(--color-text-secondary)] mb-4\",\n                                            children: [\n                                                \"We'd love to keep you as a member. Accept this offer and pay only\",\n                                                ' ',\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"font-bold text-[var(--color-primary-dark)]\",\n                                                    children: formatPrice(discountedPrice)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 420,\n                                                    columnNumber: 33\n                                                }, undefined),\n                                                \" per \",\n                                                periodLabel,\n                                                \" instead of\",\n                                                ' ',\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"line-through text-[var(--color-text-muted)]\",\n                                                    children: formatPrice(subscription.originalPrice)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 421,\n                                                    columnNumber: 33\n                                                }, undefined),\n                                                \".\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 418,\n                                            columnNumber: 29\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                            variant: \"default\",\n                                            padding: \"md\",\n                                            className: \"mb-4\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between items-center\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-[var(--color-text-secondary)]\",\n                                                            children: \"Original Price\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 425,\n                                                            columnNumber: 37\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-lg font-bold text-[var(--color-text-primary)]\",\n                                                            children: [\n                                                                formatPrice(subscription.originalPrice),\n                                                                \"/\",\n                                                                periodLabel\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 426,\n                                                            columnNumber: 37\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 424,\n                                                    columnNumber: 33\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between items-center mt-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-[var(--color-text-secondary)]\",\n                                                            children: \"Your New Price\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 429,\n                                                            columnNumber: 37\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-2xl font-extrabold text-[var(--color-primary-dark)]\",\n                                                            children: [\n                                                                formatPrice(discountedPrice),\n                                                                \"/\",\n                                                                periodLabel\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 430,\n                                                            columnNumber: 37\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 428,\n                                                    columnNumber: 33\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-center mt-3 text-sm text-[var(--color-text-muted)]\",\n                                                    children: [\n                                                        \"Save \",\n                                                        formatPrice(subscription.originalPrice - discountedPrice),\n                                                        \" per \",\n                                                        periodLabel\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 432,\n                                                    columnNumber: 33\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 423,\n                                            columnNumber: 29\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 413,\n                                    columnNumber: 25\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 412,\n                                columnNumber: 21\n                            }, undefined),\n                            detectedPlan === 'monthly' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                variant: \"accent\",\n                                padding: \"lg\",\n                                className: \"mb-6 border-2 border-[var(--color-success-light)]\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-center mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"inline-block bg-[var(--color-success)] text-white text-xs font-bold px-3 py-1 rounded-full uppercase mb-2\",\n                                            children: \"Save More\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 443,\n                                            columnNumber: 37\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"text-lg font-bold text-[var(--color-text-primary)] mb-2\",\n                                            children: \"Switch to Annual Billing\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 446,\n                                            columnNumber: 45\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-[var(--color-text-secondary)] text-sm mb-3\",\n                                            children: [\n                                                \"Change to annual billing to save \",\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"font-bold text-[var(--color-success)]\",\n                                                    children: [\n                                                        \"$\",\n                                                        (subscription.originalPrice * 12 - 99.99).toFixed(2),\n                                                        \"/year\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 448,\n                                                    columnNumber: 82\n                                                }, undefined),\n                                                \".\",\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 449,\n                                                    columnNumber: 49\n                                                }, undefined),\n                                                \"The change takes effect at the end of your current month.\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 447,\n                                            columnNumber: 45\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                            onClick: (e)=>{\n                                                e.preventDefault();\n                                                e.stopPropagation();\n                                                console.log('[CancelSubscriptionView] Annual upgrade clicked in cancellation flow');\n                                                handleUpgradeToAnnual();\n                                            },\n                                            disabled: upgradeLoading || actionLoading !== null,\n                                            variant: \"success\",\n                                            fullWidth: true,\n                                            loading: upgradeLoading,\n                                            className: \"mb-4 !text-black !border-2 !border-black\",\n                                            children: \"Switch to Annual & Save\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 453,\n                                            columnNumber: 45\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                            variant: \"default\",\n                                            padding: \"sm\",\n                                            className: \"mb-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between items-center text-sm\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-[var(--color-text-secondary)]\",\n                                                            children: \"Monthly (current)\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 471,\n                                                            columnNumber: 53\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"font-semibold text-[var(--color-text-primary)]\",\n                                                            children: [\n                                                                formatPrice(subscription.originalPrice),\n                                                                \"/month\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 472,\n                                                            columnNumber: 53\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 470,\n                                                    columnNumber: 49\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between items-center mt-2 text-sm\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-[var(--color-text-secondary)]\",\n                                                            children: \"Annual (upgrade)\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 475,\n                                                            columnNumber: 53\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"font-semibold text-[var(--color-success)]\",\n                                                            children: \"$99.99/year\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                            lineNumber: 476,\n                                                            columnNumber: 53\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 474,\n                                                    columnNumber: 49\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 469,\n                                            columnNumber: 45\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 442,\n                                    columnNumber: 41\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 441,\n                                columnNumber: 29\n                            }, undefined)\n                        ]\n                    }, void 0, true),\n                    !subscription.hasRetentionDiscount && !subscription.cancelAtPeriodEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4\",\n                        children: !showCancellationFlow ? // Initial view - Show Cancel button only\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: ()=>setShowCancellationFlow(true),\n                                    className: \"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-white border border-[var(--color-neutral-300)] rounded-lg shadow-md hover:bg-[var(--color-bg-accent)] hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 text-[var(--color-text-primary)] font-semibold text-sm\",\n                                    children: \"Cancel Subscription\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 491,\n                                    columnNumber: 37\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                                    onClick: onBack,\n                                    label: \"Go Back to Settings\",\n                                    className: \"w-full justify-center\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 498,\n                                    columnNumber: 37\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                            lineNumber: 490,\n                            columnNumber: 33\n                        }, undefined) : // Cancellation flow - Show retention offer buttons\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                    onClick: handleAcceptOffer,\n                                    disabled: actionLoading !== null,\n                                    variant: \"primary\",\n                                    fullWidth: true,\n                                    loading: actionLoading === 'accept',\n                                    children: \"Keep My Subscription (30% Off)\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 503,\n                                    columnNumber: 33\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                    onClick: handleCancel,\n                                    disabled: actionLoading !== null,\n                                    variant: \"secondary\",\n                                    fullWidth: true,\n                                    loading: actionLoading === 'cancel',\n                                    children: \"Cancel Anyway\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 512,\n                                    columnNumber: 33\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                            lineNumber: 502,\n                            columnNumber: 29\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 487,\n                        columnNumber: 21\n                    }, undefined),\n                    subscription.cancelAtPeriodEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-center mb-5\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-[var(--color-text-secondary)]\",\n                                    children: [\n                                        \"Your subscription is scheduled to cancel on \",\n                                        formatDate(subscription.currentPeriodEnd),\n                                        \".\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 529,\n                                    columnNumber: 29\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 528,\n                                columnNumber: 25\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"button\",\n                                        onClick: handleRestore,\n                                        disabled: actionLoading !== null,\n                                        className: \"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-white border border-[var(--color-neutral-300)] rounded-lg shadow-md hover:bg-[var(--color-bg-accent)] hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 text-[var(--color-text-primary)] font-semibold text-sm disabled:opacity-50\",\n                                        children: actionLoading === 'restore' ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 542,\n                                                    columnNumber: 41\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: \"Restoring...\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 543,\n                                                    columnNumber: 41\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                                    className: \"fa-solid fa-rotate-left\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 547,\n                                                    columnNumber: 41\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: \"Restore Purchase\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 548,\n                                                    columnNumber: 41\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 534,\n                                        columnNumber: 29\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                                        onClick: onBack,\n                                        label: \"Go Back to Settings\",\n                                        className: \"w-full justify-center\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 552,\n                                        columnNumber: 29\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 533,\n                                columnNumber: 25\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 527,\n                        columnNumber: 21\n                    }, undefined),\n                    subscription.hasRetentionDiscount && !subscription.cancelAtPeriodEnd && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-center mb-5\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-[var(--color-text-secondary)]\",\n                                    children: \"You're already enjoying the 30% discount! Your subscription will continue at the discounted rate.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                    lineNumber: 560,\n                                    columnNumber: 29\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 559,\n                                columnNumber: 25\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"button\",\n                                        onClick: handleCancel,\n                                        disabled: actionLoading !== null,\n                                        className: \"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-white border border-[var(--color-neutral-300)] rounded-lg shadow-md hover:bg-[var(--color-bg-accent)] hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 text-[var(--color-text-primary)] font-semibold text-sm disabled:opacity-50\",\n                                        children: actionLoading === 'cancel' ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 573,\n                                                    columnNumber: 41\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: \"Cancelling...\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                                    lineNumber: 574,\n                                                    columnNumber: 41\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"Cancel Subscription\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                            lineNumber: 577,\n                                            columnNumber: 37\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 565,\n                                        columnNumber: 29\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_BackButton__WEBPACK_IMPORTED_MODULE_5__.BackButton, {\n                                        onClick: onBack,\n                                        label: \"Go Back to Settings\",\n                                        className: \"w-full justify-center\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                        lineNumber: 580,\n                                        columnNumber: 29\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                                lineNumber: 564,\n                                columnNumber: 25\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                        lineNumber: 558,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n                lineNumber: 363,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/views/CancelSubscriptionView.tsx\",\n        lineNumber: 355,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CancelSubscriptionView);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL3ZpZXdzL0NhbmNlbFN1YnNjcmlwdGlvblZpZXcudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUVtRDtBQUVTO0FBQ3lGO0FBQy9HO0FBQ1E7QUFDWjtBQUNLO0FBU3ZDLE1BQU1hLHlCQUFnRSxDQUFDLEVBQUVDLElBQUksRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUVDLGFBQWEsRUFBRTtJQUM1RyxNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHbEIsK0NBQVFBLENBQTZCO0lBQzdFLE1BQU0sQ0FBQ21CLFNBQVNDLFdBQVcsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3FCLGVBQWVDLGlCQUFpQixHQUFHdEIsK0NBQVFBLENBQWdCO0lBQ2xFLE1BQU0sQ0FBQ3VCLE9BQU9DLFNBQVMsR0FBR3hCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUN5QixTQUFTQyxXQUFXLEdBQUcxQiwrQ0FBUUEsQ0FBZ0I7SUFDdEQsTUFBTSxDQUFDMkIscUJBQXFCQyx1QkFBdUIsR0FBRzVCLCtDQUFRQSxDQUFDO0lBQy9ELE1BQU0sQ0FBQzZCLGdCQUFnQkMsa0JBQWtCLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUMrQixzQkFBc0JDLHdCQUF3QixHQUFHaEMsK0NBQVFBLENBQUM7SUFDakUsTUFBTSxFQUFFaUMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFdBQVcsRUFBRUMsY0FBYyxFQUFFLEdBQUd6QixtREFBUUE7SUFFbkVWLGdEQUFTQTs0Q0FBQztZQUNOb0M7UUFDSjsyQ0FBRztRQUFDeEIsS0FBS3lCLEVBQUU7S0FBQztJQUVaLE1BQU1ELG1CQUFtQjtRQUNyQmpCLFdBQVc7UUFDWEksU0FBUztRQUNUSSx1QkFBdUI7UUFDdkIsSUFBSTtZQUNBLE1BQU1XLE1BQU0sTUFBTXBDLDRFQUFtQkEsQ0FBQ1UsS0FBS3lCLEVBQUU7WUFDN0Msb0RBQW9EO1lBQ3BELElBQUlDLE9BQU8sT0FB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LE1BQUs7d0NBQ0x2QixTQUFTakM7d0NBQ1RxRCxVQUFVdkYsa0JBQWtCO3dDQUM1QjBELFdBQVU7a0RBRVQxRCxrQkFBa0IseUJBQ2Y7OzhEQUNJLDhEQUFDeUQ7b0RBQUlDLFdBQVU7b0RBQWlGSyxlQUFZOzs7Ozs7OERBQzVHLDhEQUFDaUI7OERBQUs7Ozs7Ozs7eUVBR1YsOERBQUNBO3NEQUFLOzs7Ozs7Ozs7OztrREFHZCw4REFBQzVGLHNEQUFVQTt3Q0FBQytFLFNBQVN6RTt3Q0FBUTBFLE9BQU07d0NBQXNCVixXQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPL0Y7QUFFQSxpRUFBZW5FLHNCQUFzQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2phdmkvZGV2L01haW4yTUkvY29tcG9uZW50cy92aWV3cy9DYW5jZWxTdWJzY3JpcHRpb25WaWV3LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25EZXRhaWxzLCBVc2VyVGllciB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IGdldFVzZXJTdWJzY3JpcHRpb24sIGNhbmNlbFN1YnNjcmlwdGlvbiwgcmVzdG9yZVN1YnNjcmlwdGlvbiwgY3JlYXRlTW9ja1N1YnNjcmlwdGlvbiwgdXBncmFkZVRvQW5udWFsIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvc3RyaXBlU2VydmljZSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi91aS9CdXR0b24nO1xuaW1wb3J0IHsgQmFja0J1dHRvbiB9IGZyb20gJy4uL3VpL0JhY2tCdXR0b24nO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL3VpL0NhcmQnO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICcuLi91aS9Ub2FzdCc7XG5cbmludGVyZmFjZSBDYW5jZWxTdWJzY3JpcHRpb25WaWV3UHJvcHMge1xuICAgIHVzZXI6IFVzZXI7XG4gICAgdXNlclRpZXI6IFVzZXJUaWVyO1xuICAgIG9uQmFjazogKCkgPT4gdm9pZDtcbiAgICBvblRpZXJVcGRhdGVkPzogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgQ2FuY2VsU3Vic2NyaXB0aW9uVmlldzogUmVhY3QuRkM8Q2FuY2VsU3Vic2NyaXB0aW9uVmlld1Byb3BzPiA9ICh7IHVzZXIsIHVzZXJUaWVyLCBvbkJhY2ssIG9uVGllclVwZGF0ZWQgfSkgPT4ge1xuICAgIGNvbnN0IFtzdWJzY3JpcHRpb24sIHNldFN1YnNjcmlwdGlvbl0gPSB1c2VTdGF0ZTxTdWJzY3JpcHRpb25EZXRhaWxzIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW2FjdGlvbkxvYWRpbmcsIHNldEFjdGlvbkxvYWRpbmddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbc3VjY2Vzcywgc2V0U3VjY2Vzc10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbcHJlbWl1bVRpZXJNaXNtYXRjaCwgc2V0UHJlbWl1bVRpZXJNaXNtYXRjaF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3VwZ3JhZGVMb2FkaW5nLCBzZXRVcGdyYWRlTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3Nob3dDYW5jZWxsYXRpb25GbG93LCBzZXRTaG93Q2FuY2VsbGF0aW9uRmxvd10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgeyB0b2FzdHMsIHNob3dUb2FzdCwgcmVtb3ZlVG9hc3QsIFRvYXN0Q29udGFpbmVyIH0gPSB1c2VUb2FzdCgpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgbG9hZFN1YnNjcmlwdGlvbigpO1xuICAgIH0sIFt1c2VyLmlkXSk7XG5cbiAgICBjb25zdCBsb2FkU3Vic2NyaXB0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgc2V0UHJlbWl1bVRpZXJNaXNtYXRjaChmYWxzZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdWIgPSBhd2FpdCBnZXRVc2VyU3Vic2NyaXB0aW9uKHVzZXIuaWQpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHByZW1pdW0gdGllciBtaXNtYXRjaCByZXNwb25zZVxuICAgICAgICAgICAgaWYgKHN1YiAmJiB0eXBlb2Ygc3ViID09PSAnb2JqZWN0JyAmJiAnX3ByZW1pdW1UaWVyTWlzbWF0Y2gnIGluIHN1Yikge1xuICAgICAgICAgICAgICAgIHNldFByZW1pdW1UaWVyTWlzbWF0Y2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3Ioc3ViLmVycm9yKTtcbiAgICAgICAgICAgICAgICBzZXRTdWJzY3JpcHRpb24obnVsbCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmFja2VuZCdzIGdldC1zdWJzY3JpcHRpb24gZW5kcG9pbnQgbm93IGF1dG9tYXRpY2FsbHkgcmVjb3ZlcnMgc3Vic2NyaXB0aW9uc1xuICAgICAgICAgICAgICAgIC8vIHVzaW5nIHRoZSBzdG9yZWQgcGxhbiBmcm9tIHRoZSBkYXRhYmFzZSwgc28gbm8gbmVlZCB0byBhdXRvLWNyZWF0ZSBoZXJlXG4gICAgICAgICAgICAgICAgLy8gVGhlIHN1YnNjcmlwdGlvbiBzaG91bGQgYmUgcmVjb3ZlcmVkIG9uIHRoZSBuZXh0IHBhZ2UgbG9hZCBvciByZWZyZXNoXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFN1YnNjcmlwdGlvbihzdWIpO1xuICAgICAgICAgICAgICAgIC8vIExvZyBzdWJzY3JpcHRpb24gZGV0YWlscyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgaWYgKHN1Yikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbmNlbFN1YnNjcmlwdGlvblZpZXddIFN1YnNjcmlwdGlvbiBsb2FkZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhbjogc3ViLnBsYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFByaWNlOiBzdWIub3JpZ2luYWxQcmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogc3ViLmN1cnJlbnRQcmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmlvZExhYmVsOiBzdWIucGxhbiA9PT0gJ21vbnRobHknID8gJ21vbnRoJyA6ICd5ZWFyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JldGVudGlvbkRpc2NvdW50OiBzdWIuaGFzUmV0ZW50aW9uRGlzY291bnRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBFcnJvciBsb2FkaW5nIHN1YnNjcmlwdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBzdWJzY3JpcHRpb24gZGV0YWlscyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBuZXR3b3JrL3NlcnZlciBlcnJvciB3aXRoIG1vcmUgZGV0YWlsc1xuICAgICAgICAgICAgbGV0IGRpc3BsYXlFcnJvciA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2VuZHBvaW50IG5vdCBmb3VuZCcpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5RXJyb3IgPSAnVW5hYmxlIHRvIHJlYWNoIHRoZSBzdWJzY3JpcHRpb24gc2VydmVyLiBQbGVhc2UgZW5zdXJlIHlvdXIgU3VwYWJhc2UgRWRnZSBGdW5jdGlvbnMgYXJlIGRlcGxveWVkLic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnTW9jayBzdWJzY3JpcHRpb24nKSkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvciA9IGVycm9yTWVzc2FnZTsgLy8gVXNlIHRoZSBkZXRhaWxlZCBiYWNrZW5kIGVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldEVycm9yKGRpc3BsYXlFcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVBY2NlcHRPZmZlciA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgc2V0QWN0aW9uTG9hZGluZygnYWNjZXB0Jyk7XG4gICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICBzZXRTdWNjZXNzKG51bGwpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFN1YnNjcmlwdGlvbih1c2VyLmlkLCB0cnVlKTtcbiAgICAgICAgICAgIHNob3dUb2FzdCgnR3JlYXQhIFlvdXIgMzAlIGRpc2NvdW50IGhhcyBiZWVuIGFwcGxpZWQuIFlvdVxcJ2xsIGNvbnRpbnVlIHRvIGVuam95IHByZW1pdW0gZmVhdHVyZXMgYXQgdGhlIGRpc2NvdW50ZWQgcmF0ZS4nLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgLy8gUmVsb2FkIHN1YnNjcmlwdGlvbiB0byBzaG93IHVwZGF0ZWQgZGlzY291bnRcbiAgICAgICAgICAgIGF3YWl0IGxvYWRTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIC8vIFJlZnJlc2ggdGllciBpZiBjYWxsYmFjayBwcm92aWRlZFxuICAgICAgICAgICAgaWYgKG9uVGllclVwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG9uVGllclVwZGF0ZWQoKSwgMTAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbmNlbFN1YnNjcmlwdGlvblZpZXddIEVycm9yIGFjY2VwdGluZyBvZmZlcjonLCBlcnIpO1xuICAgICAgICAgICAgc2hvd1RvYXN0KGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGFwcGx5IGRpc2NvdW50LiBQbGVhc2UgdHJ5IGFnYWluLicsICdlcnJvcicpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0QWN0aW9uTG9hZGluZyhudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDYW5jZWwgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNhbmNlbCB5b3VyIHN1YnNjcmlwdGlvbj8gWW91XFwnbGwgbG9zZSBhY2Nlc3MgdG8gcHJlbWl1bSBmZWF0dXJlcyBhdCB0aGUgZW5kIG9mIHlvdXIgYmlsbGluZyBwZXJpb2QuJykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldEFjdGlvbkxvYWRpbmcoJ2NhbmNlbCcpO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgc2V0U3VjY2VzcyhudWxsKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYW5jZWxTdWJzY3JpcHRpb24odXNlci5pZCwgZmFsc2UpO1xuICAgICAgICAgICAgc2hvd1RvYXN0KGBZb3VyIHN1YnNjcmlwdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQuIFlvdSdsbCBjb250aW51ZSB0byBoYXZlIGFjY2VzcyB1bnRpbCAke25ldyBEYXRlKHJlc3VsdC5jdXJyZW50UGVyaW9kRW5kKS50b0xvY2FsZURhdGVTdHJpbmcoKX0uYCwgJ2luZm8nKTtcbiAgICAgICAgICAgIC8vIFJlbG9hZCBzdWJzY3JpcHRpb24gdG8gc2hvdyBjYW5jZWxsYXRpb24gc3RhdHVzXG4gICAgICAgICAgICBhd2FpdCBsb2FkU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAvLyBSZWZyZXNoIHRpZXIgaWYgY2FsbGJhY2sgcHJvdmlkZWRcbiAgICAgICAgICAgIGlmIChvblRpZXJVcGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvblRpZXJVcGRhdGVkKCksIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBFcnJvciBjYW5jZWxsaW5nOicsIGVycik7XG4gICAgICAgICAgICBzaG93VG9hc3QoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gY2FuY2VsIHN1YnNjcmlwdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCAnZXJyb3InKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldEFjdGlvbkxvYWRpbmcobnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUmVzdG9yZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgc2V0QWN0aW9uTG9hZGluZygncmVzdG9yZScpO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgc2V0U3VjY2VzcyhudWxsKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXN0b3JlU3Vic2NyaXB0aW9uKHVzZXIuaWQpO1xuICAgICAgICAgICAgc2hvd1RvYXN0KCdZb3VyIHN1YnNjcmlwdGlvbiBoYXMgYmVlbiByZXN0b3JlZCEgWW91XFwnbGwgY29udGludWUgdG8gaGF2ZSBhY2Nlc3MgdG8gcHJlbWl1bSBmZWF0dXJlcy4nLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgLy8gUmVsb2FkIHN1YnNjcmlwdGlvbiB0byBzaG93IHJlc3RvcmVkIHN0YXR1c1xuICAgICAgICAgICAgYXdhaXQgbG9hZFN1YnNjcmlwdGlvbigpO1xuICAgICAgICAgICAgLy8gUmVmcmVzaCB0aWVyIGlmIGNhbGxiYWNrIHByb3ZpZGVkXG4gICAgICAgICAgICBpZiAob25UaWVyVXBkYXRlZCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gb25UaWVyVXBkYXRlZCgpLCAxMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ2FuY2VsU3Vic2NyaXB0aW9uVmlld10gRXJyb3IgcmVzdG9yaW5nOicsIGVycik7XG4gICAgICAgICAgICBzaG93VG9hc3QoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gcmVzdG9yZSBzdWJzY3JpcHRpb24uIFBsZWFzZSB0cnkgYWdhaW4uJywgJ2Vycm9yJyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRBY3Rpb25Mb2FkaW5nKG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVVwZ3JhZGVUb0FubnVhbCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBVcGdyYWRlIHRvIEFubnVhbCBjbGlja2VkJyk7XG4gICAgICAgIHNldFVwZ3JhZGVMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgc2V0U3VjY2VzcyhudWxsKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbmNlbFN1YnNjcmlwdGlvblZpZXddIENhbGxpbmcgdXBncmFkZVRvQW5udWFsIGZvciB1c2VyOicsIHVzZXIuaWQpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBncmFkZVRvQW5udWFsKHVzZXIuaWQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBVcGdyYWRlIHJlc3BvbnNlOicsIHJlc3VsdCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzdWx0Py5tZXNzYWdlIHx8ICdZb3VyIHN1YnNjcmlwdGlvbiB3aWxsIGJlIHVwZ3JhZGVkIHRvIEFubnVhbCBhdCB0aGUgZW5kIG9mIHlvdXIgY3VycmVudCBiaWxsaW5nIHBlcmlvZC4nO1xuICAgICAgICAgICAgc2hvd1RvYXN0KG1lc3NhZ2UsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICAvLyBSZWxvYWQgc3Vic2NyaXB0aW9uIHRvIHNob3cgdXBkYXRlZCBwbGFuXG4gICAgICAgICAgICBhd2FpdCBsb2FkU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAvLyBSZWZyZXNoIHRpZXIgaWYgY2FsbGJhY2sgcHJvdmlkZWRcbiAgICAgICAgICAgIGlmIChvblRpZXJVcGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvblRpZXJVcGRhdGVkKCksIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBFcnJvciB1cGdyYWRpbmc6JywgZXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwZ3JhZGUgc3Vic2NyaXB0aW9uLiBQbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3ZpZGUgbW9yZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICAgICBsZXQgZGlzcGxheU1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGYWlsZWQgdG8gZmV0Y2gnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ05ldHdvcmtFcnJvcicpKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheU1lc3NhZ2UgPSAnVW5hYmxlIHRvIHJlYWNoIHRoZSBzdWJzY3JpcHRpb24gc2VydmVyLiBQbGVhc2UgZW5zdXJlIHlvdXIgU3VwYWJhc2UgRWRnZSBGdW5jdGlvbnMgYXJlIGRlcGxveWVkIGFuZCBydW5uaW5nLic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnTm8gY3VzdG9tZXIgZm91bmQnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ05vIGFjdGl2ZSBzdWJzY3JpcHRpb24nKSkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlID0gJ1N1YnNjcmlwdGlvbiBub3QgZm91bmQuIFBsZWFzZSBlbnN1cmUgeW91IGhhdmUgYW4gYWN0aXZlIHN1YnNjcmlwdGlvbi4nO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2FscmVhZHkgb24gdGhlIGFubnVhbCBwbGFuJykpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZSA9ICdZb3VyIHN1YnNjcmlwdGlvbiBpcyBhbHJlYWR5IG9uIHRoZSBhbm51YWwgcGxhbi4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzaG93VG9hc3QoZGlzcGxheU1lc3NhZ2UsICdlcnJvcicpO1xuICAgICAgICAgICAgc2V0RXJyb3IoZGlzcGxheU1lc3NhZ2UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0VXBncmFkZUxvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZvcm1hdE1vY2tDcmVhdGlvbkVycm9yID0gKGVycjogdW5rbm93bikgPT4ge1xuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGNyZWF0ZSBtb2NrIHN1YnNjcmlwdGlvbic7XG4gICAgICAgIGlmICgvRmFpbGVkIHRvIGZldGNofE5ldHdvcmtFcnJvci9pLnRlc3QoYmFzZU1lc3NhZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byByZWFjaCB0aGUgc3Vic2NyaXB0aW9uIHNlcnZlci4gUGxlYXNlIGVuc3VyZSB5b3VyIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25zIGFyZSBkZXBsb3llZC4nO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB0aGUgYmFja2VuZCBlcnJvciBtZXNzYWdlIGFzLWlzIGZvciBiZXR0ZXIgZGVidWdnaW5nXG4gICAgICAgIHJldHVybiBiYXNlTWVzc2FnZTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ3JlYXRlTW9ja1N1YnNjcmlwdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY3JlYXRlTW9ja1N1YnNjcmlwdGlvbih1c2VyLmlkLCAnbW9udGhseScpO1xuICAgICAgICAgICAgYXdhaXQgbG9hZFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBFcnJvciBjcmVhdGluZyBtb2NrIHN1YnNjcmlwdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgc2V0RXJyb3IoZm9ybWF0TW9ja0NyZWF0aW9uRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBmb3JtYXRQcmljZSA9IChwcmljZTogbnVtYmVyKSA9PiB7XG4gICAgICAgIHJldHVybiBgJCR7cHJpY2UudG9GaXhlZCgyKX1gO1xuICAgIH07XG5cbiAgICBjb25zdCBmb3JtYXREYXRlID0gKGRhdGVTdHJpbmc6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZykudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgICAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgICAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICAgICAgICBkYXk6ICdudW1lcmljJyxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNhbGN1bGF0ZURpc2NvdW50ZWRQcmljZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBkaXNjb3VudEFtb3VudCA9IHN1YnNjcmlwdGlvbi5vcmlnaW5hbFByaWNlICogMC4zO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLm9yaWdpbmFsUHJpY2UgLSBkaXNjb3VudEFtb3VudDtcbiAgICB9O1xuXG4gICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLXRyYW5zcGFyZW50IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItYi0yIGJvcmRlci1bdmFyKC0tY29sb3ItcHJpbWFyeSldIG14LWF1dG8gbWItNFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXNlY29uZGFyeSldXCI+TG9hZGluZyBzdWJzY3JpcHRpb24gZGV0YWlscy4uLjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChlcnJvciAmJiAhc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy10cmFuc3BhcmVudCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgICAgICAgICAgICA8Q2FyZCB2YXJpYW50PVwiZWxldmF0ZWRcIiBwYWRkaW5nPVwibGdcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbWItNCBiZy1bdmFyKC0tY29sb3ItZXJyb3ItbGlnaHQpXSBoLTIwIHctMjAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUgdGV4dC00eGwgdGV4dC1bdmFyKC0tY29sb3ItZXJyb3IpXVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIG1iLTJcIj5VbmFibGUgdG8gTG9hZCBTdWJzY3JpcHRpb248L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXSBtYi00XCI+e2Vycm9yfTwvcD5cbiAgICAgICAgICAgICAgICAgICAge2Vycm9yLmluY2x1ZGVzKCdFZGdlIEZ1bmN0aW9ucycpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZCB2YXJpYW50PVwiYWNjZW50XCIgcGFkZGluZz1cIm1kXCIgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxlZnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXSBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+U2V0dXAgUmVxdWlyZWQ6PC9zdHJvbmc+IERlcGxveSB5b3VyIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25zOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNvZGUgY2xhc3NOYW1lPVwiYmxvY2sgbXQtMiB0ZXh0LXhzIGJnLXdoaXRlIHAtMiByb3VuZGVkIGZvbnQtbW9ub1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwYWJhc2UgZnVuY3Rpb25zIGRlcGxveVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8QmFja0J1dHRvbiBvbkNsaWNrPXtvbkJhY2t9IGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LWNlbnRlclwiIGxhYmVsPVwiR28gQmFja1wiIC8+XG4gICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgLy8gU2hvdyBzcGVjaWFsIG1lc3NhZ2UgaWYgdXNlciBpcyBwcmVtaXVtIGJ1dCBubyBzdWJzY3JpcHRpb24gZm91bmRcbiAgICAgICAgaWYgKHByZW1pdW1UaWVyTWlzbWF0Y2ggfHwgdXNlclRpZXIgPT09IFVzZXJUaWVyLlByZW1pdW0pIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctdHJhbnNwYXJlbnQgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkIHZhcmlhbnQ9XCJlbGV2YXRlZFwiIHBhZGRpbmc9XCJsZ1wiIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1tZCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIG1iLTQgYmctW3ZhcigtLWNvbG9yLXdhcm5pbmctbGlnaHQpXSBoLTIwIHctMjAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhLXNvbGlkIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlIHRleHQtNHhsIHRleHQtW3ZhcigtLWNvbG9yLXdhcm5pbmcpXVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV0gbWItMlwiPlN1YnNjcmlwdGlvbiBOb3QgRm91bmQ8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV0gbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFlvdXIgYWNjb3VudCBzaG93cyBhcyBwcmVtaXVtLCBidXQgbm8gYWN0aXZlIFN0cmlwZSBzdWJzY3JpcHRpb24gd2FzIGZvdW5kLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIG1heSBoYXBwZW4gaWYgeW91ciBzdWJzY3JpcHRpb24gd2FzIGNhbmNlbGxlZCBvciB0aGVyZSdzIGEgbWlzbWF0Y2ggYmV0d2VlbiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5b3VyIGFjY291bnQgc3RhdHVzIGFuZCBTdHJpcGUgcmVjb3Jkcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1tdXRlZCldIG1iLTRcIj57ZXJyb3J9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXNlY29uZGFyeSldIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2UgY29udGFjdCBzdXBwb3J0IGlmIHlvdSBiZWxpZXZlIHRoaXMgaXMgYW4gZXJyb3IsIG9yIGlmIHlvdSdkIGxpa2UgdG8gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RpdmF0ZSB5b3VyIHN1YnNjcmlwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ3JlYXRlTW9ja1N1YnNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWItNFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRml4IFN1YnNjcmlwdGlvbiAoRGV2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QmFja0J1dHRvbiBvbkNsaWNrPXtvbkJhY2t9IGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LWNlbnRlclwiIGxhYmVsPVwiR28gQmFjayB0byBTZXR0aW5nc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJlZ3VsYXIgXCJubyBzdWJzY3JpcHRpb25cIiBtZXNzYWdlIGZvciBmcmVlIHRpZXIgdXNlcnNcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLXRyYW5zcGFyZW50IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNFwiPlxuICAgICAgICAgICAgICAgIDxDYXJkIHZhcmlhbnQ9XCJlbGV2YXRlZFwiIHBhZGRpbmc9XCJsZ1wiIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1tZCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBtYi00IGJnLVt2YXIoLS1jb2xvci1iZy1hY2NlbnQpXSBoLTIwIHctMjAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtaW5mby1jaXJjbGUgdGV4dC00eGwgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1tdXRlZCldXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIG1iLTJcIj5ObyBBY3RpdmUgU3Vic2NyaXB0aW9uPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV1cIj5Zb3UgZG9uJ3QgaGF2ZSBhbiBhY3RpdmUgc3Vic2NyaXB0aW9uIHRvIGNhbmNlbC48L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8QmFja0J1dHRvbiBvbkNsaWNrPXtvbkJhY2t9IGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LWNlbnRlclwiIGxhYmVsPVwiR28gQmFja1wiIC8+XG4gICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlzY291bnRlZFByaWNlID0gY2FsY3VsYXRlRGlzY291bnRlZFByaWNlKCk7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHBsYW4gdHlwZSB3aXRoIGZhbGxiYWNrIGZvciAndW5rbm93bicgcGxhbnNcbiAgICBsZXQgZGV0ZWN0ZWRQbGFuID0gc3Vic2NyaXB0aW9uLnBsYW47XG4gICAgaWYgKGRldGVjdGVkUGxhbiA9PT0gJ3Vua25vd24nKSB7XG4gICAgICAgIC8vIEluZmVyIHBsYW4gZnJvbSBwcmljaW5nOiBhbm51YWwgcGxhbnMgYXJlIHR5cGljYWxseSA+ICQ1MFxuICAgICAgICAvLyBUaGlzIG1hdGNoZXMgdGhlIGJhY2tlbmQgZmFsbGJhY2sgbG9naWNcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5vcmlnaW5hbFByaWNlID4gNTApIHtcbiAgICAgICAgICAgIGRldGVjdGVkUGxhbiA9ICdhbm51YWwnO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQ2FuY2VsU3Vic2NyaXB0aW9uVmlld10gUGxhbiB3YXMgXCJ1bmtub3duXCIsIGluZmVycmVkIGFzIFwiYW5udWFsXCIgZnJvbSBwcmljZTonLCBzdWJzY3JpcHRpb24ub3JpZ2luYWxQcmljZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZXRlY3RlZFBsYW4gPSAnbW9udGhseSc7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tDYW5jZWxTdWJzY3JpcHRpb25WaWV3XSBQbGFuIHdhcyBcInVua25vd25cIiwgaW5mZXJyZWQgYXMgXCJtb250aGx5XCIgZnJvbSBwcmljZTonLCBzdWJzY3JpcHRpb24ub3JpZ2luYWxQcmljZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgcGxhbk5hbWUgPSBkZXRlY3RlZFBsYW4gPT09ICdtb250aGx5JyA/ICdNb250aGx5JyA6ICdBbm51YWwnO1xuICAgIGNvbnN0IHBlcmlvZExhYmVsID0gZGV0ZWN0ZWRQbGFuID09PSAnbW9udGhseScgPyAnbW9udGgnIDogJ3llYXInO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRoYXQgcHJpY2luZyBtYXRjaGVzIHBsYW4gdHlwZVxuICAgIC8vIEFubnVhbCBzdWJzY3JpcHRpb25zIHNob3VsZCBiZSBzaWduaWZpY2FudGx5IGhpZ2hlciB0aGFuIG1vbnRobHlcbiAgICBjb25zdCBpc0xpa2VseUFubnVhbCA9IHN1YnNjcmlwdGlvbi5vcmlnaW5hbFByaWNlID4gNTA7XG4gICAgY29uc3QgaXNMaWtlbHlNb250aGx5ID0gc3Vic2NyaXB0aW9uLm9yaWdpbmFsUHJpY2UgPD0gNTA7XG4gICAgaWYgKChkZXRlY3RlZFBsYW4gPT09ICdhbm51YWwnICYmICFpc0xpa2VseUFubnVhbCkgfHwgKGRldGVjdGVkUGxhbiA9PT0gJ21vbnRobHknICYmICFpc0xpa2VseU1vbnRobHkpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW0NhbmNlbFN1YnNjcmlwdGlvblZpZXddIOKaoO+4jyBQbGFuIHR5cGUgbWlzbWF0Y2ggZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgcGxhbjogZGV0ZWN0ZWRQbGFuLFxuICAgICAgICAgICAgb3JpZ2luYWxQcmljZTogc3Vic2NyaXB0aW9uLm9yaWdpbmFsUHJpY2UsXG4gICAgICAgICAgICBleHBlY3RlZFJhbmdlOiBkZXRlY3RlZFBsYW4gPT09ICdhbm51YWwnID8gJz4gJDUwJyA6ICc8PSAkNTAnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLXRyYW5zcGFyZW50IHBiLTI0XCI+XG4gICAgICAgICAgICA8VG9hc3RDb250YWluZXIgdG9hc3RzPXt0b2FzdHN9IG9uUmVtb3ZlPXtyZW1vdmVUb2FzdH0gLz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNiBweS00XCI+XG4gICAgICAgICAgICAgICAgPEJhY2tCdXR0b24gb25DbGljaz17b25CYWNrfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kIG14LWF1dG8gcHgtNlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbWItNCBiZy1bdmFyKC0tY29sb3ItcHJpbWFyeS1saWdodGVyKV0gaC0yMCB3LTIwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByaW5nLTggcmluZy1bdmFyKC0tY29sb3ItcHJpbWFyeS1saWdodGVyKV0vNTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhLXNvbGlkIGZhLWNyZWRpdC1jYXJkIHRleHQtNHhsIHRleHQtW3ZhcigtLWNvbG9yLXByaW1hcnktZGFyayldXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtM3hsIHNtOnRleHQtNHhsIGZvbnQtZXh0cmFib2xkIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93Q2FuY2VsbGF0aW9uRmxvdyA/ICdDYW5jZWwgU3Vic2NyaXB0aW9uJyA6ICdNYW5hZ2UgU3Vic2NyaXB0aW9uJ31cbiAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dDYW5jZWxsYXRpb25GbG93ID8gXCJXZSdyZSBzb3JyeSB0byBzZWUgeW91IGdvXCIgOiAnVmlldyBhbmQgbWFuYWdlIHlvdXIgc3Vic2NyaXB0aW9uIGRldGFpbHMnfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7LyogQ3VycmVudCBTdWJzY3JpcHRpb24gRGV0YWlscyAqL31cbiAgICAgICAgICAgICAgICA8Q2FyZCB2YXJpYW50PVwiZWxldmF0ZWRcIiBwYWRkaW5nPVwibWRcIiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXSBtYi00XCI+Q3VycmVudCBTdWJzY3JpcHRpb248L2gyPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV1cIj5QbGFuPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV1cIj57cGxhbk5hbWV9IFBsYW48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXNlY29uZGFyeSldXCI+Q3VycmVudCBQcmljZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRQcmljZShzdWJzY3JpcHRpb24uY3VycmVudFByaWNlKX0ve3BlcmlvZExhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3Vic2NyaXB0aW9uLmhhc1JldGVudGlvbkRpc2NvdW50ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXN1Y2Nlc3MpXSB0ZXh0LXNtIG1sLTJcIj4oMzAlIG9mZik8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXVwiPk5leHQgQmlsbGluZyBEYXRlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV1cIj57Zm9ybWF0RGF0ZShzdWJzY3JpcHRpb24uY3VycmVudFBlcmlvZEVuZCl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c3Vic2NyaXB0aW9uLmNhbmNlbEF0UGVyaW9kRW5kICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZCB2YXJpYW50PVwiYWNjZW50XCIgcGFkZGluZz1cInNtXCIgY2xhc3NOYW1lPVwiYm9yZGVyLWwtNCBib3JkZXItW3ZhcigtLWNvbG9yLXdhcm5pbmcpXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXSB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYS1zb2xpZCBmYS1leGNsYW1hdGlvbi10cmlhbmdsZSBtci0yXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBzdWJzY3JpcHRpb24gd2lsbCBlbmQgb24ge2Zvcm1hdERhdGUoc3Vic2NyaXB0aW9uLmN1cnJlbnRQZXJpb2RFbmQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9DYXJkPlxuXG4gICAgICAgICAgICAgICAgey8qIFJldGVudGlvbiBPZmZlcnMgLSBPbmx5IHNob3cgd2hlbiB1c2VyIGNsaWNrcyBDYW5jZWwgKi99XG4gICAgICAgICAgICAgICAge3Nob3dDYW5jZWxsYXRpb25GbG93ICYmICFzdWJzY3JpcHRpb24uaGFzUmV0ZW50aW9uRGlzY291bnQgJiYgIXN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogMzAlIERpc2NvdW50IE9mZmVyICovfVxuICAgICAgICAgICAgICAgICAgICA8Q2FyZCB2YXJpYW50PVwiYWNjZW50XCIgcGFkZGluZz1cImxnXCIgY2xhc3NOYW1lPVwibWItNiBib3JkZXItMiBib3JkZXItW3ZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgYmctW3ZhcigtLWNvbG9yLXByaW1hcnkpXSB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1ib2xkIHB4LTMgcHktMSByb3VuZGVkLWZ1bGwgdXBwZXJjYXNlIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BlY2lhbCBPZmZlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXSBtYi0yXCI+U3RheSB3aXRoIHVzIGZvciAzMCUgb2ZmITwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXSBtYi00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlJ2QgbG92ZSB0byBrZWVwIHlvdSBhcyBhIG1lbWJlci4gQWNjZXB0IHRoaXMgb2ZmZXIgYW5kIHBheSBvbmx5eycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtW3ZhcigtLWNvbG9yLXByaW1hcnktZGFyayldXCI+e2Zvcm1hdFByaWNlKGRpc2NvdW50ZWRQcmljZSEpfTwvc3Bhbj4gcGVyIHtwZXJpb2RMYWJlbH0gaW5zdGVhZCBvZnsnICd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImxpbmUtdGhyb3VnaCB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LW11dGVkKV1cIj57Zm9ybWF0UHJpY2Uoc3Vic2NyaXB0aW9uLm9yaWdpbmFsUHJpY2UpfTwvc3Bhbj4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkIHZhcmlhbnQ9XCJkZWZhdWx0XCIgcGFkZGluZz1cIm1kXCIgY2xhc3NOYW1lPVwibWItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXVwiPk9yaWdpbmFsIFByaWNlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LWJvbGQgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV1cIj57Zm9ybWF0UHJpY2Uoc3Vic2NyaXB0aW9uLm9yaWdpbmFsUHJpY2UpfS97cGVyaW9kTGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXVwiPllvdXIgTmV3IFByaWNlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1leHRyYWJvbGQgdGV4dC1bdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrKV1cIj57Zm9ybWF0UHJpY2UoZGlzY291bnRlZFByaWNlISl9L3twZXJpb2RMYWJlbH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG10LTMgdGV4dC1zbSB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LW11dGVkKV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNhdmUge2Zvcm1hdFByaWNlKHN1YnNjcmlwdGlvbi5vcmlnaW5hbFByaWNlIC0gZGlzY291bnRlZFByaWNlISl9IHBlciB7cGVyaW9kTGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBBbm51YWwgVXBncmFkZSBPZmZlciAtIE9ubHkgZm9yIG1vbnRobHkgc3Vic2NyaWJlcnMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkZXRlY3RlZFBsYW4gPT09ICdtb250aGx5JyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhcmQgdmFyaWFudD1cImFjY2VudFwiIHBhZGRpbmc9XCJsZ1wiIGNsYXNzTmFtZT1cIm1iLTYgYm9yZGVyLTIgYm9yZGVyLVt2YXIoLS1jb2xvci1zdWNjZXNzLWxpZ2h0KV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrIGJnLVt2YXIoLS1jb2xvci1zdWNjZXNzKV0gdGV4dC13aGl0ZSB0ZXh0LXhzIGZvbnQtYm9sZCBweC0zIHB5LTEgcm91bmRlZC1mdWxsIHVwcGVyY2FzZSBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2F2ZSBNb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIG1iLTJcIj5Td2l0Y2ggdG8gQW5udWFsIEJpbGxpbmc8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXNlY29uZGFyeSldIHRleHQtc20gbWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbmdlIHRvIGFubnVhbCBiaWxsaW5nIHRvIHNhdmUgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtW3ZhcigtLWNvbG9yLXN1Y2Nlc3MpXVwiPiR7KHN1YnNjcmlwdGlvbi5vcmlnaW5hbFByaWNlICogMTIgLSA5OS45OSkudG9GaXhlZCgyKX0veWVhcjwvc3Bhbj4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBjaGFuZ2UgdGFrZXMgZWZmZWN0IGF0IHRoZSBlbmQgb2YgeW91ciBjdXJyZW50IG1vbnRoLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbmNlbFN1YnNjcmlwdGlvblZpZXddIEFubnVhbCB1cGdyYWRlIGNsaWNrZWQgaW4gY2FuY2VsbGF0aW9uIGZsb3cnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVVcGdyYWRlVG9Bbm51YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dXBncmFkZUxvYWRpbmcgfHwgYWN0aW9uTG9hZGluZyAhPT0gbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJzdWNjZXNzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxXaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17dXBncmFkZUxvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtYi00ICF0ZXh0LWJsYWNrICFib3JkZXItMiAhYm9yZGVyLWJsYWNrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dpdGNoIHRvIEFubnVhbCAmIFNhdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhcmQgdmFyaWFudD1cImRlZmF1bHRcIiBwYWRkaW5nPVwic21cIiBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXVwiPk1vbnRobHkgKGN1cnJlbnQpPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV1cIj57Zm9ybWF0UHJpY2Uoc3Vic2NyaXB0aW9uLm9yaWdpbmFsUHJpY2UpfS9tb250aDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbXQtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bdmFyKC0tY29sb3ItdGV4dC1zZWNvbmRhcnkpXVwiPkFubnVhbCAodXBncmFkZSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LVt2YXIoLS1jb2xvci1zdWNjZXNzKV1cIj4kOTkuOTkveWVhcjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICB7LyogQWN0aW9uIEJ1dHRvbnMgKi99XG4gICAgICAgICAgICAgICAgeyFzdWJzY3JpcHRpb24uaGFzUmV0ZW50aW9uRGlzY291bnQgJiYgIXN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IXNob3dDYW5jZWxsYXRpb25GbG93ID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWwgdmlldyAtIFNob3cgQ2FuY2VsIGJ1dHRvbiBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0NhbmNlbGxhdGlvbkZsb3codHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiBweC00IHB5LTIgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1bdmFyKC0tY29sb3ItbmV1dHJhbC0zMDApXSByb3VuZGVkLWxnIHNoYWRvdy1tZCBob3ZlcjpiZy1bdmFyKC0tY29sb3ItYmctYWNjZW50KV0gaG92ZXI6c2hhZG93LWxnIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctW3ZhcigtLWNvbG9yLXByaW1hcnkpXSBmb2N1czpyaW5nLW9mZnNldC0yIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIGZvbnQtc2VtaWJvbGQgdGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsIFN1YnNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFja0J1dHRvbiBvbkNsaWNrPXtvbkJhY2t9IGxhYmVsPVwiR28gQmFjayB0byBTZXR0aW5nc1wiIGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LWNlbnRlclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW5jZWxsYXRpb24gZmxvdyAtIFNob3cgcmV0ZW50aW9uIG9mZmVyIGJ1dHRvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBY2NlcHRPZmZlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXthY3Rpb25Mb2FkaW5nICE9PSBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXthY3Rpb25Mb2FkaW5nID09PSAnYWNjZXB0J31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgS2VlcCBNeSBTdWJzY3JpcHRpb24gKDMwJSBPZmYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDYW5jZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17YWN0aW9uTG9hZGluZyAhPT0gbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXthY3Rpb25Mb2FkaW5nID09PSAnY2FuY2VsJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsIEFueXdheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICB7c3Vic2NyaXB0aW9uLmNhbmNlbEF0UGVyaW9kRW5kICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBzdWJzY3JpcHRpb24gaXMgc2NoZWR1bGVkIHRvIGNhbmNlbCBvbiB7Zm9ybWF0RGF0ZShzdWJzY3JpcHRpb24uY3VycmVudFBlcmlvZEVuZCl9LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXN0b3JlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17YWN0aW9uTG9hZGluZyAhPT0gbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiBweC00IHB5LTIgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1bdmFyKC0tY29sb3ItbmV1dHJhbC0zMDApXSByb3VuZGVkLWxnIHNoYWRvdy1tZCBob3ZlcjpiZy1bdmFyKC0tY29sb3ItYmctYWNjZW50KV0gaG92ZXI6c2hhZG93LWxnIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctW3ZhcigtLWNvbG9yLXByaW1hcnkpXSBmb2N1czpyaW5nLW9mZnNldC0yIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIGZvbnQtc2VtaWJvbGQgdGV4dC1zbSBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpb25Mb2FkaW5nID09PSAncmVzdG9yZScgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy01IGgtNSBib3JkZXItMiBib3JkZXItY3VycmVudCBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5SZXN0b3JpbmcuLi48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtcm90YXRlLWxlZnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+UmVzdG9yZSBQdXJjaGFzZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWNrQnV0dG9uIG9uQ2xpY2s9e29uQmFja30gbGFiZWw9XCJHbyBCYWNrIHRvIFNldHRpbmdzXCIgY2xhc3NOYW1lPVwidy1mdWxsIGp1c3RpZnktY2VudGVyXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAge3N1YnNjcmlwdGlvbi5oYXNSZXRlbnRpb25EaXNjb3VudCAmJiAhc3Vic2NyaXB0aW9uLmNhbmNlbEF0UGVyaW9kRW5kICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91J3JlIGFscmVhZHkgZW5qb3lpbmcgdGhlIDMwJSBkaXNjb3VudCEgWW91ciBzdWJzY3JpcHRpb24gd2lsbCBjb250aW51ZSBhdCB0aGUgZGlzY291bnRlZCByYXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDYW5jZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXthY3Rpb25Mb2FkaW5nICE9PSBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHB4LTQgcHktMiBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLVt2YXIoLS1jb2xvci1uZXV0cmFsLTMwMCldIHJvdW5kZWQtbGcgc2hhZG93LW1kIGhvdmVyOmJnLVt2YXIoLS1jb2xvci1iZy1hY2NlbnQpXSBob3ZlcjpzaGFkb3ctbGcgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1bdmFyKC0tY29sb3ItcHJpbWFyeSldIGZvY3VzOnJpbmctb2Zmc2V0LTIgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV0gZm9udC1zZW1pYm9sZCB0ZXh0LXNtIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGlvbkxvYWRpbmcgPT09ICdjYW5jZWwnID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNSBoLTUgYm9yZGVyLTIgYm9yZGVyLWN1cnJlbnQgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Q2FuY2VsbGluZy4uLjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Q2FuY2VsIFN1YnNjcmlwdGlvbjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFja0J1dHRvbiBvbkNsaWNrPXtvbkJhY2t9IGxhYmVsPVwiR28gQmFjayB0byBTZXR0aW5nc1wiIGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LWNlbnRlclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FuY2VsU3Vic2NyaXB0aW9uVmlldztcblxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJVc2VyVGllciIsImdldFVzZXJTdWJzY3JpcHRpb24iLCJjYW5jZWxTdWJzY3JpcHRpb24iLCJyZXN0b3JlU3Vic2NyaXB0aW9uIiwiY3JlYXRlTW9ja1N1YnNjcmlwdGlvbiIsInVwZ3JhZGVUb0FubnVhbCIsIkJ1dHRvbiIsIkJhY2tCdXR0b24iLCJDYXJkIiwidXNlVG9hc3QiLCJDYW5jZWxTdWJzY3JpcHRpb25WaWV3IiwidXNlciIsInVzZXJUaWVyIiwib25CYWNrIiwib25UaWVyVXBkYXRlZCIsInN1YnNjcmlwdGlvbiIsInNldFN1YnNjcmlwdGlvbiIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiYWN0aW9uTG9hZGluZyIsInNldEFjdGlvbkxvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwic3VjY2VzcyIsInNldFN1Y2Nlc3MiLCJwcmVtaXVtVGllck1pc21hdGNoIiwic2V0UHJlbWl1bVRpZXJNaXNtYXRjaCIsInVwZ3JhZGVMb2FkaW5nIiwic2V0VXBncmFkZUxvYWRpbmciLCJzaG93Q2FuY2VsbGF0aW9uRmxvdyIsInNldFNob3dDYW5jZWxsYXRpb25GbG93IiwidG9hc3RzIiwic2hvd1RvYXN0IiwicmVtb3ZlVG9hc3QiLCJUb2FzdENvbnRhaW5lciIsImxvYWRTdWJzY3JpcHRpb24iLCJpZCIsInN1YiIsImNvbnNvbGUiLCJsb2ciLCJwbGFuIiwib3JpZ2luYWxQcmljZSIsImN1cnJlbnRQcmljZSIsInBlcmlvZExhYmVsIiwiaGFzUmV0ZW50aW9uRGlzY291bnQiLCJlcnIiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIm1lc3NhZ2UiLCJkaXNwbGF5RXJyb3IiLCJpbmNsdWRlcyIsImhhbmRsZUFjY2VwdE9mZmVyIiwic2V0VGltZW91dCIsImhhbmRsZUNhbmNlbCIsImNvbmZpcm0iLCJyZXN1bHQiLCJEYXRlIiwiY3VycmVudFBlcmlvZEVuZCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImhhbmRsZVJlc3RvcmUiLCJoYW5kbGVVcGdyYWRlVG9Bbm51YWwiLCJkaXNwbGF5TWVzc2FnZSIsImZvcm1hdE1vY2tDcmVhdGlvbkVycm9yIiwiYmFzZU1lc3NhZ2UiLCJ0ZXN0IiwiaGFuZGxlQ3JlYXRlTW9ja1N1YnNjcmlwdGlvbiIsImZvcm1hdFByaWNlIiwicHJpY2UiLCJ0b0ZpeGVkIiwiZm9ybWF0RGF0ZSIsImRhdGVTdHJpbmciLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJjYWxjdWxhdGVEaXNjb3VudGVkUHJpY2UiLCJkaXNjb3VudEFtb3VudCIsImRpdiIsImNsYXNzTmFtZSIsInAiLCJ2YXJpYW50IiwicGFkZGluZyIsImkiLCJhcmlhLWhpZGRlbiIsImgxIiwic3Ryb25nIiwiY29kZSIsIm9uQ2xpY2siLCJsYWJlbCIsIlByZW1pdW0iLCJzaXplIiwiZGlzY291bnRlZFByaWNlIiwiZGV0ZWN0ZWRQbGFuIiwid2FybiIsInBsYW5OYW1lIiwiaXNMaWtlbHlBbm51YWwiLCJpc0xpa2VseU1vbnRobHkiLCJleHBlY3RlZFJhbmdlIiwib25SZW1vdmUiLCJoMiIsInNwYW4iLCJjYW5jZWxBdFBlcmlvZEVuZCIsImgzIiwiYnIiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNhYmxlZCIsImZ1bGxXaWR0aCIsImJ1dHRvbiIsInR5cGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/views/CancelSubscriptionView.tsx\n");

/***/ }),

/***/ "(ssr)/./services/stripeService.ts":
/*!***********************************!*\
  !*** ./services/stripeService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyRetentionDiscount: () => (/* binding */ applyRetentionDiscount),\n/* harmony export */   cancelSubscription: () => (/* binding */ cancelSubscription),\n/* harmony export */   createBillingPortalSession: () => (/* binding */ createBillingPortalSession),\n/* harmony export */   createCheckoutSession: () => (/* binding */ createCheckoutSession),\n/* harmony export */   createMockSubscription: () => (/* binding */ createMockSubscription),\n/* harmony export */   getUserSubscription: () => (/* binding */ getUserSubscription),\n/* harmony export */   redirectToCheckout: () => (/* binding */ redirectToCheckout),\n/* harmony export */   restoreSubscription: () => (/* binding */ restoreSubscription),\n/* harmony export */   upgradeToAnnual: () => (/* binding */ upgradeToAnnual)\n/* harmony export */ });\n/* harmony import */ var _stripe_stripe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stripe/stripe-js */ \"(ssr)/./node_modules/@stripe/stripe-js/lib/index.mjs\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(ssr)/./lib/supabase.ts\");\n/* harmony import */ var _utils_sessionManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/sessionManager */ \"(ssr)/./utils/sessionManager.ts\");\n\n\n\n// Get Stripe publishable key from environment\nconst getStripePublishableKey = ()=>{\n    const key = \"pk_test_51SQyUERi2fT4iEDsht3iyOUKPtnTgjMArwyt01St3yYJnMRIbyTVox4swh6WyJ7CNPV4y5C6QRKAhNqFCFJDPwHn007DAju5WZ\";\n    if (!key) {\n        throw new Error('NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY is not set in environment variables');\n    }\n    return key;\n};\n// Initialize Stripe\nlet stripePromise = null;\nconst getStripe = ()=>{\n    if (!stripePromise) {\n        stripePromise = (0,_stripe_stripe_js__WEBPACK_IMPORTED_MODULE_0__.loadStripe)(getStripePublishableKey());\n    }\n    return stripePromise;\n};\n/**\n * Get the Supabase Functions URL from environment\n * Uses VITE_SUPABASE_URL to construct the functions URL\n */ const getFunctionsUrl = ()=>{\n    // First check for explicit functions URL\n    const functionsUrl = process.env.NEXT_PUBLIC_SUPABASE_FUNCTIONS_URL;\n    if (functionsUrl) {\n        return functionsUrl;\n    }\n    // Fall back to constructing from Supabase URL\n    const supabaseUrl = \"https://alszwgqoicjgfrhecscj.supabase.co\";\n    if (!supabaseUrl) {\n        throw new Error('NEXT_PUBLIC_SUPABASE_URL is not set. Cannot determine Edge Functions URL.');\n    }\n    // Convert https://xxx.supabase.co to https://xxx.supabase.co/functions/v1\n    return `${supabaseUrl}/functions/v1`;\n};\n/**\n * Get user's JWT token from Supabase session\n * Throws error if no session exists (user must be logged in)\n */ const getAuthToken = async ()=>{\n    if (!(0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.isSupabaseConfigured)()) {\n        throw new Error('Supabase is not configured. Please check your environment variables.');\n    }\n    // Use sessionManager utility which handles token refresh automatically\n    const token = await (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_2__.getValidAuthToken)();\n    if (!token) {\n        throw new Error('You must be logged in to perform this action. Please log in and try again.');\n    }\n    return token;\n};\n/**\n * Make a request to a Supabase Edge Function\n * Requires user authentication (JWT token)\n */ const callEdgeFunction = async (functionName, options = {})=>{\n    const { method = 'POST', body, params } = options;\n    const functionsUrl = getFunctionsUrl();\n    // Get user's JWT token (requires authentication)\n    let authToken;\n    try {\n        authToken = await getAuthToken();\n    } catch (error) {\n        // Re-throw with clear error message\n        if (error instanceof Error) {\n            throw error;\n        }\n        throw new Error('Authentication failed. Please log in and try again.');\n    }\n    let url = `${functionsUrl}/${functionName}`;\n    // Add query params for GET requests\n    if (params && Object.keys(params).length > 0) {\n        const searchParams = new URLSearchParams(params);\n        url += `?${searchParams.toString()}`;\n    }\n    const fetchOptions = {\n        method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${authToken}`\n        }\n    };\n    if (body && method === 'POST') {\n        fetchOptions.body = JSON.stringify(body);\n    }\n    return fetch(url, fetchOptions);\n};\n/**\n * Create a Stripe Checkout Session via Supabase Edge Function\n */ const createCheckoutSession = async (userId, plan, email)=>{\n    const body = {\n        userId,\n        plan\n    };\n    if (email) {\n        body.email = email;\n    }\n    const response = await callEdgeFunction('create-checkout-session', {\n        method: 'POST',\n        body\n    });\n    if (!response.ok) {\n        const errorData = await response.json().catch(()=>({\n                error: 'Failed to create checkout session'\n            }));\n        const errorMessage = errorData.error || errorData.message || 'Failed to create checkout session';\n        throw new Error(errorMessage);\n    }\n    return await response.json();\n};\n/**\n * Redirect user to Stripe Checkout\n */ const redirectToCheckout = async (userId, plan, email)=>{\n    try {\n        console.log('[stripeService] Creating checkout session for user:', userId, 'plan:', plan, 'email:', email);\n        const { sessionId, url } = await createCheckoutSession(userId, plan, email);\n        if (url) {\n            // Redirect to Stripe Checkout\n            window.location.href = url;\n        } else {\n            // Fallback: use Stripe.js redirect\n            const stripe = await getStripe();\n            const { error } = await stripe.redirectToCheckout({\n                sessionId\n            });\n            if (error) {\n                throw new Error(error.message || 'Failed to redirect to checkout');\n            }\n        }\n    } catch (error) {\n        console.error('[stripeService] Checkout error:', error);\n        throw error;\n    }\n};\n/**\n * Get user's subscription details\n * Returns null if no subscription is found (404), throws error for other failures\n */ const getUserSubscription = async (userId)=>{\n    const response = await callEdgeFunction('get-subscription', {\n        method: 'GET',\n        params: {\n            userId\n        }\n    });\n    if (!response.ok) {\n        // Handle 404 (no subscription found)\n        if (response.status === 404) {\n            // Check if the response includes premium tier info\n            const errorData = await response.json().catch(()=>({}));\n            if (errorData.hasPremiumTier) {\n                // Return a special object to indicate premium tier mismatch\n                return {\n                    _premiumTierMismatch: true,\n                    error: errorData.error || 'No subscription found'\n                };\n            }\n            return null;\n        }\n        // For other errors, parse and throw with proper error message\n        const errorData = await response.json().catch(()=>({\n                error: 'Failed to get subscription'\n            }));\n        const errorMessage = errorData.error || errorData.message || 'Failed to get subscription';\n        throw new Error(errorMessage);\n    }\n    return await response.json();\n};\n/**\n * Cancel subscription with retention offer option\n */ const cancelSubscription = async (userId, acceptOffer)=>{\n    const response = await callEdgeFunction('cancel-subscription', {\n        method: 'POST',\n        body: {\n            userId,\n            action: acceptOffer ? 'accept_offer' : 'cancel'\n        }\n    });\n    if (!response.ok) {\n        const errorData = await response.json().catch(()=>({\n                error: 'Failed to cancel subscription'\n            }));\n        const errorMessage = errorData.error || errorData.message || 'Failed to cancel subscription';\n        throw new Error(errorMessage);\n    }\n    return await response.json();\n};\n/**\n * Apply retention discount to subscription\n */ const applyRetentionDiscount = async (userId)=>{\n    const response = await callEdgeFunction('apply-retention-discount', {\n        method: 'POST',\n        body: {\n            userId\n        }\n    });\n    if (!response.ok) {\n        const errorData = await response.json().catch(()=>({\n                error: 'Failed to apply retention discount'\n            }));\n        const errorMessage = errorData.error || errorData.message || 'Failed to apply retention discount';\n        throw new Error(errorMessage);\n    }\n    return await response.json();\n};\n/**\n * Restore a cancelled subscription\n */ const restoreSubscription = async (userId)=>{\n    const response = await callEdgeFunction('restore-subscription', {\n        method: 'POST',\n        body: {\n            userId\n        }\n    });\n    if (!response.ok) {\n        const errorData = await response.json().catch(()=>({\n                error: 'Failed to restore subscription'\n            }));\n        const errorMessage = errorData.error || errorData.message || 'Failed to restore subscription';\n        throw new Error(errorMessage);\n    }\n    return await response.json();\n};\n/**\n * Upgrade subscription from monthly to annual\n */ const upgradeToAnnual = async (userId)=>{\n    console.log('[stripeService] upgradeToAnnual called for user:', userId);\n    try {\n        const response = await callEdgeFunction('upgrade-subscription', {\n            method: 'POST',\n            body: {\n                userId\n            }\n        });\n        console.log('[stripeService] upgradeToAnnual response status:', response.status, response.statusText);\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>{\n                console.error('[stripeService] Failed to parse error response');\n                return {\n                    error: `Failed to upgrade subscription (${response.status} ${response.statusText})`\n                };\n            });\n            const errorMessage = errorData.error || errorData.message || `Failed to upgrade subscription (${response.status})`;\n            console.error('[stripeService] upgradeToAnnual error:', errorMessage, errorData);\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log('[stripeService] upgradeToAnnual success:', result);\n        return result;\n    } catch (error) {\n        console.error('[stripeService] upgradeToAnnual exception:', error);\n        if (error instanceof Error) {\n            throw error;\n        }\n        throw new Error('Failed to upgrade subscription');\n    }\n};\n/**\n * Create a Stripe Customer Portal session for managing billing\n */ const createBillingPortalSession = async (userId, returnUrl)=>{\n    console.log('[stripeService] createBillingPortalSession called for user:', userId);\n    try {\n        const body = {\n            userId\n        };\n        if (returnUrl) {\n            body.returnUrl = returnUrl;\n        }\n        const response = await callEdgeFunction('create-billing-portal-session', {\n            method: 'POST',\n            body\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({\n                    error: 'Failed to create billing portal session'\n                }));\n            const errorMessage = errorData.error || errorData.message || 'Failed to create billing portal session';\n            throw new Error(errorMessage);\n        }\n        const data = await response.json();\n        if (!data.url) {\n            throw new Error('No portal URL returned from server');\n        }\n        console.log('[stripeService] Billing portal session created successfully');\n        return data.url;\n    } catch (error) {\n        console.error('[stripeService] createBillingPortalSession error:', error);\n        throw error;\n    }\n};\n/**\n * Create a mock subscription (development only)\n * Note: This functionality is no longer supported with Edge Functions.\n * Use real Stripe test mode instead.\n */ const createMockSubscription = async (_userId, _plan)=>{\n    throw new Error('Mock subscriptions are not supported with Edge Functions. ' + 'Please use Stripe test mode with test card numbers instead.');\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlsQixNQUFNO1FBQ3BCO1FBRUEwQyxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPb0IsS0FBSzdDLEdBQUc7SUFDbkIsRUFBRSxPQUFPRCxPQUFPO1FBQ1p5QixRQUFRekIsS0FBSyxDQUFDLHFEQUFxREE7UUFDbkUsTUFBTUE7SUFDVjtBQUNKLEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTStDLHlCQUF5QixPQUFPQyxTQUFpQkM7SUFDMUQsTUFBTSxJQUFJbEUsTUFDTiwrREFDQTtBQUVSLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXZpL2Rldi9NYWluMk1JL3NlcnZpY2VzL3N0cmlwZVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9hZFN0cmlwZSB9IGZyb20gJ0BzdHJpcGUvc3RyaXBlLWpzJztcbmltcG9ydCB7IGlzU3VwYWJhc2VDb25maWd1cmVkIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuaW1wb3J0IHsgZ2V0VmFsaWRBdXRoVG9rZW4gfSBmcm9tICdAL3V0aWxzL3Nlc3Npb25NYW5hZ2VyJztcblxuLy8gR2V0IFN0cmlwZSBwdWJsaXNoYWJsZSBrZXkgZnJvbSBlbnZpcm9ubWVudFxuY29uc3QgZ2V0U3RyaXBlUHVibGlzaGFibGVLZXkgPSAoKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZO1xuICAgIGlmICgha2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSBpcyBub3Qgc2V0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xufTtcblxuLy8gSW5pdGlhbGl6ZSBTdHJpcGVcbmxldCBzdHJpcGVQcm9taXNlOiBQcm9taXNlPGFueT4gfCBudWxsID0gbnVsbDtcbmNvbnN0IGdldFN0cmlwZSA9ICgpID0+IHtcbiAgICBpZiAoIXN0cmlwZVByb21pc2UpIHtcbiAgICAgICAgc3RyaXBlUHJvbWlzZSA9IGxvYWRTdHJpcGUoZ2V0U3RyaXBlUHVibGlzaGFibGVLZXkoKSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpcGVQcm9taXNlO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIFN1cGFiYXNlIEZ1bmN0aW9ucyBVUkwgZnJvbSBlbnZpcm9ubWVudFxuICogVXNlcyBWSVRFX1NVUEFCQVNFX1VSTCB0byBjb25zdHJ1Y3QgdGhlIGZ1bmN0aW9ucyBVUkxcbiAqL1xuY29uc3QgZ2V0RnVuY3Rpb25zVXJsID0gKCk6IHN0cmluZyA9PiB7XG4gICAgLy8gRmlyc3QgY2hlY2sgZm9yIGV4cGxpY2l0IGZ1bmN0aW9ucyBVUkxcbiAgICBjb25zdCBmdW5jdGlvbnNVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9GVU5DVElPTlNfVVJMO1xuICAgIGlmIChmdW5jdGlvbnNVcmwpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uc1VybDtcbiAgICB9XG5cbiAgICAvLyBGYWxsIGJhY2sgdG8gY29uc3RydWN0aW5nIGZyb20gU3VwYWJhc2UgVVJMXG4gICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gICAgaWYgKCFzdXBhYmFzZVVybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBpcyBub3Qgc2V0LiBDYW5ub3QgZGV0ZXJtaW5lIEVkZ2UgRnVuY3Rpb25zIFVSTC4nKTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IGh0dHBzOi8veHh4LnN1cGFiYXNlLmNvIHRvIGh0dHBzOi8veHh4LnN1cGFiYXNlLmNvL2Z1bmN0aW9ucy92MVxuICAgIHJldHVybiBgJHtzdXBhYmFzZVVybH0vZnVuY3Rpb25zL3YxYDtcbn07XG5cbi8qKlxuICogR2V0IHVzZXIncyBKV1QgdG9rZW4gZnJvbSBTdXBhYmFzZSBzZXNzaW9uXG4gKiBUaHJvd3MgZXJyb3IgaWYgbm8gc2Vzc2lvbiBleGlzdHMgKHVzZXIgbXVzdCBiZSBsb2dnZWQgaW4pXG4gKi9cbmNvbnN0IGdldEF1dGhUb2tlbiA9IGFzeW5jICgpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGlmICghaXNTdXBhYmFzZUNvbmZpZ3VyZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY2hlY2sgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XG4gICAgfVxuXG4gICAgLy8gVXNlIHNlc3Npb25NYW5hZ2VyIHV0aWxpdHkgd2hpY2ggaGFuZGxlcyB0b2tlbiByZWZyZXNoIGF1dG9tYXRpY2FsbHlcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFZhbGlkQXV0aFRva2VuKCk7XG4gICAgXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IGJlIGxvZ2dlZCBpbiB0byBwZXJmb3JtIHRoaXMgYWN0aW9uLiBQbGVhc2UgbG9nIGluIGFuZCB0cnkgYWdhaW4uJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuO1xufTtcblxuLyoqXG4gKiBNYWtlIGEgcmVxdWVzdCB0byBhIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25cbiAqIFJlcXVpcmVzIHVzZXIgYXV0aGVudGljYXRpb24gKEpXVCB0b2tlbilcbiAqL1xuY29uc3QgY2FsbEVkZ2VGdW5jdGlvbiA9IGFzeW5jIChcbiAgICBmdW5jdGlvbk5hbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7XG4gICAgICAgIG1ldGhvZD86ICdHRVQnIHwgJ1BPU1QnO1xuICAgICAgICBib2R5PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICAgIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgfSA9IHt9XG4pOiBQcm9taXNlPFJlc3BvbnNlPiA9PiB7XG4gICAgY29uc3QgeyBtZXRob2QgPSAnUE9TVCcsIGJvZHksIHBhcmFtcyB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBmdW5jdGlvbnNVcmwgPSBnZXRGdW5jdGlvbnNVcmwoKTtcblxuICAgIC8vIEdldCB1c2VyJ3MgSldUIHRva2VuIChyZXF1aXJlcyBhdXRoZW50aWNhdGlvbilcbiAgICBsZXQgYXV0aFRva2VuOiBzdHJpbmc7XG4gICAgdHJ5IHtcbiAgICAgICAgYXV0aFRva2VuID0gYXdhaXQgZ2V0QXV0aFRva2VuKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gUmUtdGhyb3cgd2l0aCBjbGVhciBlcnJvciBtZXNzYWdlXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIGxvZyBpbiBhbmQgdHJ5IGFnYWluLicpO1xuICAgIH1cblxuICAgIGxldCB1cmwgPSBgJHtmdW5jdGlvbnNVcmx9LyR7ZnVuY3Rpb25OYW1lfWA7XG4gICAgXG4gICAgLy8gQWRkIHF1ZXJ5IHBhcmFtcyBmb3IgR0VUIHJlcXVlc3RzXG4gICAgaWYgKHBhcmFtcyAmJiBPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpO1xuICAgICAgICB1cmwgKz0gYD8ke3NlYXJjaFBhcmFtcy50b1N0cmluZygpfWA7XG4gICAgfVxuXG4gICAgY29uc3QgZmV0Y2hPcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAsXG4gICAgICAgIH0sXG4gICAgfTtcblxuICAgIGlmIChib2R5ICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAgIGZldGNoT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZldGNoKHVybCwgZmV0Y2hPcHRpb25zKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgU3RyaXBlIENoZWNrb3V0IFNlc3Npb24gdmlhIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbiA9IGFzeW5jIChcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBwbGFuOiAnbW9udGhseScgfCAnYW5udWFsJyxcbiAgICBlbWFpbD86IHN0cmluZ1xuKTogUHJvbWlzZTx7IHNlc3Npb25JZDogc3RyaW5nOyB1cmw6IHN0cmluZyB9PiA9PiB7XG4gICAgY29uc3QgYm9keTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7IHVzZXJJZCwgcGxhbiB9O1xuICAgIGlmIChlbWFpbCkge1xuICAgICAgICBib2R5LmVtYWlsID0gZW1haWw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsRWRnZUZ1bmN0aW9uKCdjcmVhdGUtY2hlY2tvdXQtc2Vzc2lvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY2hlY2tvdXQgc2Vzc2lvbicgfSkpO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGEuZXJyb3IgfHwgZXJyb3JEYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBjcmVhdGUgY2hlY2tvdXQgc2Vzc2lvbic7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG59O1xuXG4vKipcbiAqIFJlZGlyZWN0IHVzZXIgdG8gU3RyaXBlIENoZWNrb3V0XG4gKi9cbmV4cG9ydCBjb25zdCByZWRpcmVjdFRvQ2hlY2tvdXQgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIHBsYW46ICdtb250aGx5JyB8ICdhbm51YWwnLCBlbWFpbD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbc3RyaXBlU2VydmljZV0gQ3JlYXRpbmcgY2hlY2tvdXQgc2Vzc2lvbiBmb3IgdXNlcjonLCB1c2VySWQsICdwbGFuOicsIHBsYW4sICdlbWFpbDonLCBlbWFpbCk7XG5cbiAgICAgICAgY29uc3QgeyBzZXNzaW9uSWQsIHVybCB9ID0gYXdhaXQgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKHVzZXJJZCwgcGxhbiwgZW1haWwpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gU3RyaXBlIENoZWNrb3V0XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiB1c2UgU3RyaXBlLmpzIHJlZGlyZWN0XG4gICAgICAgICAgICBjb25zdCBzdHJpcGUgPSBhd2FpdCBnZXRTdHJpcGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN0cmlwZSEucmVkaXJlY3RUb0NoZWNrb3V0KHsgc2Vzc2lvbklkIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHJlZGlyZWN0IHRvIGNoZWNrb3V0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbc3RyaXBlU2VydmljZV0gQ2hlY2tvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuXG4vKipcbiAqIEdldCB1c2VyJ3Mgc3Vic2NyaXB0aW9uIGRldGFpbHNcbiAqIFJldHVybnMgbnVsbCBpZiBubyBzdWJzY3JpcHRpb24gaXMgZm91bmQgKDQwNCksIHRocm93cyBlcnJvciBmb3Igb3RoZXIgZmFpbHVyZXNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFVzZXJTdWJzY3JpcHRpb24gPSBhc3luYyAodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueSB8IG51bGw+ID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhbGxFZGdlRnVuY3Rpb24oJ2dldC1zdWJzY3JpcHRpb24nLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhcmFtczogeyB1c2VySWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgLy8gSGFuZGxlIDQwNCAobm8gc3Vic2NyaXB0aW9uIGZvdW5kKVxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXNwb25zZSBpbmNsdWRlcyBwcmVtaXVtIHRpZXIgaW5mb1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgICAgICAgaWYgKGVycm9yRGF0YS5oYXNQcmVtaXVtVGllcikge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiBhIHNwZWNpYWwgb2JqZWN0IHRvIGluZGljYXRlIHByZW1pdW0gdGllciBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIHJldHVybiB7IF9wcmVtaXVtVGllck1pc21hdGNoOiB0cnVlLCBlcnJvcjogZXJyb3JEYXRhLmVycm9yIHx8ICdObyBzdWJzY3JpcHRpb24gZm91bmQnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRm9yIG90aGVyIGVycm9ycywgcGFyc2UgYW5kIHRocm93IHdpdGggcHJvcGVyIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7IGVycm9yOiAnRmFpbGVkIHRvIGdldCBzdWJzY3JpcHRpb24nIH0pKTtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhLmVycm9yIHx8IGVycm9yRGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZ2V0IHN1YnNjcmlwdGlvbic7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG59O1xuXG4vKipcbiAqIENhbmNlbCBzdWJzY3JpcHRpb24gd2l0aCByZXRlbnRpb24gb2ZmZXIgb3B0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBjYW5jZWxTdWJzY3JpcHRpb24gPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIGFjY2VwdE9mZmVyOiBib29sZWFuKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhbGxFZGdlRnVuY3Rpb24oJ2NhbmNlbC1zdWJzY3JpcHRpb24nLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBhY3Rpb246IGFjY2VwdE9mZmVyID8gJ2FjY2VwdF9vZmZlcicgOiAnY2FuY2VsJyxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7IGVycm9yOiAnRmFpbGVkIHRvIGNhbmNlbCBzdWJzY3JpcHRpb24nIH0pKTtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhLmVycm9yIHx8IGVycm9yRGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gY2FuY2VsIHN1YnNjcmlwdGlvbic7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG59O1xuXG4vKipcbiAqIEFwcGx5IHJldGVudGlvbiBkaXNjb3VudCB0byBzdWJzY3JpcHRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGFwcGx5UmV0ZW50aW9uRGlzY291bnQgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4gPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2FsbEVkZ2VGdW5jdGlvbignYXBwbHktcmV0ZW50aW9uLWRpc2NvdW50Jywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogeyB1c2VySWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7IGVycm9yOiAnRmFpbGVkIHRvIGFwcGx5IHJldGVudGlvbiBkaXNjb3VudCcgfSkpO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGEuZXJyb3IgfHwgZXJyb3JEYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBhcHBseSByZXRlbnRpb24gZGlzY291bnQnO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xufTtcblxuLyoqXG4gKiBSZXN0b3JlIGEgY2FuY2VsbGVkIHN1YnNjcmlwdGlvblxuICovXG5leHBvcnQgY29uc3QgcmVzdG9yZVN1YnNjcmlwdGlvbiA9IGFzeW5jICh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsRWRnZUZ1bmN0aW9uKCdyZXN0b3JlLXN1YnNjcmlwdGlvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IHsgdXNlcklkIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBlcnJvcjogJ0ZhaWxlZCB0byByZXN0b3JlIHN1YnNjcmlwdGlvbicgfSkpO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGEuZXJyb3IgfHwgZXJyb3JEYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byByZXN0b3JlIHN1YnNjcmlwdGlvbic7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG59O1xuXG4vKipcbiAqIFVwZ3JhZGUgc3Vic2NyaXB0aW9uIGZyb20gbW9udGhseSB0byBhbm51YWxcbiAqL1xuZXhwb3J0IGNvbnN0IHVwZ3JhZGVUb0FubnVhbCA9IGFzeW5jICh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgY29uc29sZS5sb2coJ1tzdHJpcGVTZXJ2aWNlXSB1cGdyYWRlVG9Bbm51YWwgY2FsbGVkIGZvciB1c2VyOicsIHVzZXJJZCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsRWRnZUZ1bmN0aW9uKCd1cGdyYWRlLXN1YnNjcmlwdGlvbicsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogeyB1c2VySWQgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tzdHJpcGVTZXJ2aWNlXSB1cGdyYWRlVG9Bbm51YWwgcmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbc3RyaXBlU2VydmljZV0gRmFpbGVkIHRvIHBhcnNlIGVycm9yIHJlc3BvbnNlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IGBGYWlsZWQgdG8gdXBncmFkZSBzdWJzY3JpcHRpb24gKCR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9KWAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhLmVycm9yIHx8IGVycm9yRGF0YS5tZXNzYWdlIHx8IGBGYWlsZWQgdG8gdXBncmFkZSBzdWJzY3JpcHRpb24gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3N0cmlwZVNlcnZpY2VdIHVwZ3JhZGVUb0FubnVhbCBlcnJvcjonLCBlcnJvck1lc3NhZ2UsIGVycm9yRGF0YSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tzdHJpcGVTZXJ2aWNlXSB1cGdyYWRlVG9Bbm51YWwgc3VjY2VzczonLCByZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tzdHJpcGVTZXJ2aWNlXSB1cGdyYWRlVG9Bbm51YWwgZXhjZXB0aW9uOicsIGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZ3JhZGUgc3Vic2NyaXB0aW9uJyk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBTdHJpcGUgQ3VzdG9tZXIgUG9ydGFsIHNlc3Npb24gZm9yIG1hbmFnaW5nIGJpbGxpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUJpbGxpbmdQb3J0YWxTZXNzaW9uID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nLCByZXR1cm5Vcmw/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnNvbGUubG9nKCdbc3RyaXBlU2VydmljZV0gY3JlYXRlQmlsbGluZ1BvcnRhbFNlc3Npb24gY2FsbGVkIGZvciB1c2VyOicsIHVzZXJJZCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYm9keTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7IHVzZXJJZCB9O1xuICAgICAgICBpZiAocmV0dXJuVXJsKSB7XG4gICAgICAgICAgICBib2R5LnJldHVyblVybCA9IHJldHVyblVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2FsbEVkZ2VGdW5jdGlvbignY3JlYXRlLWJpbGxpbmctcG9ydGFsLXNlc3Npb24nLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgYmlsbGluZyBwb3J0YWwgc2Vzc2lvbicgfSkpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhLmVycm9yIHx8IGVycm9yRGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gY3JlYXRlIGJpbGxpbmcgcG9ydGFsIHNlc3Npb24nO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBpZiAoIWRhdGEudXJsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHBvcnRhbCBVUkwgcmV0dXJuZWQgZnJvbSBzZXJ2ZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbc3RyaXBlU2VydmljZV0gQmlsbGluZyBwb3J0YWwgc2Vzc2lvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICByZXR1cm4gZGF0YS51cmw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW3N0cmlwZVNlcnZpY2VdIGNyZWF0ZUJpbGxpbmdQb3J0YWxTZXNzaW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBtb2NrIHN1YnNjcmlwdGlvbiAoZGV2ZWxvcG1lbnQgb25seSlcbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBubyBsb25nZXIgc3VwcG9ydGVkIHdpdGggRWRnZSBGdW5jdGlvbnMuXG4gKiBVc2UgcmVhbCBTdHJpcGUgdGVzdCBtb2RlIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVNb2NrU3Vic2NyaXB0aW9uID0gYXN5bmMgKF91c2VySWQ6IHN0cmluZywgX3BsYW46ICdtb250aGx5JyB8ICdhbm51YWwnKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdNb2NrIHN1YnNjcmlwdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBFZGdlIEZ1bmN0aW9ucy4gJyArXG4gICAgICAgICdQbGVhc2UgdXNlIFN0cmlwZSB0ZXN0IG1vZGUgd2l0aCB0ZXN0IGNhcmQgbnVtYmVycyBpbnN0ZWFkLidcbiAgICApO1xufTtcbiJdLCJuYW1lcyI6WyJsb2FkU3RyaXBlIiwiaXNTdXBhYmFzZUNvbmZpZ3VyZWQiLCJnZXRWYWxpZEF1dGhUb2tlbiIsImdldFN0cmlwZVB1Ymxpc2hhYmxlS2V5Iiwia2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVkiLCJFcnJvciIsInN0cmlwZVByb21pc2UiLCJnZXRTdHJpcGUiLCJnZXRGdW5jdGlvbnNVcmwiLCJmdW5jdGlvbnNVcmwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9GVU5DVElPTlNfVVJMIiwic3VwYWJhc2VVcmwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJnZXRBdXRoVG9rZW4iLCJ0b2tlbiIsImNhbGxFZGdlRnVuY3Rpb24iLCJmdW5jdGlvbk5hbWUiLCJvcHRpb25zIiwibWV0aG9kIiwiYm9keSIsInBhcmFtcyIsImF1dGhUb2tlbiIsImVycm9yIiwidXJsIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwiZmV0Y2hPcHRpb25zIiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaCIsImNyZWF0ZUNoZWNrb3V0U2Vzc2lvbiIsInVzZXJJZCIsInBsYW4iLCJlbWFpbCIsInJlc3BvbnNlIiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiY2F0Y2giLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwicmVkaXJlY3RUb0NoZWNrb3V0IiwiY29uc29sZSIsImxvZyIsInNlc3Npb25JZCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInN0cmlwZSIsImdldFVzZXJTdWJzY3JpcHRpb24iLCJzdGF0dXMiLCJoYXNQcmVtaXVtVGllciIsIl9wcmVtaXVtVGllck1pc21hdGNoIiwiY2FuY2VsU3Vic2NyaXB0aW9uIiwiYWNjZXB0T2ZmZXIiLCJhY3Rpb24iLCJhcHBseVJldGVudGlvbkRpc2NvdW50IiwicmVzdG9yZVN1YnNjcmlwdGlvbiIsInVwZ3JhZGVUb0FubnVhbCIsInN0YXR1c1RleHQiLCJyZXN1bHQiLCJjcmVhdGVCaWxsaW5nUG9ydGFsU2Vzc2lvbiIsInJldHVyblVybCIsImRhdGEiLCJjcmVhdGVNb2NrU3Vic2NyaXB0aW9uIiwiX3VzZXJJZCIsIl9wbGFuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./services/stripeService.ts\n");

/***/ }),

/***/ "(ssr)/./utils/sessionManager.ts":
/*!*********************************!*\
  !*** ./utils/sessionManager.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   autoSaveSession: () => (/* binding */ autoSaveSession),\n/* harmony export */   clearAutoSavedSessions: () => (/* binding */ clearAutoSavedSessions),\n/* harmony export */   getAutoSavedSession: () => (/* binding */ getAutoSavedSession),\n/* harmony export */   getValidAuthToken: () => (/* binding */ getValidAuthToken),\n/* harmony export */   isSessionValid: () => (/* binding */ isSessionValid)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(ssr)/./lib/supabase.ts\");\n/**\n * Session Management Utility\n * \n * Handles token refresh, session expiry detection, and auto-save functionality\n * to prevent data loss during long practice sessions.\n */ \nconst AUTO_SAVE_KEY_PREFIX = 'mi-practice-auto-save-';\nconst AUTO_SAVE_EXPIRY_MS = 24 * 60 * 60 * 1000; // 24 hours\n/**\n * Get a valid auth token, refreshing if necessary\n * Returns null if session is expired and cannot be refreshed\n */ async function getValidAuthToken() {\n    if (!(0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.isSupabaseConfigured)()) {\n        return null;\n    }\n    try {\n        const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.getSupabaseClient)();\n        const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n        if (sessionError || !session) {\n            return null;\n        }\n        if (!session.access_token) {\n            return null;\n        }\n        // Check if token is expired or will expire soon (within 5 minutes)\n        try {\n            const tokenParts = session.access_token.split('.');\n            if (tokenParts.length === 3) {\n                const payload = JSON.parse(atob(tokenParts[1]));\n                const now = Math.floor(Date.now() / 1000);\n                const expiresAt = payload.exp || 0;\n                const timeUntilExpiry = expiresAt - now;\n                // If expired or expires within 5 minutes, refresh\n                if (timeUntilExpiry < 300) {\n                    console.log('[sessionManager] Token expires soon, refreshing...');\n                    if (session.refresh_token) {\n                        const { data: { session: refreshedSession }, error: refreshError } = await supabase.auth.refreshSession(session);\n                        if (refreshError || !refreshedSession?.access_token) {\n                            console.error('[sessionManager] Failed to refresh session:', refreshError);\n                            return null;\n                        }\n                        console.log('[sessionManager] Session refreshed successfully');\n                        return refreshedSession.access_token;\n                    } else {\n                        console.warn('[sessionManager] No refresh token available');\n                        return null;\n                    }\n                }\n            }\n        } catch (parseError) {\n            // If we can't parse the token, use it as-is (server will validate)\n            console.warn('[sessionManager] Could not parse token, using as-is');\n        }\n        return session.access_token;\n    } catch (error) {\n        console.error('[sessionManager] Error getting auth token:', error);\n        return null;\n    }\n}\n/**\n * Check if current session is valid\n */ async function isSessionValid() {\n    const token = await getValidAuthToken();\n    return token !== null;\n}\n/**\n * Auto-save practice session data to localStorage\n */ function autoSaveSession(sessionData) {\n    try {\n        const key = `${AUTO_SAVE_KEY_PREFIX}${Date.now()}`;\n        const data = {\n            ...sessionData,\n            timestamp: Date.now()\n        };\n        localStorage.setItem(key, JSON.stringify(data));\n        // Clean up old auto-saves (older than expiry)\n        cleanupOldAutoSaves();\n        console.log('[sessionManager] Auto-saved session data');\n    } catch (error) {\n        console.error('[sessionManager] Failed to auto-save:', error);\n    }\n}\n/**\n * Get the most recent auto-saved session\n */ function getAutoSavedSession() {\n    try {\n        const keys = Object.keys(localStorage).filter((key)=>key.startsWith(AUTO_SAVE_KEY_PREFIX));\n        if (keys.length === 0) {\n            return null;\n        }\n        // Get the most recent auto-save\n        const sortedKeys = keys.sort((a, b)=>{\n            const timestampA = parseInt(a.replace(AUTO_SAVE_KEY_PREFIX, ''));\n            const timestampB = parseInt(b.replace(AUTO_SAVE_KEY_PREFIX, ''));\n            return timestampB - timestampA;\n        });\n        const mostRecentKey = sortedKeys[0];\n        const data = localStorage.getItem(mostRecentKey);\n        if (!data) {\n            return null;\n        }\n        const sessionData = JSON.parse(data);\n        // Check if auto-save is still valid (not expired)\n        const age = Date.now() - sessionData.timestamp;\n        if (age > AUTO_SAVE_EXPIRY_MS) {\n            localStorage.removeItem(mostRecentKey);\n            return null;\n        }\n        return {\n            transcript: sessionData.transcript,\n            patient: sessionData.patient,\n            timestamp: sessionData.timestamp\n        };\n    } catch (error) {\n        console.error('[sessionManager] Failed to get auto-saved session:', error);\n        return null;\n    }\n}\n/**\n * Clear all auto-saved sessions\n */ function clearAutoSavedSessions() {\n    try {\n        const keys = Object.keys(localStorage).filter((key)=>key.startsWith(AUTO_SAVE_KEY_PREFIX));\n        keys.forEach((key)=>localStorage.removeItem(key));\n        console.log('[sessionManager] Cleared all auto-saved sessions');\n    } catch (error) {\n        console.error('[sessionManager] Failed to clear auto-saves:', error);\n    }\n}\n/**\n * Clean up old auto-saves (older than expiry)\n */ function cleanupOldAutoSaves() {\n    try {\n        const keys = Object.keys(localStorage).filter((key)=>key.startsWith(AUTO_SAVE_KEY_PREFIX));\n        const now = Date.now();\n        keys.forEach((key)=>{\n            const data = localStorage.getItem(key);\n            if (data) {\n                try {\n                    const sessionData = JSON.parse(data);\n                    const age = now - sessionData.timestamp;\n                    if (age > AUTO_SAVE_EXPIRY_MS) {\n                        localStorage.removeItem(key);\n                    }\n                } catch  {\n                    // Invalid data, remove it\n                    localStorage.removeItem(key);\n                }\n            }\n        });\n    } catch (error) {\n        console.error('[sessionManager] Failed to cleanup old auto-saves:', error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUIsUUFBUW5CLEtBQUssQ0FBQyxnREFBZ0RBO0lBQ2hFO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELFNBQVNvQztJQUNQLElBQUk7UUFDRixNQUFNRSxPQUFPQyxPQUFPRCxJQUFJLENBQUNMLGNBQWNPLE1BQU0sQ0FBQ1QsQ0FBQUEsTUFDNUNBLElBQUlVLFVBQVUsQ0FBQy9DO1FBR2pCLE1BQU1rQixNQUFNRyxLQUFLSCxHQUFHO1FBQ3BCMEIsS0FBS21CLE9BQU8sQ0FBQzFCLENBQUFBO1lBQ1gsTUFBTWpDLE9BQU9tQyxhQUFha0IsT0FBTyxDQUFDcEI7WUFDbEMsSUFBSWpDLE1BQU07Z0JBQ1IsSUFBSTtvQkFDRixNQUFNZ0MsY0FBY3JCLEtBQUtDLEtBQUssQ0FBQ1o7b0JBQy9CLE1BQU1zRCxNQUFNeEMsTUFBTWtCLFlBQVlFLFNBQVM7b0JBQ3ZDLElBQUlvQixNQUFNekQscUJBQXFCO3dCQUM3QnNDLGFBQWFvQixVQUFVLENBQUN0QjtvQkFDMUI7Z0JBQ0YsRUFBRSxPQUFNO29CQUNOLDBCQUEwQjtvQkFDMUJFLGFBQWFvQixVQUFVLENBQUN0QjtnQkFDMUI7WUFDRjtRQUNGO0lBQ0YsRUFBRSxPQUFPL0IsT0FBTztRQUNkbUIsUUFBUW5CLEtBQUssQ0FBQyxzREFBc0RBO0lBQ3RFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXZpL2Rldi9NYWluMk1JL3V0aWxzL3Nlc3Npb25NYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2Vzc2lvbiBNYW5hZ2VtZW50IFV0aWxpdHlcbiAqIFxuICogSGFuZGxlcyB0b2tlbiByZWZyZXNoLCBzZXNzaW9uIGV4cGlyeSBkZXRlY3Rpb24sIGFuZCBhdXRvLXNhdmUgZnVuY3Rpb25hbGl0eVxuICogdG8gcHJldmVudCBkYXRhIGxvc3MgZHVyaW5nIGxvbmcgcHJhY3RpY2Ugc2Vzc2lvbnMuXG4gKi9cblxuaW1wb3J0IHsgZ2V0U3VwYWJhc2VDbGllbnQsIGlzU3VwYWJhc2VDb25maWd1cmVkIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25EYXRhIHtcbiAgdHJhbnNjcmlwdDogQXJyYXk8eyBhdXRob3I6IHN0cmluZzsgdGV4dDogc3RyaW5nIH0+O1xuICBwYXRpZW50OiBhbnk7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5jb25zdCBBVVRPX1NBVkVfS0VZX1BSRUZJWCA9ICdtaS1wcmFjdGljZS1hdXRvLXNhdmUtJztcbmNvbnN0IEFVVE9fU0FWRV9FWFBJUllfTVMgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuXG4vKipcbiAqIEdldCBhIHZhbGlkIGF1dGggdG9rZW4sIHJlZnJlc2hpbmcgaWYgbmVjZXNzYXJ5XG4gKiBSZXR1cm5zIG51bGwgaWYgc2Vzc2lvbiBpcyBleHBpcmVkIGFuZCBjYW5ub3QgYmUgcmVmcmVzaGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWYWxpZEF1dGhUb2tlbigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgaWYgKCFpc1N1cGFiYXNlQ29uZmlndXJlZCgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcblxuICAgIGlmIChzZXNzaW9uRXJyb3IgfHwgIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghc2Vzc2lvbi5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRva2VuIGlzIGV4cGlyZWQgb3Igd2lsbCBleHBpcmUgc29vbiAod2l0aGluIDUgbWludXRlcylcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW5QYXJ0cyA9IHNlc3Npb24uYWNjZXNzX3Rva2VuLnNwbGl0KCcuJyk7XG4gICAgICBpZiAodG9rZW5QYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoYXRvYih0b2tlblBhcnRzWzFdKSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgICAgICBjb25zdCBleHBpcmVzQXQgPSBwYXlsb2FkLmV4cCB8fCAwO1xuICAgICAgICBjb25zdCB0aW1lVW50aWxFeHBpcnkgPSBleHBpcmVzQXQgLSBub3c7XG5cbiAgICAgICAgLy8gSWYgZXhwaXJlZCBvciBleHBpcmVzIHdpdGhpbiA1IG1pbnV0ZXMsIHJlZnJlc2hcbiAgICAgICAgaWYgKHRpbWVVbnRpbEV4cGlyeSA8IDMwMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2Vzc2lvbk1hbmFnZXJdIFRva2VuIGV4cGlyZXMgc29vbiwgcmVmcmVzaGluZy4uLicpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXNzaW9uLnJlZnJlc2hfdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uOiByZWZyZXNoZWRTZXNzaW9uIH0sIGVycm9yOiByZWZyZXNoRXJyb3IgfSA9IFxuICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5hdXRoLnJlZnJlc2hTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVmcmVzaEVycm9yIHx8ICFyZWZyZXNoZWRTZXNzaW9uPy5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3Nlc3Npb25NYW5hZ2VyXSBGYWlsZWQgdG8gcmVmcmVzaCBzZXNzaW9uOicsIHJlZnJlc2hFcnJvcik7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW3Nlc3Npb25NYW5hZ2VyXSBTZXNzaW9uIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIHJldHVybiByZWZyZXNoZWRTZXNzaW9uLmFjY2Vzc190b2tlbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbc2Vzc2lvbk1hbmFnZXJdIE5vIHJlZnJlc2ggdG9rZW4gYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgdG9rZW4sIHVzZSBpdCBhcy1pcyAoc2VydmVyIHdpbGwgdmFsaWRhdGUpXG4gICAgICBjb25zb2xlLndhcm4oJ1tzZXNzaW9uTWFuYWdlcl0gQ291bGQgbm90IHBhcnNlIHRva2VuLCB1c2luZyBhcy1pcycpO1xuICAgIH1cblxuICAgIHJldHVybiBzZXNzaW9uLmFjY2Vzc190b2tlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbc2Vzc2lvbk1hbmFnZXJdIEVycm9yIGdldHRpbmcgYXV0aCB0b2tlbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBjdXJyZW50IHNlc3Npb24gaXMgdmFsaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzU2Vzc2lvblZhbGlkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFZhbGlkQXV0aFRva2VuKCk7XG4gIHJldHVybiB0b2tlbiAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBBdXRvLXNhdmUgcHJhY3RpY2Ugc2Vzc2lvbiBkYXRhIHRvIGxvY2FsU3RvcmFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXV0b1NhdmVTZXNzaW9uKHNlc3Npb25EYXRhOiBTZXNzaW9uRGF0YSk6IHZvaWQge1xuICB0cnkge1xuICAgIGNvbnN0IGtleSA9IGAke0FVVE9fU0FWRV9LRVlfUFJFRklYfSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAuLi5zZXNzaW9uRGF0YSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIG9sZCBhdXRvLXNhdmVzIChvbGRlciB0aGFuIGV4cGlyeSlcbiAgICBjbGVhbnVwT2xkQXV0b1NhdmVzKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1tzZXNzaW9uTWFuYWdlcl0gQXV0by1zYXZlZCBzZXNzaW9uIGRhdGEnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbc2Vzc2lvbk1hbmFnZXJdIEZhaWxlZCB0byBhdXRvLXNhdmU6JywgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBtb3N0IHJlY2VudCBhdXRvLXNhdmVkIHNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dG9TYXZlZFNlc3Npb24oKTogU2Vzc2lvbkRhdGEgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LnN0YXJ0c1dpdGgoQVVUT19TQVZFX0tFWV9QUkVGSVgpXG4gICAgKTtcbiAgICBcbiAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgbW9zdCByZWNlbnQgYXV0by1zYXZlXG4gICAgY29uc3Qgc29ydGVkS2V5cyA9IGtleXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgdGltZXN0YW1wQSA9IHBhcnNlSW50KGEucmVwbGFjZShBVVRPX1NBVkVfS0VZX1BSRUZJWCwgJycpKTtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcEIgPSBwYXJzZUludChiLnJlcGxhY2UoQVVUT19TQVZFX0tFWV9QUkVGSVgsICcnKSk7XG4gICAgICByZXR1cm4gdGltZXN0YW1wQiAtIHRpbWVzdGFtcEE7XG4gICAgfSk7XG5cbiAgICBjb25zdCBtb3N0UmVjZW50S2V5ID0gc29ydGVkS2V5c1swXTtcbiAgICBjb25zdCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obW9zdFJlY2VudEtleSk7XG4gICAgXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uRGF0YSA9IEpTT04ucGFyc2UoZGF0YSkgYXMgU2Vzc2lvbkRhdGEgJiB7IHRpbWVzdGFtcDogbnVtYmVyIH07XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYXV0by1zYXZlIGlzIHN0aWxsIHZhbGlkIChub3QgZXhwaXJlZClcbiAgICBjb25zdCBhZ2UgPSBEYXRlLm5vdygpIC0gc2Vzc2lvbkRhdGEudGltZXN0YW1wO1xuICAgIGlmIChhZ2UgPiBBVVRPX1NBVkVfRVhQSVJZX01TKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShtb3N0UmVjZW50S2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2NyaXB0OiBzZXNzaW9uRGF0YS50cmFuc2NyaXB0LFxuICAgICAgcGF0aWVudDogc2Vzc2lvbkRhdGEucGF0aWVudCxcbiAgICAgIHRpbWVzdGFtcDogc2Vzc2lvbkRhdGEudGltZXN0YW1wLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Nlc3Npb25NYW5hZ2VyXSBGYWlsZWQgdG8gZ2V0IGF1dG8tc2F2ZWQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhciBhbGwgYXV0by1zYXZlZCBzZXNzaW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBdXRvU2F2ZWRTZXNzaW9ucygpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LnN0YXJ0c1dpdGgoQVVUT19TQVZFX0tFWV9QUkVGSVgpXG4gICAgKTtcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSkpO1xuICAgIGNvbnNvbGUubG9nKCdbc2Vzc2lvbk1hbmFnZXJdIENsZWFyZWQgYWxsIGF1dG8tc2F2ZWQgc2Vzc2lvbnMnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbc2Vzc2lvbk1hbmFnZXJdIEZhaWxlZCB0byBjbGVhciBhdXRvLXNhdmVzOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIG9sZCBhdXRvLXNhdmVzIChvbGRlciB0aGFuIGV4cGlyeSlcbiAqL1xuZnVuY3Rpb24gY2xlYW51cE9sZEF1dG9TYXZlcygpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LnN0YXJ0c1dpdGgoQVVUT19TQVZFX0tFWV9QUkVGSVgpXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gSlNPTi5wYXJzZShkYXRhKSBhcyB7IHRpbWVzdGFtcDogbnVtYmVyIH07XG4gICAgICAgICAgY29uc3QgYWdlID0gbm93IC0gc2Vzc2lvbkRhdGEudGltZXN0YW1wO1xuICAgICAgICAgIGlmIChhZ2UgPiBBVVRPX1NBVkVfRVhQSVJZX01TKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gSW52YWxpZCBkYXRhLCByZW1vdmUgaXRcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Nlc3Npb25NYW5hZ2VyXSBGYWlsZWQgdG8gY2xlYW51cCBvbGQgYXV0by1zYXZlczonLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRTdXBhYmFzZUNsaWVudCIsImlzU3VwYWJhc2VDb25maWd1cmVkIiwiQVVUT19TQVZFX0tFWV9QUkVGSVgiLCJBVVRPX1NBVkVfRVhQSVJZX01TIiwiZ2V0VmFsaWRBdXRoVG9rZW4iLCJzdXBhYmFzZSIsImRhdGEiLCJzZXNzaW9uIiwiZXJyb3IiLCJzZXNzaW9uRXJyb3IiLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsImFjY2Vzc190b2tlbiIsInRva2VuUGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwibm93IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsImV4cGlyZXNBdCIsImV4cCIsInRpbWVVbnRpbEV4cGlyeSIsImNvbnNvbGUiLCJsb2ciLCJyZWZyZXNoX3Rva2VuIiwicmVmcmVzaGVkU2Vzc2lvbiIsInJlZnJlc2hFcnJvciIsInJlZnJlc2hTZXNzaW9uIiwid2FybiIsInBhcnNlRXJyb3IiLCJpc1Nlc3Npb25WYWxpZCIsInRva2VuIiwiYXV0b1NhdmVTZXNzaW9uIiwic2Vzc2lvbkRhdGEiLCJrZXkiLCJ0aW1lc3RhbXAiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiY2xlYW51cE9sZEF1dG9TYXZlcyIsImdldEF1dG9TYXZlZFNlc3Npb24iLCJrZXlzIiwiT2JqZWN0IiwiZmlsdGVyIiwic3RhcnRzV2l0aCIsInNvcnRlZEtleXMiLCJzb3J0IiwiYSIsImIiLCJ0aW1lc3RhbXBBIiwicGFyc2VJbnQiLCJyZXBsYWNlIiwidGltZXN0YW1wQiIsIm1vc3RSZWNlbnRLZXkiLCJnZXRJdGVtIiwiYWdlIiwicmVtb3ZlSXRlbSIsInRyYW5zY3JpcHQiLCJwYXRpZW50IiwiY2xlYXJBdXRvU2F2ZWRTZXNzaW9ucyIsImZvckVhY2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/sessionManager.ts\n");

/***/ })

};
;