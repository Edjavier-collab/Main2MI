"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_components_views_PracticeView_tsx";
exports.ids = ["_ssr_components_views_PracticeView_tsx"];
exports.modules = {

/***/ "(ssr)/./components/ui/ChatBubble.tsx":
/*!**************************************!*\
  !*** ./components/ui/ChatBubble.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst ChatBubble = ({ message, isTyping = false })=>{\n    const isUser = message.author === 'user';\n    const bubbleClasses = isUser ? 'text-white self-end rounded-l-xl rounded-t-xl' : 'bg-neutral-200 text-neutral-800 self-start rounded-r-xl rounded-t-xl';\n    const typingIndicator = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center space-x-1.5\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-2.5 h-2.5 bg-current opacity-60 rounded-full animate-bounce [animation-delay:-0.3s]\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n                lineNumber: 19,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-2.5 h-2.5 bg-current opacity-60 rounded-full animate-bounce [animation-delay:-0.15s]\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n                lineNumber: 20,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-2.5 h-2.5 bg-current opacity-60 rounded-full animate-bounce\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n                lineNumber: 21,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n        lineNumber: 18,\n        columnNumber: 9\n    }, undefined);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `flex ${isUser ? 'justify-end' : 'justify-start'} animate-slide-fade-in`,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: `max-w-[85%] sm:max-w-xs md:max-w-md lg:max-w-lg px-4 sm:px-5 py-3 sm:py-4 shadow-sm ${bubbleClasses}`,\n            style: {\n                ...isUser ? {\n                    backgroundColor: 'var(--color-primary)'\n                } : undefined,\n                lineHeight: '1.6'\n            },\n            children: isTyping ? typingIndicator : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"whitespace-pre-wrap\",\n                children: message.text\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n                lineNumber: 34,\n                columnNumber: 47\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n            lineNumber: 27,\n            columnNumber: 13\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/ChatBubble.tsx\",\n        lineNumber: 26,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatBubble);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL3VpL0NoYXRCdWJibGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUMwQjtBQVExQixNQUFNQyxhQUF3QyxDQUFDLEVBQUVDLE9BQU8sRUFBRUMsV0FBVyxLQUFLLEVBQUU7SUFDeEUsTUFBTUMsU0FBU0YsUUFBUUcsTUFBTSxLQUFLO0lBRWxDLE1BQU1DLGdCQUFnQkYsU0FDaEIsa0RBQ0E7SUFFTixNQUFNRyxnQ0FDRiw4REFBQ0M7UUFBSUMsV0FBVTs7MEJBQ1gsOERBQUNEO2dCQUFJQyxXQUFVOzs7Ozs7MEJBQ2YsOERBQUNEO2dCQUFJQyxXQUFVOzs7Ozs7MEJBQ2YsOERBQUNEO2dCQUFJQyxXQUFVOzs7Ozs7Ozs7Ozs7SUFJdkIscUJBQ0ksOERBQUNEO1FBQUlDLFdBQVcsQ0FBQyxLQUFLLEVBQUVMLFNBQVMsZ0JBQWdCLGdCQUFnQixzQkFBc0IsQ0FBQztrQkFDcEYsNEVBQUNJO1lBQ0dDLFdBQVcsQ0FBQyxvRkFBb0YsRUFBRUgsZUFBZTtZQUNqSEksT0FBTztnQkFDSCxHQUFJTixTQUFTO29CQUFFTyxpQkFBaUI7Z0JBQXVCLElBQUlDLFNBQVM7Z0JBQ3BFQyxZQUFZO1lBQ2hCO3NCQUVDVixXQUFXSSxnQ0FBa0IsOERBQUNPO2dCQUFFTCxXQUFVOzBCQUF1QlAsUUFBUWEsSUFBSTs7Ozs7Ozs7Ozs7Ozs7OztBQUk5RjtBQUVBLGlFQUFlZCxVQUFVQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvamF2aS9kZXYvTWFpbjJNSS9jb21wb25lbnRzL3VpL0NoYXRCdWJibGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENoYXRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgQ2hhdEJ1YmJsZVByb3BzIHtcbiAgICBtZXNzYWdlOiBDaGF0TWVzc2FnZTtcbiAgICBpc1R5cGluZz86IGJvb2xlYW47XG59XG5cbmNvbnN0IENoYXRCdWJibGU6IFJlYWN0LkZDPENoYXRCdWJibGVQcm9wcz4gPSAoeyBtZXNzYWdlLCBpc1R5cGluZyA9IGZhbHNlIH0pID0+IHtcbiAgICBjb25zdCBpc1VzZXIgPSBtZXNzYWdlLmF1dGhvciA9PT0gJ3VzZXInO1xuXG4gICAgY29uc3QgYnViYmxlQ2xhc3NlcyA9IGlzVXNlclxuICAgICAgICA/ICd0ZXh0LXdoaXRlIHNlbGYtZW5kIHJvdW5kZWQtbC14bCByb3VuZGVkLXQteGwnXG4gICAgICAgIDogJ2JnLW5ldXRyYWwtMjAwIHRleHQtbmV1dHJhbC04MDAgc2VsZi1zdGFydCByb3VuZGVkLXIteGwgcm91bmRlZC10LXhsJztcblxuICAgIGNvbnN0IHR5cGluZ0luZGljYXRvciA9IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTEuNVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIuNSBoLTIuNSBiZy1jdXJyZW50IG9wYWNpdHktNjAgcm91bmRlZC1mdWxsIGFuaW1hdGUtYm91bmNlIFthbmltYXRpb24tZGVsYXk6LTAuM3NdXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMi41IGgtMi41IGJnLWN1cnJlbnQgb3BhY2l0eS02MCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2UgW2FuaW1hdGlvbi1kZWxheTotMC4xNXNdXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMi41IGgtMi41IGJnLWN1cnJlbnQgb3BhY2l0eS02MCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleCAke2lzVXNlciA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9IGFuaW1hdGUtc2xpZGUtZmFkZS1pbmB9PlxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtYXgtdy1bODUlXSBzbTptYXgtdy14cyBtZDptYXgtdy1tZCBsZzptYXgtdy1sZyBweC00IHNtOnB4LTUgcHktMyBzbTpweS00IHNoYWRvdy1zbSAke2J1YmJsZUNsYXNzZXN9YH1cbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAuLi4oaXNVc2VyID8geyBiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1jb2xvci1wcmltYXJ5KScgfSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICcxLjYnLCAvLyBCZXR0ZXIgcmVhZGFiaWxpdHlcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpc1R5cGluZyA/IHR5cGluZ0luZGljYXRvciA6IDxwIGNsYXNzTmFtZT1cIndoaXRlc3BhY2UtcHJlLXdyYXBcIj57bWVzc2FnZS50ZXh0fTwvcD59XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYXRCdWJibGU7Il0sIm5hbWVzIjpbIlJlYWN0IiwiQ2hhdEJ1YmJsZSIsIm1lc3NhZ2UiLCJpc1R5cGluZyIsImlzVXNlciIsImF1dGhvciIsImJ1YmJsZUNsYXNzZXMiLCJ0eXBpbmdJbmRpY2F0b3IiLCJkaXYiLCJjbGFzc05hbWUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInVuZGVmaW5lZCIsImxpbmVIZWlnaHQiLCJwIiwidGV4dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./components/ui/ChatBubble.tsx\n");

/***/ }),

/***/ "(ssr)/./components/ui/PatientProfileCard.tsx":
/*!**********************************************!*\
  !*** ./components/ui/PatientProfileCard.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../types */ \"(ssr)/./types.ts\");\n\n\n\n// Personality trait display configuration\nconst PERSONALITY_TRAIT_LABELS = {\n    defensive: {\n        label: 'Defensive',\n        icon: 'fa-shield',\n        colorClass: 'bg-red-100 text-red-700'\n    },\n    emotional: {\n        label: 'Emotional',\n        icon: 'fa-heart',\n        colorClass: 'bg-pink-100 text-pink-700'\n    },\n    reserved: {\n        label: 'Reserved',\n        icon: 'fa-lock',\n        colorClass: 'bg-slate-100 text-slate-700'\n    },\n    talkative: {\n        label: 'Talkative',\n        icon: 'fa-comments',\n        colorClass: 'bg-blue-100 text-blue-700'\n    },\n    intellectualizer: {\n        label: 'Intellectualizer',\n        icon: 'fa-brain',\n        colorClass: 'bg-purple-100 text-purple-700'\n    },\n    pleaser: {\n        label: 'People Pleaser',\n        icon: 'fa-handshake',\n        colorClass: 'bg-green-100 text-green-700'\n    }\n};\nconst InfoSection = ({ icon, title, children, colorClassName })=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                className: `text-sm font-semibold ${colorClassName} uppercase flex items-center mb-2`,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                        className: `fa-solid ${icon} w-6 text-center mr-2`\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 31,\n                        columnNumber: 13\n                    }, undefined),\n                    title\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                lineNumber: 30,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-neutral-700 space-y-2 pl-8\",\n                children: children\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                lineNumber: 34,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n        lineNumber: 29,\n        columnNumber: 5\n    }, undefined);\nconst stageColors = {\n    [_types__WEBPACK_IMPORTED_MODULE_2__.StageOfChange.Precontemplation]: 'bg-error-light text-error-dark',\n    [_types__WEBPACK_IMPORTED_MODULE_2__.StageOfChange.Contemplation]: 'bg-warning-light text-warning-dark',\n    [_types__WEBPACK_IMPORTED_MODULE_2__.StageOfChange.Preparation]: 'bg-info-light text-info-dark',\n    [_types__WEBPACK_IMPORTED_MODULE_2__.StageOfChange.Action]: 'bg-success-light text-success-dark',\n    [_types__WEBPACK_IMPORTED_MODULE_2__.StageOfChange.Maintenance]: 'bg-primary-lighter text-primary-darker'\n};\nconst PatientProfileCard = ({ patient, userTier, onUpgrade })=>{\n    const isFreeTier = userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Free;\n    const abbreviate = (text)=>{\n        const sentences = text.split('.');\n        if (sentences.length > 1 && sentences[0]) {\n            return sentences[0] + '.';\n        }\n        return text;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-white border border-neutral-200 rounded-2xl w-full max-w-2xl mx-auto shadow-sm overflow-hidden tile-hover\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"flex items-center justify-between p-6 border-b border-neutral-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"text-2xl font-bold text-neutral-900\",\n                                children: patient.name\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                lineNumber: 65,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-neutral-500\",\n                                children: [\n                                    patient.age,\n                                    \", \",\n                                    patient.sex\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                lineNumber: 66,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 64,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col items-end gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `px-3 py-1 text-sm font-bold rounded-full ${stageColors[patient.stageOfChange]}`,\n                                children: patient.stageOfChange\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                lineNumber: 69,\n                                columnNumber: 21\n                            }, undefined),\n                            patient.personalityTrait && PERSONALITY_TRAIT_LABELS[patient.personalityTrait] && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `px-2 py-0.5 text-xs font-medium rounded-full flex items-center gap-1 ${PERSONALITY_TRAIT_LABELS[patient.personalityTrait].colorClass}`,\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        className: `fa-solid ${PERSONALITY_TRAIT_LABELS[patient.personalityTrait].icon} text-[10px]`,\n                                        \"aria-hidden\": \"true\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                        lineNumber: 74,\n                                        columnNumber: 29\n                                    }, undefined),\n                                    PERSONALITY_TRAIT_LABELS[patient.personalityTrait].label\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                lineNumber: 73,\n                                columnNumber: 25\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 68,\n                        columnNumber: 17\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                lineNumber: 63,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"py-6 px-6 space-y-6\",\n                children: [\n                    !isFreeTier && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(InfoSection, {\n                        icon: \"fa-user\",\n                        title: \"Background\",\n                        colorClassName: \"text-teal-600\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: patient.background\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                            lineNumber: 84,\n                            columnNumber: 25\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 83,\n                        columnNumber: 21\n                    }, undefined),\n                    !isFreeTier && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(InfoSection, {\n                        icon: \"fa-clipboard-question\",\n                        title: \"Presenting Problem\",\n                        colorClassName: \"text-amber-600\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: patient.presentingProblem\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                            lineNumber: 90,\n                            columnNumber: 26\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 89,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(InfoSection, {\n                        icon: \"fa-file-waveform\",\n                        title: \"Relevant History\",\n                        colorClassName: \"text-sky-600\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: isFreeTier ? abbreviate(patient.history) : patient.history\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                            lineNumber: 95,\n                            columnNumber: 21\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 94,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-sm font-semibold text-indigo-600 uppercase flex items-center mb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        className: \"fa-solid fa-quote-left w-6 text-center mr-2\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                        lineNumber: 100,\n                                        columnNumber: 25\n                                    }, undefined),\n                                    \"Chief Complaint\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                lineNumber: 99,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"blockquote\", {\n                                className: \"border-l-4 border-indigo-500 bg-indigo-50 p-4 rounded-r-lg ml-8\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-neutral-800 italic leading-relaxed\",\n                                    children: [\n                                        '\"',\n                                        patient.chiefComplaint,\n                                        '\"'\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                    lineNumber: 104,\n                                    columnNumber: 25\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                                lineNumber: 103,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                        lineNumber: 98,\n                        columnNumber: 18\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                lineNumber: 81,\n                columnNumber: 13\n            }, undefined),\n            isFreeTier && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: `bg-neutral-50 border-t border-neutral-200 px-6 py-4 text-center ${onUpgrade ? 'cursor-pointer hover:bg-neutral-100 transition-colors' : ''}`,\n                onClick: onUpgrade,\n                role: onUpgrade ? 'button' : undefined,\n                tabIndex: onUpgrade ? 0 : undefined,\n                onKeyDown: onUpgrade ? (e)=>{\n                    if (e.key === 'Enter' || e.key === ' ') {\n                        e.preventDefault();\n                        onUpgrade();\n                    }\n                } : undefined,\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                            className: \"fa-solid fa-lock text-neutral-400 mr-3\"\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                            lineNumber: 123,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm font-medium text-neutral-600\",\n                            children: \"Upgrade to Premium to view the patient's complete profile.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                            lineNumber: 124,\n                            columnNumber: 25\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                    lineNumber: 122,\n                    columnNumber: 21\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n                lineNumber: 110,\n                columnNumber: 17\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/PatientProfileCard.tsx\",\n        lineNumber: 61,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PatientProfileCard);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL3VpL1BhdGllbnRQcm9maWxlQ2FyZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUMwQjtBQUM4RDtBQVF4RiwwQ0FBMEM7QUFDMUMsTUFBTUcsMkJBQTBHO0lBQzVHQyxXQUFXO1FBQUVDLE9BQU87UUFBYUMsTUFBTTtRQUFhQyxZQUFZO0lBQTBCO0lBQzFGQyxXQUFXO1FBQUVILE9BQU87UUFBYUMsTUFBTTtRQUFZQyxZQUFZO0lBQTRCO0lBQzNGRSxVQUFVO1FBQUVKLE9BQU87UUFBWUMsTUFBTTtRQUFXQyxZQUFZO0lBQThCO0lBQzFGRyxXQUFXO1FBQUVMLE9BQU87UUFBYUMsTUFBTTtRQUFlQyxZQUFZO0lBQTRCO0lBQzlGSSxrQkFBa0I7UUFBRU4sT0FBTztRQUFvQkMsTUFBTTtRQUFZQyxZQUFZO0lBQWdDO0lBQzdHSyxTQUFTO1FBQUVQLE9BQU87UUFBa0JDLE1BQU07UUFBZ0JDLFlBQVk7SUFBOEI7QUFDeEc7QUFTQSxNQUFNTSxjQUEwQyxDQUFDLEVBQUVQLElBQUksRUFBRVEsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLGNBQWMsRUFBRSxpQkFDdEYsOERBQUNDOzswQkFDRyw4REFBQ0M7Z0JBQUdDLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRUgsZUFBZSxpQ0FBaUMsQ0FBQzs7a0NBQ3JGLDhEQUFDSTt3QkFBRUQsV0FBVyxDQUFDLFNBQVMsRUFBRWIsS0FBSyxxQkFBcUIsQ0FBQzs7Ozs7O29CQUNwRFE7Ozs7Ozs7MEJBRUwsOERBQUNHO2dCQUFJRSxXQUFVOzBCQUNWSjs7Ozs7Ozs7Ozs7O0FBS2IsTUFBTU0sY0FBNkM7SUFDL0MsQ0FBQ3BCLGlEQUFhQSxDQUFDcUIsZ0JBQWdCLENBQUMsRUFBRTtJQUNsQyxDQUFDckIsaURBQWFBLENBQUNzQixhQUFhLENBQUMsRUFBRTtJQUMvQixDQUFDdEIsaURBQWFBLENBQUN1QixXQUFXLENBQUMsRUFBRTtJQUM3QixDQUFDdkIsaURBQWFBLENBQUN3QixNQUFNLENBQUMs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LEtBQUssS0FBSzt3QkFDcENELEVBQUVFLGNBQWM7d0JBQ2hCL0I7b0JBQ0o7Z0JBQ0osSUFBSTBCOzBCQUVKLDRFQUFDdkM7b0JBQUlFLFdBQVU7O3NDQUNYLDhEQUFDQzs0QkFBRUQsV0FBVTs7Ozs7O3NDQUNiLDhEQUFDc0I7NEJBQUV0QixXQUFVO3NDQUF1Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRNUU7QUFFQSxpRUFBZVEsa0JBQWtCQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvamF2aS9kZXYvTWFpbjJNSS9jb21wb25lbnRzL3VpL1BhdGllbnRQcm9maWxlQ2FyZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUGF0aWVudFByb2ZpbGUsIFN0YWdlT2ZDaGFuZ2UsIFVzZXJUaWVyLCBQZXJzb25hbGl0eVRyYWl0IH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgUGF0aWVudFByb2ZpbGVDYXJkUHJvcHMge1xuICAgIHBhdGllbnQ6IFBhdGllbnRQcm9maWxlO1xuICAgIHVzZXJUaWVyPzogVXNlclRpZXI7XG4gICAgb25VcGdyYWRlPzogKCkgPT4gdm9pZDtcbn1cblxuLy8gUGVyc29uYWxpdHkgdHJhaXQgZGlzcGxheSBjb25maWd1cmF0aW9uXG5jb25zdCBQRVJTT05BTElUWV9UUkFJVF9MQUJFTFM6IFJlY29yZDxQZXJzb25hbGl0eVRyYWl0LCB7IGxhYmVsOiBzdHJpbmc7IGljb246IHN0cmluZzsgY29sb3JDbGFzczogc3RyaW5nIH0+ID0ge1xuICAgIGRlZmVuc2l2ZTogeyBsYWJlbDogJ0RlZmVuc2l2ZScsIGljb246ICdmYS1zaGllbGQnLCBjb2xvckNsYXNzOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC03MDAnIH0sXG4gICAgZW1vdGlvbmFsOiB7IGxhYmVsOiAnRW1vdGlvbmFsJywgaWNvbjogJ2ZhLWhlYXJ0JywgY29sb3JDbGFzczogJ2JnLXBpbmstMTAwIHRleHQtcGluay03MDAnIH0sXG4gICAgcmVzZXJ2ZWQ6IHsgbGFiZWw6ICdSZXNlcnZlZCcsIGljb246ICdmYS1sb2NrJywgY29sb3JDbGFzczogJ2JnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTcwMCcgfSxcbiAgICB0YWxrYXRpdmU6IHsgbGFiZWw6ICdUYWxrYXRpdmUnLCBpY29uOiAnZmEtY29tbWVudHMnLCBjb2xvckNsYXNzOiAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTcwMCcgfSxcbiAgICBpbnRlbGxlY3R1YWxpemVyOiB7IGxhYmVsOiAnSW50ZWxsZWN0dWFsaXplcicsIGljb246ICdmYS1icmFpbicsIGNvbG9yQ2xhc3M6ICdiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTcwMCcgfSxcbiAgICBwbGVhc2VyOiB7IGxhYmVsOiAnUGVvcGxlIFBsZWFzZXInLCBpY29uOiAnZmEtaGFuZHNoYWtlJywgY29sb3JDbGFzczogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTcwMCcgfSxcbn07XG5cbmludGVyZmFjZSBJbmZvU2VjdGlvblByb3BzIHtcbiAgICBpY29uOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAgIGNvbG9yQ2xhc3NOYW1lOiBzdHJpbmc7XG59XG5cbmNvbnN0IEluZm9TZWN0aW9uOiBSZWFjdC5GQzxJbmZvU2VjdGlvblByb3BzPiA9ICh7IGljb24sIHRpdGxlLCBjaGlsZHJlbiwgY29sb3JDbGFzc05hbWUgfSkgPT4gKFxuICAgIDxkaXY+XG4gICAgICAgIDxoMyBjbGFzc05hbWU9e2B0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgJHtjb2xvckNsYXNzTmFtZX0gdXBwZXJjYXNlIGZsZXggaXRlbXMtY2VudGVyIG1iLTJgfT5cbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT17YGZhLXNvbGlkICR7aWNvbn0gdy02IHRleHQtY2VudGVyIG1yLTJgfT48L2k+XG4gICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgIDwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1uZXV0cmFsLTcwMCBzcGFjZS15LTIgcGwtOFwiPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbik7XG5cbmNvbnN0IHN0YWdlQ29sb3JzOiBSZWNvcmQ8U3RhZ2VPZkNoYW5nZSwgc3RyaW5nPiA9IHtcbiAgICBbU3RhZ2VPZkNoYW5nZS5QcmVjb250ZW1wbGF0aW9uXTogJ2JnLWVycm9yLWxpZ2h0IHRleHQtZXJyb3ItZGFyaycsXG4gICAgW1N0YWdlT2ZDaGFuZ2UuQ29udGVtcGxhdGlvbl06ICdiZy13YXJuaW5nLWxpZ2h0IHRleHQtd2FybmluZy1kYXJrJyxcbiAgICBbU3RhZ2VPZkNoYW5nZS5QcmVwYXJhdGlvbl06ICdiZy1pbmZvLWxpZ2h0IHRleHQtaW5mby1kYXJrJyxcbiAgICBbU3RhZ2VPZkNoYW5nZS5BY3Rpb25dOiAnYmctc3VjY2Vzcy1saWdodCB0ZXh0LXN1Y2Nlc3MtZGFyaycsXG4gICAgW1N0YWdlT2ZDaGFuZ2UuTWFpbnRlbmFuY2VdOiAnYmctcHJpbWFyeS1saWdodGVyIHRleHQtcHJpbWFyeS1kYXJrZXInLFxufTtcblxuXG5jb25zdCBQYXRpZW50UHJvZmlsZUNhcmQ6IFJlYWN0LkZDPFBhdGllbnRQcm9maWxlQ2FyZFByb3BzPiA9ICh7IHBhdGllbnQsIHVzZXJUaWVyLCBvblVwZ3JhZGUgfSkgPT4ge1xuICAgIGNvbnN0IGlzRnJlZVRpZXIgPSB1c2VyVGllciA9PT0gVXNlclRpZXIuRnJlZTtcblxuICAgIGNvbnN0IGFiYnJldmlhdGUgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICAgICAgY29uc3Qgc2VudGVuY2VzID0gdGV4dC5zcGxpdCgnLicpO1xuICAgICAgICBpZiAoc2VudGVuY2VzLmxlbmd0aCA+IDEgJiYgc2VudGVuY2VzWzBdKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VudGVuY2VzWzBdICsgJy4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlciBib3JkZXItbmV1dHJhbC0yMDAgcm91bmRlZC0yeGwgdy1mdWxsIG1heC13LTJ4bCBteC1hdXRvIHNoYWRvdy1zbSBvdmVyZmxvdy1oaWRkZW4gdGlsZS1ob3ZlclwiPlxuICAgICAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtNiBib3JkZXItYiBib3JkZXItbmV1dHJhbC0yMDBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtbmV1dHJhbC05MDBcIj57cGF0aWVudC5uYW1lfTwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbmV1dHJhbC01MDBcIj57cGF0aWVudC5hZ2V9LCB7cGF0aWVudC5zZXh9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1lbmQgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BweC0zIHB5LTEgdGV4dC1zbSBmb250LWJvbGQgcm91bmRlZC1mdWxsICR7c3RhZ2VDb2xvcnNbcGF0aWVudC5zdGFnZU9mQ2hhbmdlXX1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwYXRpZW50LnN0YWdlT2ZDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7cGF0aWVudC5wZXJzb25hbGl0eVRyYWl0ICYmIFBFUlNPTkFMSVRZX1RSQUlUX0xBQkVMU1twYXRpZW50LnBlcnNvbmFsaXR5VHJhaXRdICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcHgtMiBweS0wLjUgdGV4dC14cyBmb250LW1lZGl1bSByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgJHtQRVJTT05BTElUWV9UUkFJVF9MQUJFTFNbcGF0aWVudC5wZXJzb25hbGl0eVRyYWl0XS5jb2xvckNsYXNzfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT17YGZhLXNvbGlkICR7UEVSU09OQUxJVFlfVFJBSVRfTEFCRUxTW3BhdGllbnQucGVyc29uYWxpdHlUcmFpdF0uaWNvbn0gdGV4dC1bMTBweF1gfSBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1BFUlNPTkFMSVRZX1RSQUlUX0xBQkVMU1twYXRpZW50LnBlcnNvbmFsaXR5VHJhaXRdLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2hlYWRlcj5cblxuICAgICAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwicHktNiBweC02IHNwYWNlLXktNlwiPlxuICAgICAgICAgICAgICAgIHshaXNGcmVlVGllciAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxJbmZvU2VjdGlvbiBpY29uPVwiZmEtdXNlclwiIHRpdGxlPVwiQmFja2dyb3VuZFwiIGNvbG9yQ2xhc3NOYW1lPVwidGV4dC10ZWFsLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3BhdGllbnQuYmFja2dyb3VuZH08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvSW5mb1NlY3Rpb24+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIHshaXNGcmVlVGllciAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxJbmZvU2VjdGlvbiBpY29uPVwiZmEtY2xpcGJvYXJkLXF1ZXN0aW9uXCIgdGl0bGU9XCJQcmVzZW50aW5nIFByb2JsZW1cIiBjb2xvckNsYXNzTmFtZT1cInRleHQtYW1iZXItNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3BhdGllbnQucHJlc2VudGluZ1Byb2JsZW19PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L0luZm9TZWN0aW9uPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICA8SW5mb1NlY3Rpb24gaWNvbj1cImZhLWZpbGUtd2F2ZWZvcm1cIiB0aXRsZT1cIlJlbGV2YW50IEhpc3RvcnlcIiBjb2xvckNsYXNzTmFtZT1cInRleHQtc2t5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICA8cD57aXNGcmVlVGllciA/IGFiYnJldmlhdGUocGF0aWVudC5oaXN0b3J5KSA6IHBhdGllbnQuaGlzdG9yeX08L3A+XG4gICAgICAgICAgICAgICAgPC9JbmZvU2VjdGlvbj5cblxuICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtaW5kaWdvLTYwMCB1cHBlcmNhc2UgZmxleCBpdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtcXVvdGUtbGVmdCB3LTYgdGV4dC1jZW50ZXIgbXItMlwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIENoaWVmIENvbXBsYWludFxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8YmxvY2txdW90ZSBjbGFzc05hbWU9XCJib3JkZXItbC00IGJvcmRlci1pbmRpZ28tNTAwIGJnLWluZGlnby01MCBwLTQgcm91bmRlZC1yLWxnIG1sLThcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbmV1dHJhbC04MDAgaXRhbGljIGxlYWRpbmctcmVsYXhlZFwiPlwie3BhdGllbnQuY2hpZWZDb21wbGFpbnR9XCI8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvYmxvY2txdW90ZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbWFpbj5cblxuICAgICAgICAgICAge2lzRnJlZVRpZXIgJiYgKFxuICAgICAgICAgICAgICAgIDxmb290ZXIgXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJnLW5ldXRyYWwtNTAgYm9yZGVyLXQgYm9yZGVyLW5ldXRyYWwtMjAwIHB4LTYgcHktNCB0ZXh0LWNlbnRlciAke29uVXBncmFkZSA/ICdjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1uZXV0cmFsLTEwMCB0cmFuc2l0aW9uLWNvbG9ycycgOiAnJ31gfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblVwZ3JhZGV9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9e29uVXBncmFkZSA/ICdidXR0b24nIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17b25VcGdyYWRlID8gMCA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtvblVwZ3JhZGUgPyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGdyYWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYS1zb2xpZCBmYS1sb2NrIHRleHQtbmV1dHJhbC00MDAgbXItM1wiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1uZXV0cmFsLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZ3JhZGUgdG8gUHJlbWl1bSB0byB2aWV3IHRoZSBwYXRpZW50J3MgY29tcGxldGUgcHJvZmlsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9mb290ZXI+XG4gICAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUGF0aWVudFByb2ZpbGVDYXJkO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiU3RhZ2VPZkNoYW5nZSIsIlVzZXJUaWVyIiwiUEVSU09OQUxJVFlfVFJBSVRfTEFCRUxTIiwiZGVmZW5zaXZlIiwibGFiZWwiLCJpY29uIiwiY29sb3JDbGFzcyIsImVtb3Rpb25hbCIsInJlc2VydmVkIiwidGFsa2F0aXZlIiwiaW50ZWxsZWN0dWFsaXplciIsInBsZWFzZXIiLCJJbmZvU2VjdGlvbiIsInRpdGxlIiwiY2hpbGRyZW4iLCJjb2xvckNsYXNzTmFtZSIsImRpdiIsImgzIiwiY2xhc3NOYW1lIiwiaSIsInN0YWdlQ29sb3JzIiwiUHJlY29udGVtcGxhdGlvbiIsIkNvbnRlbXBsYXRpb24iLCJQcmVwYXJhdGlvbiIsIkFjdGlvbiIsIk1haW50ZW5hbmNlIiwiUGF0aWVudFByb2ZpbGVDYXJkIiwicGF0aWVudCIsInVzZXJUaWVyIiwib25VcGdyYWRlIiwiaXNGcmVlVGllciIsIkZyZWUiLCJhYmJyZXZpYXRlIiwidGV4dCIsInNlbnRlbmNlcyIsInNwbGl0IiwibGVuZ3RoIiwiaGVhZGVyIiwiaDIiLCJuYW1lIiwicCIsImFnZSIsInNleCIsInN0YWdlT2ZDaGFuZ2UiLCJwZXJzb25hbGl0eVRyYWl0IiwiYXJpYS1oaWRkZW4iLCJtYWluIiwiYmFja2dyb3VuZCIsInByZXNlbnRpbmdQcm9ibGVtIiwiaGlzdG9yeSIsImJsb2NrcXVvdGUiLCJjaGllZkNvbXBsYWludCIsImZvb3RlciIsIm9uQ2xpY2siLCJyb2xlIiwidW5kZWZpbmVkIiwidGFiSW5kZXgiLCJvbktleURvd24iLCJlIiwia2V5IiwicHJldmVudERlZmF1bHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/ui/PatientProfileCard.tsx\n");

/***/ }),

/***/ "(ssr)/./components/ui/Timer.tsx":
/*!*********************************!*\
  !*** ./components/ui/Timer.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\nconst Timer = ({ initialSeconds, onTimeUp })=>{\n    const [seconds, setSeconds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialSeconds);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Timer.useEffect\": ()=>{\n            if (seconds <= 0) {\n                onTimeUp();\n                return;\n            }\n            const timerId = setInterval({\n                \"Timer.useEffect.timerId\": ()=>{\n                    setSeconds({\n                        \"Timer.useEffect.timerId\": (prevSeconds)=>prevSeconds - 1\n                    }[\"Timer.useEffect.timerId\"]);\n                }\n            }[\"Timer.useEffect.timerId\"], 1000);\n            return ({\n                \"Timer.useEffect\": ()=>clearInterval(timerId)\n            })[\"Timer.useEffect\"];\n        }\n    }[\"Timer.useEffect\"], [\n        seconds,\n        onTimeUp\n    ]);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    const isUrgent = seconds <= 30;\n    const timeColor = isUrgent ? 'text-[var(--color-error)]' : 'text-[var(--color-text-primary)]';\n    const urgentAnimation = isUrgent ? 'animate-pulse' : '';\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `font-mono text-lg font-bold transition-colors duration-300 ${timeColor} ${urgentAnimation}`,\n        role: \"timer\",\n        \"aria-live\": isUrgent ? 'polite' : 'off',\n        \"aria-label\": `${minutes} minutes and ${remainingSeconds} seconds remaining${isUrgent ? '. Time is running low!' : ''}`,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                className: `far fa-clock mr-2 ${isUrgent ? 'text-[var(--color-error)]' : ''}`,\n                \"aria-hidden\": \"true\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Timer.tsx\",\n                lineNumber: 40,\n                columnNumber: 13\n            }, undefined),\n            String(minutes).padStart(2, '0'),\n            \":\",\n            String(remainingSeconds).padStart(2, '0')\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/Timer.tsx\",\n        lineNumber: 34,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Timer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL3VpL1RpbWVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFbUQ7QUFPbkQsTUFBTUcsUUFBOEIsQ0FBQyxFQUFFQyxjQUFjLEVBQUVDLFFBQVEsRUFBRTtJQUM3RCxNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBR04sK0NBQVFBLENBQUNHO0lBRXZDRixnREFBU0E7MkJBQUM7WUFDTixJQUFJSSxXQUFXLEdBQUc7Z0JBQ2REO2dCQUNBO1lBQ0o7WUFFQSxNQUFNRyxVQUFVQzsyQ0FBWTtvQkFDeEJGO21EQUFXRyxDQUFBQSxjQUFlQSxjQUFjOztnQkFDNUM7MENBQUc7WUFFSDttQ0FBTyxJQUFNQyxjQUFjSDs7UUFDL0I7MEJBQUc7UUFBQ0Y7UUFBU0Q7S0FBUztJQUV0QixNQUFNTyxVQUFVQyxLQUFLQyxLQUFLLENBQUNSLFVBQVU7SUFDckMsTUFBTVMsbUJBQW1CVCxVQUFVO0lBRW5DLE1BQU1VLFdBQVdWLFdBQVc7SUFDNUIsTUFBTVcsWUFBWUQsV0FBVyw4QkFBOEI7SUFDM0QsTUFBTUUsa0JBQWtCRixXQUFXLGtCQUFrQjtJQUVyRCxxQkFDSSw4REFBQ0c7UUFDR0MsV0FBVyxDQUFDLDJEQUEyRCxFQUFFSCxVQUFVLENBQUMsRUFBRUMsaUJBQWlCO1FBQ3ZHRyxNQUFLO1FBQ0xDLGFBQVdOLFdBQVcsV0FBVztRQUNqQ08sY0FBWSxHQUFHWCxRQUFRLGFBQWEsRUFBRUcsaUJBQWlCLGtCQUFrQixFQUFFQyxXQUFXLDJCQUEyQixJQUFJOzswQkFFckgsOERBQUNRO2dCQUFFSixXQUFXLENBQUMsa0JBQWtCLEVBQUVKLFdBQVcsOEJBQThCLElBQUk7Z0JBQUVTLGVBQVk7Ozs7OztZQUM3RkMsT0FBT2QsU0FBU2UsUUFBUSxDQUFDLEdBQUc7WUFBSztZQUFFRCxPQUFPWCxrQkFBa0JZLFFBQVEsQ0FBQyxHQUFHOzs7Ozs7O0FBR3JGO0FBRUEsaUVBQWV4QixLQUFLQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvamF2aS9kZXYvTWFpbjJNSS9jb21wb25lbnRzL3VpL1RpbWVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgVGltZXJQcm9wcyB7XG4gICAgaW5pdGlhbFNlY29uZHM6IG51bWJlcjtcbiAgICBvblRpbWVVcDogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgVGltZXI6IFJlYWN0LkZDPFRpbWVyUHJvcHM+ID0gKHsgaW5pdGlhbFNlY29uZHMsIG9uVGltZVVwIH0pID0+IHtcbiAgICBjb25zdCBbc2Vjb25kcywgc2V0U2Vjb25kc10gPSB1c2VTdGF0ZShpbml0aWFsU2Vjb25kcyk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoc2Vjb25kcyA8PSAwKSB7XG4gICAgICAgICAgICBvblRpbWVVcCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZXJJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHNldFNlY29uZHMocHJldlNlY29uZHMgPT4gcHJldlNlY29uZHMgLSAxKTtcbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgfSwgW3NlY29uZHMsIG9uVGltZVVwXSk7XG5cbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSBzZWNvbmRzICUgNjA7XG5cbiAgICBjb25zdCBpc1VyZ2VudCA9IHNlY29uZHMgPD0gMzA7XG4gICAgY29uc3QgdGltZUNvbG9yID0gaXNVcmdlbnQgPyAndGV4dC1bdmFyKC0tY29sb3ItZXJyb3IpXScgOiAndGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV0nO1xuICAgIGNvbnN0IHVyZ2VudEFuaW1hdGlvbiA9IGlzVXJnZW50ID8gJ2FuaW1hdGUtcHVsc2UnIDogJyc7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgZm9udC1tb25vIHRleHQtbGcgZm9udC1ib2xkIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMCAke3RpbWVDb2xvcn0gJHt1cmdlbnRBbmltYXRpb259YH1cbiAgICAgICAgICAgIHJvbGU9XCJ0aW1lclwiXG4gICAgICAgICAgICBhcmlhLWxpdmU9e2lzVXJnZW50ID8gJ3BvbGl0ZScgOiAnb2ZmJ31cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake21pbnV0ZXN9IG1pbnV0ZXMgYW5kICR7cmVtYWluaW5nU2Vjb25kc30gc2Vjb25kcyByZW1haW5pbmcke2lzVXJnZW50ID8gJy4gVGltZSBpcyBydW5uaW5nIGxvdyEnIDogJyd9YH1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPXtgZmFyIGZhLWNsb2NrIG1yLTIgJHtpc1VyZ2VudCA/ICd0ZXh0LVt2YXIoLS1jb2xvci1lcnJvcildJyA6ICcnfWB9IGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgIHtTdHJpbmcobWludXRlcykucGFkU3RhcnQoMiwgJzAnKX06e1N0cmluZyhyZW1haW5pbmdTZWNvbmRzKS5wYWRTdGFydCgyLCAnMCcpfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVGltZXI7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIlRpbWVyIiwiaW5pdGlhbFNlY29uZHMiLCJvblRpbWVVcCIsInNlY29uZHMiLCJzZXRTZWNvbmRzIiwidGltZXJJZCIsInNldEludGVydmFsIiwicHJldlNlY29uZHMiLCJjbGVhckludGVydmFsIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInJlbWFpbmluZ1NlY29uZHMiLCJpc1VyZ2VudCIsInRpbWVDb2xvciIsInVyZ2VudEFuaW1hdGlvbiIsImRpdiIsImNsYXNzTmFtZSIsInJvbGUiLCJhcmlhLWxpdmUiLCJhcmlhLWxhYmVsIiwiaSIsImFyaWEtaGlkZGVuIiwiU3RyaW5nIiwicGFkU3RhcnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/ui/Timer.tsx\n");

/***/ }),

/***/ "(ssr)/./components/ui/Toast.tsx":
/*!*********************************!*\
  !*** ./components/ui/Toast.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Toast: () => (/* binding */ Toast),\n/* harmony export */   ToastContainer: () => (/* binding */ ToastContainer),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useToast: () => (/* binding */ useToast)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ Toast,ToastContainer,useToast,default auto */ \n\n// Default durations by type (errors stay longer so users can read them)\nconst DEFAULT_DURATIONS = {\n    success: 3000,\n    info: 4000,\n    warning: 5000,\n    error: 6000\n};\nconst Toast = ({ message, type = 'info', duration, onClose })=>{\n    // Use provided duration or fall back to type-based default\n    const effectiveDuration = duration ?? DEFAULT_DURATIONS[type];\n    const [isVisible, setIsVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Toast.useEffect\": ()=>{\n            if (effectiveDuration > 0) {\n                const timer = setTimeout({\n                    \"Toast.useEffect.timer\": ()=>{\n                        setIsVisible(false);\n                        setTimeout({\n                            \"Toast.useEffect.timer\": ()=>onClose?.()\n                        }[\"Toast.useEffect.timer\"], 300); // Wait for fade out\n                    }\n                }[\"Toast.useEffect.timer\"], effectiveDuration);\n                return ({\n                    \"Toast.useEffect\": ()=>clearTimeout(timer)\n                })[\"Toast.useEffect\"];\n            }\n        }\n    }[\"Toast.useEffect\"], [\n        effectiveDuration,\n        onClose\n    ]);\n    const typeClasses = {\n        success: 'bg-[var(--color-success)] text-white',\n        error: 'bg-[var(--color-error)] text-white',\n        warning: 'bg-[var(--color-warning)] text-white',\n        info: 'bg-[var(--color-info)] text-white'\n    };\n    const icons = {\n        success: 'fa-check-circle',\n        error: 'fa-exclamation-circle',\n        warning: 'fa-exclamation-triangle',\n        info: 'fa-info-circle'\n    };\n    if (!isVisible) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `fixed z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg ${typeClasses[type]} animate-slide-in-right max-w-[calc(100vw-2rem)] sm:max-w-sm`,\n        style: {\n            top: `max(1rem, env(safe-area-inset-top, 1rem))`,\n            right: `max(1rem, env(safe-area-inset-right, 1rem))`\n        },\n        role: \"alert\",\n        \"aria-live\": \"assertive\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                className: `fa-solid ${icons[type]} flex-shrink-0`,\n                \"aria-hidden\": \"true\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 69,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"flex-1 text-sm font-medium\",\n                children: message\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 70,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    setIsVisible(false);\n                    setTimeout(()=>onClose?.(), 300);\n                },\n                className: \"flex-shrink-0 ml-2 hover:opacity-80 transition-opacity\",\n                \"aria-label\": \"Close notification\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                    className: \"fa-solid fa-times\",\n                    \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                    lineNumber: 79,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 71,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n        lineNumber: 60,\n        columnNumber: 5\n    }, undefined);\n};\nconst ToastContainer = ({ toasts, onRemove })=>{\n    if (toasts.length === 0) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed z-50 space-y-2\",\n        style: {\n            top: `max(1rem, env(safe-area-inset-top, 1rem))`,\n            right: `max(1rem, env(safe-area-inset-right, 1rem))`\n        },\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        children: toasts.map((toast)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Toast, {\n                message: toast.message,\n                type: toast.type,\n                onClose: ()=>onRemove(toast.id)\n            }, toast.id, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n                lineNumber: 104,\n                columnNumber: 9\n            }, undefined))\n    }, void 0, false, {\n        fileName: \"/Users/javi/dev/Main2MI/components/ui/Toast.tsx\",\n        lineNumber: 94,\n        columnNumber: 5\n    }, undefined);\n};\n// Hook for managing toasts\nconst useToast = ()=>{\n    const [toasts, setToasts] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const showToast = (message, type = 'info')=>{\n        const id = Math.random().toString(36).substring(7);\n        setToasts((prev)=>[\n                ...prev,\n                {\n                    id,\n                    message,\n                    type\n                }\n            ]);\n        return id;\n    };\n    const removeToast = (id)=>{\n        setToasts((prev)=>prev.filter((toast)=>toast.id !== id));\n    };\n    return {\n        toasts,\n        showToast,\n        removeToast,\n        ToastContainer\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Toast);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBRTtRQUNwRCxPQUFPK0I7SUFDVDtJQUVBLE1BQU1TLGNBQWMsQ0FBQ1Q7UUFDbkJFLFVBQVUsQ0FBQ00sT0FBU0EsS0FBS0UsTUFBTSxDQUFDLENBQUNYLFFBQVVBLE1BQU1DLEVBQUUsS0FBS0E7SUFDMUQ7SUFFQSxPQUFPO1FBQUVOO1FBQVFTO1FBQVdNO1FBQWFoQjtJQUFlO0FBQzFELEVBQUU7QUFFRixpRUFBZTFCLEtBQUtBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXZpL2Rldi9NYWluMk1JL2NvbXBvbmVudHMvdWkvVG9hc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCB0eXBlIFRvYXN0VHlwZSA9ICdzdWNjZXNzJyB8ICdlcnJvcicgfCAnd2FybmluZycgfCAnaW5mbyc7XG5cbi8vIERlZmF1bHQgZHVyYXRpb25zIGJ5IHR5cGUgKGVycm9ycyBzdGF5IGxvbmdlciBzbyB1c2VycyBjYW4gcmVhZCB0aGVtKVxuY29uc3QgREVGQVVMVF9EVVJBVElPTlM6IFJlY29yZDxUb2FzdFR5cGUsIG51bWJlcj4gPSB7XG4gIHN1Y2Nlc3M6IDMwMDAsICAvLyBRdWljayBjb25maXJtYXRpb25cbiAgaW5mbzogNDAwMCwgICAgIC8vIFN0YW5kYXJkIGluZm9cbiAgd2FybmluZzogNTAwMCwgIC8vIEdpdmUgdGltZSB0byByZWFkXG4gIGVycm9yOiA2MDAwLCAgICAvLyBFcnJvcnMgbmVlZCBtb3JlIHRpbWUgdG8gcmVhZC9hY3Rcbn07XG5cbmludGVyZmFjZSBUb2FzdFByb3BzIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0eXBlPzogVG9hc3RUeXBlO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgb25DbG9zZT86ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBUb2FzdDogUmVhY3QuRkM8VG9hc3RQcm9wcz4gPSAoe1xuICBtZXNzYWdlLFxuICB0eXBlID0gJ2luZm8nLFxuICBkdXJhdGlvbixcbiAgb25DbG9zZSxcbn0pID0+IHtcbiAgLy8gVXNlIHByb3ZpZGVkIGR1cmF0aW9uIG9yIGZhbGwgYmFjayB0byB0eXBlLWJhc2VkIGRlZmF1bHRcbiAgY29uc3QgZWZmZWN0aXZlRHVyYXRpb24gPSBkdXJhdGlvbiA/PyBERUZBVUxUX0RVUkFUSU9OU1t0eXBlXTtcbiAgY29uc3QgW2lzVmlzaWJsZSwgc2V0SXNWaXNpYmxlXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVmZmVjdGl2ZUR1cmF0aW9uID4gMCkge1xuICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0SXNWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvbkNsb3NlPy4oKSwgMzAwKTsgLy8gV2FpdCBmb3IgZmFkZSBvdXRcbiAgICAgIH0sIGVmZmVjdGl2ZUR1cmF0aW9uKTtcblxuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuICB9LCBbZWZmZWN0aXZlRHVyYXRpb24sIG9uQ2xvc2VdKTtcbiAgXG4gIGNvbnN0IHR5cGVDbGFzc2VzID0ge1xuICAgIHN1Y2Nlc3M6ICdiZy1bdmFyKC0tY29sb3Itc3VjY2VzcyldIHRleHQtd2hpdGUnLFxuICAgIGVycm9yOiAnYmctW3ZhcigtLWNvbG9yLWVycm9yKV0gdGV4dC13aGl0ZScsXG4gICAgd2FybmluZzogJ2JnLVt2YXIoLS1jb2xvci13YXJuaW5nKV0gdGV4dC13aGl0ZScsXG4gICAgaW5mbzogJ2JnLVt2YXIoLS1jb2xvci1pbmZvKV0gdGV4dC13aGl0ZScsXG4gIH07XG4gIFxuICBjb25zdCBpY29ucyA9IHtcbiAgICBzdWNjZXNzOiAnZmEtY2hlY2stY2lyY2xlJyxcbiAgICBlcnJvcjogJ2ZhLWV4Y2xhbWF0aW9uLWNpcmNsZScsXG4gICAgd2FybmluZzogJ2ZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlJyxcbiAgICBpbmZvOiAnZmEtaW5mby1jaXJjbGUnLFxuICB9O1xuICBcbiAgaWYgKCFpc1Zpc2libGUpIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2BmaXhlZCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHB4LTQgcHktMyByb3VuZGVkLWxnIHNoYWRvdy1sZyAke3R5cGVDbGFzc2VzW3R5cGVdfSBhbmltYXRlLXNsaWRlLWluLXJpZ2h0IG1heC13LVtjYWxjKDEwMHZ3LTJyZW0pXSBzbTptYXgtdy1zbWB9XG4gICAgICBzdHlsZT17e1xuICAgICAgICB0b3A6IGBtYXgoMXJlbSwgZW52KHNhZmUtYXJlYS1pbnNldC10b3AsIDFyZW0pKWAsXG4gICAgICAgIHJpZ2h0OiBgbWF4KDFyZW0sIGVudihzYWZlLWFyZWEtaW5zZXQtcmlnaHQsIDFyZW0pKWAsXG4gICAgICB9fVxuICAgICAgcm9sZT1cImFsZXJ0XCJcbiAgICAgIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiXG4gICAgPlxuICAgICAgPGkgY2xhc3NOYW1lPXtgZmEtc29saWQgJHtpY29uc1t0eXBlXX0gZmxleC1zaHJpbmstMGB9IGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LTEgdGV4dC1zbSBmb250LW1lZGl1bVwiPnttZXNzYWdlfTwvc3Bhbj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgIHNldElzVmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvbkNsb3NlPy4oKSwgMzAwKTtcbiAgICAgICAgfX1cbiAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBtbC0yIGhvdmVyOm9wYWNpdHktODAgdHJhbnNpdGlvbi1vcGFjaXR5XCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIkNsb3NlIG5vdGlmaWNhdGlvblwiXG4gICAgICA+XG4gICAgICAgIDxpIGNsYXNzTmFtZT1cImZhLXNvbGlkIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuaW50ZXJmYWNlIFRvYXN0Q29udGFpbmVyUHJvcHMge1xuICB0b2FzdHM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbWVzc2FnZTogc3RyaW5nOyB0eXBlPzogVG9hc3RUeXBlIH0+O1xuICBvblJlbW92ZTogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBUb2FzdENvbnRhaW5lcjogUmVhY3QuRkM8VG9hc3RDb250YWluZXJQcm9wcz4gPSAoeyB0b2FzdHMsIG9uUmVtb3ZlIH0pID0+IHtcbiAgaWYgKHRvYXN0cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IFxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBzcGFjZS15LTJcIiBcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHRvcDogYG1heCgxcmVtLCBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCwgMXJlbSkpYCxcbiAgICAgICAgcmlnaHQ6IGBtYXgoMXJlbSwgZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodCwgMXJlbSkpYCxcbiAgICAgIH19XG4gICAgICBhcmlhLWxpdmU9XCJwb2xpdGVcIiBcbiAgICAgIGFyaWEtYXRvbWljPVwidHJ1ZVwiXG4gICAgPlxuICAgICAge3RvYXN0cy5tYXAoKHRvYXN0KSA9PiAoXG4gICAgICAgIDxUb2FzdFxuICAgICAgICAgIGtleT17dG9hc3QuaWR9XG4gICAgICAgICAgbWVzc2FnZT17dG9hc3QubWVzc2FnZX1cbiAgICAgICAgICB0eXBlPXt0b2FzdC50eXBlfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IG9uUmVtb3ZlKHRvYXN0LmlkKX1cbiAgICAgICAgLz5cbiAgICAgICkpfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLy8gSG9vayBmb3IgbWFuYWdpbmcgdG9hc3RzXG5leHBvcnQgY29uc3QgdXNlVG9hc3QgPSAoKSA9PiB7XG4gIGNvbnN0IFt0b2FzdHMsIHNldFRvYXN0c10gPSB1c2VTdGF0ZTxBcnJheTx7IGlkOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZT86IFRvYXN0VHlwZSB9Pj4oW10pO1xuICBcbiAgY29uc3Qgc2hvd1RvYXN0ID0gKG1lc3NhZ2U6IHN0cmluZywgdHlwZTogVG9hc3RUeXBlID0gJ2luZm8nKSA9PiB7XG4gICAgY29uc3QgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG4gICAgc2V0VG9hc3RzKChwcmV2KSA9PiBbLi4ucHJldiwgeyBpZCwgbWVzc2FnZSwgdHlwZSB9XSk7XG4gICAgcmV0dXJuIGlkO1xuICB9O1xuICBcbiAgY29uc3QgcmVtb3ZlVG9hc3QgPSAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFRvYXN0cygocHJldikgPT4gcHJldi5maWx0ZXIoKHRvYXN0KSA9PiB0b2FzdC5pZCAhPT0gaWQpKTtcbiAgfTtcbiAgXG4gIHJldHVybiB7IHRvYXN0cywgc2hvd1RvYXN0LCByZW1vdmVUb2FzdCwgVG9hc3RDb250YWluZXIgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRvYXN0O1xuXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIkRFRkFVTFRfRFVSQVRJT05TIiwic3VjY2VzcyIsImluZm8iLCJ3YXJuaW5nIiwiZXJyb3IiLCJUb2FzdCIsIm1lc3NhZ2UiLCJ0eXBlIiwiZHVyYXRpb24iLCJvbkNsb3NlIiwiZWZmZWN0aXZlRHVyYXRpb24iLCJpc1Zpc2libGUiLCJzZXRJc1Zpc2libGUiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJ0eXBlQ2xhc3NlcyIsImljb25zIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJ0b3AiLCJyaWdodCIsInJvbGUiLCJhcmlhLWxpdmUiLCJpIiwiYXJpYS1oaWRkZW4iLCJzcGFuIiwiYnV0dG9uIiwib25DbGljayIsImFyaWEtbGFiZWwiLCJUb2FzdENvbnRhaW5lciIsInRvYXN0cyIsIm9uUmVtb3ZlIiwibGVuZ3RoIiwiYXJpYS1hdG9taWMiLCJtYXAiLCJ0b2FzdCIsImlkIiwidXNlVG9hc3QiLCJzZXRUb2FzdHMiLCJzaG93VG9hc3QiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJwcmV2IiwicmVtb3ZlVG9hc3QiLCJmaWx0ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/ui/Toast.tsx\n");

/***/ }),

/***/ "(ssr)/./components/views/PracticeView.tsx":
/*!*******************************************!*\
  !*** ./components/views/PracticeView.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Mic_Send_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=Mic,Send!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/mic.js\");\n/* harmony import */ var _barrel_optimize_names_Mic_Send_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=Mic,Send!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../types */ \"(ssr)/./types.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../constants */ \"(ssr)/./constants.ts\");\n/* harmony import */ var _hooks_useSpeechRecognition__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useSpeechRecognition */ \"(ssr)/./hooks/useSpeechRecognition.ts\");\n/* harmony import */ var _ui_PatientProfileCard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/PatientProfileCard */ \"(ssr)/./components/ui/PatientProfileCard.tsx\");\n/* harmony import */ var _ui_ChatBubble__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/ChatBubble */ \"(ssr)/./components/ui/ChatBubble.tsx\");\n/* harmony import */ var _ui_Timer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ui/Timer */ \"(ssr)/./components/ui/Timer.tsx\");\n/* harmony import */ var _ui_Button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../ui/Button */ \"(ssr)/./components/ui/Button.tsx\");\n/* harmony import */ var _ui_Card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../ui/Card */ \"(ssr)/./components/ui/Card.tsx\");\n/* harmony import */ var _ui_Toast__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../ui/Toast */ \"(ssr)/./components/ui/Toast.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../contexts/AuthContext */ \"(ssr)/./contexts/AuthContext.tsx\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../lib/supabase */ \"(ssr)/./lib/supabase.ts\");\n/* harmony import */ var _utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/sessionManager */ \"(ssr)/./utils/sessionManager.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SpeechVisualizer = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-end justify-center space-x-1 pl-3 pr-2 h-6\",\n        \"aria-hidden\": \"true\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"w-1 h-2 bg-[var(--color-primary)] rounded-full animate-wavey\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 27,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"w-1 h-4 bg-[var(--color-primary)] rounded-full animate-wavey\",\n                style: {\n                    animationDelay: '0.2s'\n                }\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 28,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"w-1 h-5 bg-[var(--color-primary)] rounded-full animate-wavey\",\n                style: {\n                    animationDelay: '0.4s'\n                }\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 29,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"w-1 h-3 bg-[var(--color-primary)] rounded-full animate-wavey\",\n                style: {\n                    animationDelay: '0.1s'\n                }\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 30,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n        lineNumber: 26,\n        columnNumber: 5\n    }, undefined);\nconst PracticeView = ({ patient, userTier, onFinish, onUpgrade })=>{\n    const [isSessionStarted, setIsSessionStarted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [transcript, setTranscript] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isPatientTyping, setIsPatientTyping] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isEndingSession, setIsEndingSession] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [feedbackError, setFeedbackError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isRetryingFeedback, setIsRetryingFeedback] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [sendError, setSendError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [lastFailedMessage, setLastFailedMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [sessionExpired, setSessionExpired] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_11__.useAuth)();\n    const { showToast, ToastContainer, toasts, removeToast } = (0,_ui_Toast__WEBPACK_IMPORTED_MODULE_10__.useToast)();\n    const { isListening, finalTranscript, interimTranscript, startListening, stopListening, hasSupport, error: micError, setTranscript: setSpeechTranscript } = (0,_hooks_useSpeechRecognition__WEBPACK_IMPORTED_MODULE_4__.useSpeechRecognition)();\n    // Combine final and interim for display (interim shows as live preview)\n    const speechTranscript = finalTranscript + (interimTranscript ? (finalTranscript ? ' ' : '') + interimTranscript : '');\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const textareaRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const autoSaveIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const sessionCheckIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const sessionDuration = userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium ? _constants__WEBPACK_IMPORTED_MODULE_3__.PREMIUM_SESSION_DURATION : _constants__WEBPACK_IMPORTED_MODULE_3__.FREE_SESSION_DURATION;\n    // Restore auto-saved session on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PracticeView.useEffect\": ()=>{\n            const savedSession = (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.getAutoSavedSession)();\n            if (savedSession && savedSession.transcript.length > 0) {\n                const shouldRestore = window.confirm('We found a saved practice session. Would you like to restore it?');\n                if (shouldRestore) {\n                    setTranscript(savedSession.transcript);\n                    setIsSessionStarted(true);\n                } else {\n                    (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.clearAutoSavedSessions)();\n                }\n            }\n            // Cleanup on unmount\n            return ({\n                \"PracticeView.useEffect\": ()=>{\n                    if (autoSaveIntervalRef.current) {\n                        clearInterval(autoSaveIntervalRef.current);\n                    }\n                    if (sessionCheckIntervalRef.current) {\n                        clearInterval(sessionCheckIntervalRef.current);\n                    }\n                }\n            })[\"PracticeView.useEffect\"];\n        }\n    }[\"PracticeView.useEffect\"], []);\n    // Warn user before leaving the page if session is in progress\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PracticeView.useEffect\": ()=>{\n            const hasUnsavedSession = isSessionStarted && transcript.length > 0 && !isEndingSession;\n            const handleBeforeUnload = {\n                \"PracticeView.useEffect.handleBeforeUnload\": (e)=>{\n                    if (hasUnsavedSession) {\n                        // Auto-save before leaving\n                        (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.autoSaveSession)({\n                            transcript,\n                            patient,\n                            timestamp: Date.now()\n                        });\n                        e.preventDefault();\n                        e.returnValue = 'You have an active practice session. Are you sure you want to leave?';\n                        return e.returnValue;\n                    }\n                }\n            }[\"PracticeView.useEffect.handleBeforeUnload\"];\n            const handlePopState = {\n                \"PracticeView.useEffect.handlePopState\": (e)=>{\n                    if (hasUnsavedSession) {\n                        const shouldLeave = window.confirm('You have an active practice session. Your progress will be saved. Are you sure you want to leave?');\n                        if (!shouldLeave) {\n                            // Prevent navigation by pushing the current state back\n                            window.history.pushState({\n                                view: 'Practice'\n                            }, '', '/practice');\n                        } else {\n                            // Save before leaving\n                            (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.autoSaveSession)({\n                                transcript,\n                                patient,\n                                timestamp: Date.now()\n                            });\n                        }\n                    }\n                }\n            }[\"PracticeView.useEffect.handlePopState\"];\n            window.addEventListener('beforeunload', handleBeforeUnload);\n            window.addEventListener('popstate', handlePopState);\n            return ({\n                \"PracticeView.useEffect\": ()=>{\n                    window.removeEventListener('beforeunload', handleBeforeUnload);\n                    window.removeEventListener('popstate', handlePopState);\n                }\n            })[\"PracticeView.useEffect\"];\n        }\n    }[\"PracticeView.useEffect\"], [\n        isSessionStarted,\n        transcript,\n        patient,\n        isEndingSession\n    ]);\n    // Auto-save session data every 30 seconds\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PracticeView.useEffect\": ()=>{\n            if (isSessionStarted && transcript.length > 0) {\n                autoSaveIntervalRef.current = setInterval({\n                    \"PracticeView.useEffect\": ()=>{\n                        (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.autoSaveSession)({\n                            transcript,\n                            patient,\n                            timestamp: Date.now()\n                        });\n                    }\n                }[\"PracticeView.useEffect\"], 30000); // Auto-save every 30 seconds\n                return ({\n                    \"PracticeView.useEffect\": ()=>{\n                        if (autoSaveIntervalRef.current) {\n                            clearInterval(autoSaveIntervalRef.current);\n                        }\n                    }\n                })[\"PracticeView.useEffect\"];\n            }\n        }\n    }[\"PracticeView.useEffect\"], [\n        isSessionStarted,\n        transcript,\n        patient\n    ]);\n    // Check session validity every 2 minutes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PracticeView.useEffect\": ()=>{\n            if (isSessionStarted && user) {\n                sessionCheckIntervalRef.current = setInterval({\n                    \"PracticeView.useEffect\": async ()=>{\n                        const isValid = await (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.isSessionValid)();\n                        if (!isValid) {\n                            setSessionExpired(true);\n                            if (sessionCheckIntervalRef.current) {\n                                clearInterval(sessionCheckIntervalRef.current);\n                            }\n                        }\n                    }\n                }[\"PracticeView.useEffect\"], 120000); // Check every 2 minutes\n                return ({\n                    \"PracticeView.useEffect\": ()=>{\n                        if (sessionCheckIntervalRef.current) {\n                            clearInterval(sessionCheckIntervalRef.current);\n                        }\n                    }\n                })[\"PracticeView.useEffect\"];\n            }\n        }\n    }[\"PracticeView.useEffect\"], [\n        isSessionStarted,\n        user\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PracticeView.useEffect\": ()=>{\n            if (chatContainerRef.current) {\n                chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n            }\n        }\n    }[\"PracticeView.useEffect\"], [\n        transcript,\n        isPatientTyping\n    ]);\n    // Auto-resize textarea\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PracticeView.useEffect\": ()=>{\n            const textarea = textareaRef.current;\n            if (textarea) {\n                textarea.style.height = 'auto'; // Reset height to shrink if text is deleted\n                const scrollHeight = textarea.scrollHeight;\n                textarea.style.height = `${scrollHeight}px`; // Set height to content height\n            }\n        }\n    }[\"PracticeView.useEffect\"], [\n        speechTranscript\n    ]);\n    /**\n     * Get patient response from Edge Function\n     */ const getPatientResponseFromEdgeFunction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PracticeView.useCallback[getPatientResponseFromEdgeFunction]\": async (message)=>{\n            // Check session validity before making request\n            const authToken = await (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.getValidAuthToken)();\n            if (!authToken) {\n                setSessionExpired(true);\n                throw new Error('Your session has expired. Please refresh the page and log in again.');\n            }\n            // Get Supabase URL and construct Edge Function URL\n            const supabaseUrl = \"https://alszwgqoicjgfrhecscj.supabase.co\";\n            if (!supabaseUrl) {\n                throw new Error('Supabase URL not configured');\n            }\n            const functionsUrl = `${supabaseUrl}/functions/v1/patient-response`;\n            // Require authentication\n            if (!(0,_lib_supabase__WEBPACK_IMPORTED_MODULE_12__.isSupabaseConfigured)()) {\n                throw new Error('Supabase is not configured. Please check your environment variables.');\n            }\n            if (!user) {\n                throw new Error('You must be logged in to chat with the patient. Please log in and try again.');\n            }\n            // Prepare request with required Authorization header\n            const headers = {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${authToken}`\n            };\n            // Make request to Edge Function\n            const response = await fetch(functionsUrl, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify({\n                    transcript,\n                    patient,\n                    message\n                })\n            });\n            // Handle errors\n            if (!response.ok) {\n                const errorData = await response.json().catch({\n                    \"PracticeView.useCallback[getPatientResponseFromEdgeFunction]\": ()=>({\n                            error: 'Unknown error'\n                        })\n                }[\"PracticeView.useCallback[getPatientResponseFromEdgeFunction]\"]);\n                const errorMessage = errorData.error || `Failed to get patient response (${response.status})`;\n                // Map HTTP status codes to user-friendly messages\n                if (response.status === 401) {\n                    throw new Error('Your session has expired. Please refresh the page and try again.');\n                } else if (response.status === 429) {\n                    throw new Error('AI service is busy. Please try again in a moment.');\n                } else if (response.status === 504) {\n                    throw new Error('Patient response timed out. Please try again.');\n                } else if (response.status === 500) {\n                    throw new Error('AI service error. Please try again later.');\n                } else {\n                    throw new Error(errorMessage);\n                }\n            }\n            // Parse and return response\n            const data = await response.json();\n            return data.response;\n        }\n    }[\"PracticeView.useCallback[getPatientResponseFromEdgeFunction]\"], [\n        transcript,\n        patient,\n        user\n    ]);\n    const handleSendMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PracticeView.useCallback[handleSendMessage]\": async (text, isRetry = false)=>{\n            // Clear any previous send error\n            setSendError(null);\n            setLastFailedMessage(null);\n            if (!text.trim()) return;\n            if (isPatientTyping) {\n                setSendError('Please wait for the patient to respond.');\n                return;\n            }\n            // Only add user message if not a retry (retry means we already have the message)\n            if (!isRetry) {\n                const newUserMessage = {\n                    author: 'user',\n                    text\n                };\n                setTranscript({\n                    \"PracticeView.useCallback[handleSendMessage]\": (prev)=>[\n                            ...prev,\n                            newUserMessage\n                        ]\n                }[\"PracticeView.useCallback[handleSendMessage]\"]);\n            }\n            setIsPatientTyping(true);\n            try {\n                // Get patient response from Edge Function\n                const patientResponse = await getPatientResponseFromEdgeFunction(text);\n                const newPatientMessage = {\n                    author: 'patient',\n                    text: patientResponse\n                };\n                setTranscript({\n                    \"PracticeView.useCallback[handleSendMessage]\": (prev)=>[\n                            ...prev,\n                            newPatientMessage\n                        ]\n                }[\"PracticeView.useCallback[handleSendMessage]\"]);\n                // Auto-save after successful response\n                (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.autoSaveSession)({\n                    transcript: [\n                        ...transcript,\n                        {\n                            author: 'user',\n                            text\n                        },\n                        {\n                            author: 'patient',\n                            text: patientResponse\n                        }\n                    ],\n                    patient,\n                    timestamp: Date.now()\n                });\n            } catch (error) {\n                console.error('[PracticeView] Failed to get patient response:', error);\n                const errorMessage = error instanceof Error ? error.message : 'Failed to get patient response.';\n                // Check if it's a network error\n                const isNetworkError = errorMessage.includes('Failed to fetch') || errorMessage.includes('NetworkError') || errorMessage.includes('network');\n                if (isNetworkError) {\n                    setSendError('Network connection lost. Check your connection and tap Retry.');\n                } else {\n                    setSendError(errorMessage);\n                }\n                // Store the failed message for retry\n                setLastFailedMessage(text);\n                // Auto-save transcript on error (don't add fallback message, let user retry)\n                (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.autoSaveSession)({\n                    transcript: [\n                        ...transcript,\n                        {\n                            author: 'user',\n                            text\n                        }\n                    ],\n                    patient,\n                    timestamp: Date.now()\n                });\n            } finally{\n                setIsPatientTyping(false);\n            }\n        }\n    }[\"PracticeView.useCallback[handleSendMessage]\"], [\n        getPatientResponseFromEdgeFunction,\n        isPatientTyping,\n        transcript,\n        patient\n    ]);\n    const handleRetryLastMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PracticeView.useCallback[handleRetryLastMessage]\": ()=>{\n            if (lastFailedMessage) {\n                handleSendMessage(lastFailedMessage, true);\n            }\n        }\n    }[\"PracticeView.useCallback[handleRetryLastMessage]\"], [\n        lastFailedMessage,\n        handleSendMessage\n    ]);\n    const handleVoiceSend = ()=>{\n        // Clear any previous send error when user interacts with mic\n        setSendError(null);\n        if (isListening) {\n            stopListening();\n        } else {\n            startListening();\n        }\n    };\n    const handleTextSend = ()=>{\n        if (!speechTranscript.trim()) return;\n        if (isListening) {\n            stopListening();\n        }\n        const transcriptToSend = speechTranscript;\n        handleSendMessage(transcriptToSend);\n        setSpeechTranscript('');\n    };\n    /**\n     * Call the analyze-session Edge Function to get feedback\n     * \n     * Uses dual-run wrapper for Strangler Fig migration:\n     * - Calls both legacy and v2 functions in parallel\n     * - Compares outputs and tracks semantic-equal matches\n     * - Returns legacy output (for now) while monitoring drift\n     */ const getFeedbackFromEdgeFunction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PracticeView.useCallback[getFeedbackFromEdgeFunction]\": async ()=>{\n            // Check session validity before making request\n            const authToken = await (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.getValidAuthToken)();\n            if (!authToken) {\n                setSessionExpired(true);\n                throw new Error('Your session has expired. Please refresh the page and log in again.');\n            }\n            // Get Supabase URL and construct Edge Function URL\n            const supabaseUrl = \"https://alszwgqoicjgfrhecscj.supabase.co\";\n            if (!supabaseUrl) {\n                throw new Error('Supabase URL not configured');\n            }\n            // Use dual-run wrapper for Strangler Fig migration tracking\n            const functionsUrl = `${supabaseUrl}/functions/v1/dual-run-analyze-session`;\n            // Require authentication\n            if (!(0,_lib_supabase__WEBPACK_IMPORTED_MODULE_12__.isSupabaseConfigured)()) {\n                throw new Error('Supabase is not configured. Please check your environment variables.');\n            }\n            if (!user) {\n                throw new Error('You must be logged in to generate feedback. Please log in and try again.');\n            }\n            // Prepare request with required Authorization header\n            const headers = {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${authToken}`\n            };\n            // Make request to Edge Function\n            const response = await fetch(functionsUrl, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify({\n                    transcript,\n                    patient\n                })\n            });\n            // Handle errors\n            if (!response.ok) {\n                const errorData = await response.json().catch({\n                    \"PracticeView.useCallback[getFeedbackFromEdgeFunction]\": ()=>({\n                            error: 'Unknown error'\n                        })\n                }[\"PracticeView.useCallback[getFeedbackFromEdgeFunction]\"]);\n                const errorMessage = errorData.error || `Failed to analyze session (${response.status})`;\n                // Map HTTP status codes to user-friendly messages\n                if (response.status === 401) {\n                    throw new Error('Your session has expired. Please refresh the page and try again.');\n                } else if (response.status === 429) {\n                    throw new Error('AI service is busy. Please try again in a moment.');\n                } else if (response.status === 504) {\n                    throw new Error('Analysis timed out. Please try again.');\n                } else if (response.status === 500) {\n                    throw new Error('AI service error. Please try again later.');\n                } else {\n                    throw new Error(errorMessage);\n                }\n            }\n            // Parse and return feedback\n            const feedback = await response.json();\n            return feedback;\n        }\n    }[\"PracticeView.useCallback[getFeedbackFromEdgeFunction]\"], [\n        transcript,\n        patient,\n        user\n    ]);\n    const handleEndSession = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PracticeView.useCallback[handleEndSession]\": async ()=>{\n            setIsEndingSession(true);\n            setFeedbackError(null);\n            // Show success toast immediately\n            showToast('Session complete! Generating your feedback...', 'success');\n            // Clear auto-save on successful completion\n            (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.clearAutoSavedSessions)();\n            try {\n                const feedback = await getFeedbackFromEdgeFunction();\n                setIsEndingSession(false);\n                onFinish(transcript, feedback);\n            } catch (error) {\n                console.error('[PracticeView] Failed to get feedback:', error);\n                setIsEndingSession(false);\n                const errorMessage = error instanceof Error ? error.message : 'Failed to generate feedback. Please try again.';\n                setFeedbackError(errorMessage);\n                // If session expired, auto-save before showing error\n                if (errorMessage.includes('session has expired')) {\n                    (0,_utils_sessionManager__WEBPACK_IMPORTED_MODULE_13__.autoSaveSession)({\n                        transcript,\n                        patient,\n                        timestamp: Date.now()\n                    });\n                }\n            }\n        }\n    }[\"PracticeView.useCallback[handleEndSession]\"], [\n        transcript,\n        getFeedbackFromEdgeFunction,\n        onFinish,\n        patient,\n        showToast\n    ]);\n    const handleRetryFeedback = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PracticeView.useCallback[handleRetryFeedback]\": async ()=>{\n            setIsRetryingFeedback(true);\n            setFeedbackError(null);\n            try {\n                const feedback = await getFeedbackFromEdgeFunction();\n                setIsRetryingFeedback(false);\n                onFinish(transcript, feedback);\n            } catch (error) {\n                console.error('[PracticeView] Retry failed:', error);\n                setIsRetryingFeedback(false);\n                const errorMessage = error instanceof Error ? error.message : 'Failed to generate feedback. Please try again.';\n                setFeedbackError(errorMessage);\n            }\n        }\n    }[\"PracticeView.useCallback[handleRetryFeedback]\"], [\n        transcript,\n        getFeedbackFromEdgeFunction,\n        onFinish\n    ]);\n    if (!isSessionStarted) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-transparent flex flex-col items-center justify-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_PatientProfileCard__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                    patient: patient,\n                    userTier: userTier,\n                    onUpgrade: onUpgrade\n                }, void 0, false, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                    lineNumber: 464,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                    onClick: ()=>setIsSessionStarted(true),\n                    variant: \"primary\",\n                    size: \"lg\",\n                    className: \"mt-8 px-12 py-4 text-2xl shadow-[4px_4px_0px_0px_rgba(0,0,0,0.8)] border-2 border-black\",\n                    children: \"Begin Session\"\n                }, void 0, false, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                    lineNumber: 465,\n                    columnNumber: 17\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n            lineNumber: 463,\n            columnNumber: 13\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-screen bg-transparent\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ToastContainer, {\n                toasts: toasts,\n                onRemove: removeToast\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 479,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex justify-between items-center p-4 border-b-2 border-black bg-white\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 min-w-0\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"font-bold text-lg text-[var(--color-text-primary)] truncate\",\n                                children: [\n                                    \"with \",\n                                    patient.name\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 482,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-xs text-[var(--color-text-muted)]\",\n                                children: transcript.length === 0 ? 'Start the conversation...' : `${transcript.length} message${transcript.length !== 1 ? 's' : ''} exchanged`\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 484,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 481,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center space-x-3 flex-shrink-0\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Timer__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                initialSeconds: sessionDuration,\n                                onTimeUp: handleEndSession\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 489,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleEndSession,\n                                disabled: isEndingSession,\n                                className: `px-4 min-h-[var(--touch-target-min)] text-white font-semibold border-2 border-black disabled:opacity-50 transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 ${isEndingSession ? 'bg-red-600' : 'bg-red-500 hover:bg-red-600'}`,\n                                children: isEndingSession ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 501,\n                                            columnNumber: 33\n                                        }, undefined),\n                                        \"Ending...\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 500,\n                                    columnNumber: 29\n                                }, undefined) : 'End Session'\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 490,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 488,\n                        columnNumber: 17\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 480,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: chatContainerRef,\n                className: \"flex-1 overflow-y-auto p-4 bg-white relative\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4\",\n                    children: [\n                        transcript.length === 0 && !isPatientTyping && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col items-center justify-center h-full min-h-[200px] text-center text-[var(--color-text-muted)]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                    className: \"fa-solid fa-comments text-4xl mb-3 opacity-40\",\n                                    \"aria-hidden\": \"true\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 515,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-sm\",\n                                    children: \"Say something to start the conversation\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 516,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                            lineNumber: 514,\n                            columnNumber: 25\n                        }, undefined),\n                        transcript.map((msg, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_ChatBubble__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                message: msg\n                            }, index, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 520,\n                                columnNumber: 25\n                            }, undefined)),\n                        isPatientTyping && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-slide-fade-in pt-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_ChatBubble__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                message: {\n                                    author: 'patient',\n                                    text: '...'\n                                },\n                                isTyping: true\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 524,\n                                columnNumber: 29\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                            lineNumber: 523,\n                            columnNumber: 25\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                    lineNumber: 512,\n                    columnNumber: 17\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 511,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-t-2 border-black bg-[var(--color-bg-accent)]\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"sr-only\",\n                        role: \"status\",\n                        \"aria-live\": \"polite\",\n                        \"aria-atomic\": \"true\",\n                        children: isListening ? 'Recording started. Speak now.' : ''\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 532,\n                        columnNumber: 17\n                    }, undefined),\n                    sessionExpired && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_9__.Card, {\n                        variant: \"accent\",\n                        padding: \"sm\",\n                        className: \"mb-3 border-l-4 border-[var(--color-error)]\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col gap-2\",\n                            role: \"alert\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2 text-[var(--color-error)] text-sm font-semibold\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                            className: \"fa fa-exclamation-circle\",\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 539,\n                                            columnNumber: 33\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"Your session has expired\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 540,\n                                            columnNumber: 33\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 538,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-[var(--color-text-secondary)]\",\n                                    children: \"Your practice session has been saved. Please refresh the page and log in again to continue.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 542,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                                    variant: \"primary\",\n                                    size: \"sm\",\n                                    onClick: ()=>window.location.reload(),\n                                    className: \"mt-2\",\n                                    children: \"Refresh & Log In\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 545,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                            lineNumber: 537,\n                            columnNumber: 25\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 536,\n                        columnNumber: 21\n                    }, undefined),\n                    (micError || sendError) && !sessionExpired && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_9__.Card, {\n                        variant: \"accent\",\n                        padding: \"sm\",\n                        className: \"mb-3 border-l-4 border-[var(--color-error)]\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-start justify-between gap-2\",\n                            role: \"alert\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-start gap-2 text-[var(--color-error)] text-sm flex-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                            className: \"fa fa-exclamation-circle mt-0.5\",\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 560,\n                                            columnNumber: 33\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: micError || sendError\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 561,\n                                            columnNumber: 33\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 559,\n                                    columnNumber: 29\n                                }, undefined),\n                                sendError && lastFailedMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                                    variant: \"secondary\",\n                                    size: \"sm\",\n                                    onClick: handleRetryLastMessage,\n                                    disabled: isPatientTyping,\n                                    icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        className: \"fa-solid fa-redo\",\n                                        \"aria-hidden\": \"true\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 569,\n                                        columnNumber: 43\n                                    }, void 0),\n                                    children: \"Retry\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 564,\n                                    columnNumber: 33\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                            lineNumber: 558,\n                            columnNumber: 25\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 557,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-end space-x-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 flex items-end bg-white border-2 border-black focus-within:ring-2 focus-within:ring-[var(--color-primary)] transition-shadow duration-200\",\n                                children: [\n                                    isListening && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SpeechVisualizer, {}, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 579,\n                                        columnNumber: 41\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        ref: textareaRef,\n                                        value: speechTranscript,\n                                        onChange: (e)=>setSpeechTranscript(e.target.value),\n                                        placeholder: isListening ? \"Listening...\" : \"Type your response or use the microphone...\",\n                                        className: \"flex-1 p-3 bg-transparent focus:outline-none resize-none w-full max-h-56 overflow-y-auto text-[var(--color-text-primary)]\",\n                                        rows: 2,\n                                        onKeyDown: (e)=>{\n                                            if (e.key === 'Enter' && !e.shiftKey) {\n                                                e.preventDefault();\n                                                handleTextSend();\n                                            }\n                                        },\n                                        onFocus: ()=>{\n                                            // Scroll textarea into view when mobile keyboard opens\n                                            setTimeout(()=>{\n                                                textareaRef.current?.scrollIntoView({\n                                                    behavior: 'smooth',\n                                                    block: 'center'\n                                                });\n                                            }, 300);\n                                        },\n                                        disabled: isPatientTyping,\n                                        readOnly: isListening,\n                                        style: {\n                                            caretColor: isListening ? 'transparent' : 'auto'\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 580,\n                                        columnNumber: 25\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 578,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative group flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleVoiceSend,\n                                        disabled: isPatientTyping,\n                                        className: `w-[var(--touch-target-min)] h-[var(--touch-target-min)] flex items-center justify-center bg-white text-[var(--color-text-primary)] border-2 border-black hover:bg-[var(--color-bg-accent)] disabled:bg-[var(--color-neutral-300)] disabled:text-[var(--color-neutral-500)] disabled:border-[var(--color-neutral-400)] transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary)] focus-visible:ring-offset-2 ${isListening ? 'bg-[var(--color-error-light)] text-[var(--color-error)]' : ''}`,\n                                        \"aria-label\": isListening ? 'Stop recording' : 'Start recording',\n                                        \"aria-pressed\": isListening,\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Mic_Send_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                            size: 20,\n                                            className: isListening ? 'text-[var(--color-error)]' : 'text-[var(--color-text-primary)]',\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 615,\n                                            columnNumber: 29\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 606,\n                                        columnNumber: 25\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-3 py-1.5 bg-[var(--color-neutral-800)] text-white text-xs font-semibold shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10 whitespace-nowrap rounded\",\n                                        children: [\n                                            isListening ? 'Stop Recording' : 'Start Recording',\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"absolute text-[var(--color-neutral-800)] h-2 w-full left-0 top-full\",\n                                                x: \"0px\",\n                                                y: \"0px\",\n                                                viewBox: \"0 0 255 255\",\n                                                xmlSpace: \"preserve\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"polygon\", {\n                                                    className: \"fill-current\",\n                                                    points: \"0,0 127.5,127.5 255,0\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                                    lineNumber: 623,\n                                                    columnNumber: 172\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                                lineNumber: 623,\n                                                columnNumber: 29\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 621,\n                                        columnNumber: 25\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 605,\n                                columnNumber: 21\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleTextSend,\n                                disabled: isPatientTyping || !speechTranscript.trim(),\n                                className: \"w-[var(--touch-target-min)] h-[var(--touch-target-min)] flex items-center justify-center bg-[var(--color-primary)] text-white border-2 border-black hover:bg-[var(--color-primary-dark)] disabled:bg-[var(--color-neutral-300)] disabled:text-[var(--color-neutral-500)] disabled:border-[var(--color-neutral-400)] disabled:cursor-not-allowed transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary)] focus-visible:ring-offset-2\",\n                                \"aria-label\": \"Send message\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Mic_Send_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                    size: 20,\n                                    className: \"text-white\",\n                                    \"aria-hidden\": \"true\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 633,\n                                    columnNumber: 25\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 627,\n                                columnNumber: 21\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 577,\n                        columnNumber: 17\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 530,\n                columnNumber: 13\n            }, undefined),\n            (isEndingSession || isRetryingFeedback) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-white bg-opacity-80 flex flex-col items-center justify-center rounded-2xl z-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-16 h-16 border-4 border-[var(--color-primary)] border-t-transparent rounded-full animate-spin\"\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 639,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-4 text-lg font-semibold text-[var(--color-text-primary)]\",\n                        children: isRetryingFeedback ? 'Retrying feedback generation...' : 'Generating your feedback...'\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 640,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 638,\n                columnNumber: 18\n            }, undefined),\n            feedbackError && !isEndingSession && !isRetryingFeedback && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-white bg-opacity-95 flex flex-col items-center justify-center rounded-2xl z-10 p-6\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Card__WEBPACK_IMPORTED_MODULE_9__.Card, {\n                    variant: \"elevated\",\n                    padding: \"lg\",\n                    className: \"max-w-md w-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mb-4 flex justify-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-16 h-16 rounded-full bg-[var(--color-error-light)] flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        className: \"fa-solid fa-exclamation-triangle text-2xl text-[var(--color-error)]\",\n                                        \"aria-hidden\": \"true\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 652,\n                                        columnNumber: 37\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                    lineNumber: 651,\n                                    columnNumber: 33\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 650,\n                                columnNumber: 29\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-xl font-bold text-[var(--color-text-primary)] mb-2\",\n                                children: \"Feedback Generation Failed\"\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 655,\n                                columnNumber: 29\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[var(--color-text-secondary)] mb-6\",\n                                children: feedbackError\n                            }, void 0, false, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 658,\n                                columnNumber: 29\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                                        onClick: handleRetryFeedback,\n                                        variant: \"primary\",\n                                        size: \"lg\",\n                                        fullWidth: true,\n                                        disabled: isRetryingFeedback,\n                                        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                            className: \"fa-solid fa-redo\",\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                            lineNumber: 668,\n                                            columnNumber: 43\n                                        }, void 0),\n                                        children: isRetryingFeedback ? 'Retrying...' : 'Retry Feedback Generation'\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 662,\n                                        columnNumber: 33\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ui_Button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                                        onClick: ()=>{\n                                            // Create a fallback feedback object\n                                            const fallbackFeedback = {\n                                                empathyScore: 0,\n                                                empathyBreakdown: 'Feedback generation failed. Your practice session was still valuable!',\n                                                whatWentRight: 'We encountered an issue generating detailed feedback, but every practice session helps you improve your MI skills.',\n                                                areasForGrowth: 'Please try another session to receive detailed feedback.',\n                                                skillsDetected: [],\n                                                skillCounts: {},\n                                                nextFocus: 'Try another practice session to receive detailed feedback.',\n                                                analysisStatus: 'error',\n                                                analysisMessage: feedbackError\n                                            };\n                                            setFeedbackError(null);\n                                            onFinish(transcript, fallbackFeedback);\n                                        },\n                                        variant: \"secondary\",\n                                        size: \"lg\",\n                                        fullWidth: true,\n                                        children: \"Continue Without Feedback\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                        lineNumber: 672,\n                                        columnNumber: 33\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                                lineNumber: 661,\n                                columnNumber: 29\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                        lineNumber: 649,\n                        columnNumber: 25\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                    lineNumber: 648,\n                    columnNumber: 21\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n                lineNumber: 647,\n                columnNumber: 17\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/components/views/PracticeView.tsx\",\n        lineNumber: 478,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PracticeView);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL3ZpZXdzL1ByYWN0aWNlVmlldy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFd0U7QUFDL0I7QUFDcUM7QUFDSTtBQUNWO0FBQ2Q7QUFDaEI7QUFDVjtBQUNNO0FBQ0o7QUFDSztBQUNjO0FBQ3dCO0FBQ2dFO0FBUzdJLE1BQU13QixtQkFBNkIsa0JBQy9CLDhEQUFDQztRQUFJQyxXQUFVO1FBQXdEQyxlQUFZOzswQkFDL0UsOERBQUNDO2dCQUFLRixXQUFVOzs7Ozs7MEJBQ2hCLDhEQUFDRTtnQkFBS0YsV0FBVTtnQkFBK0RHLE9BQU87b0JBQUVDLGdCQUFnQjtnQkFBTzs7Ozs7OzBCQUMvRyw4REFBQ0Y7Z0JBQUtGLFdBQVU7Z0JBQStERyxPQUFPO29CQUFFQyxnQkFBZ0I7Z0JBQU87Ozs7OzswQkFDL0csOERBQUNGO2dCQUFLRixXQUFVO2dCQUErREcsT0FBTztvQkFBRUMsZ0JBQWdCO2dCQUFPOzs7Ozs7Ozs7Ozs7QUFJdkgsTUFBTUMsZUFBNEMsQ0FBQyxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxTQUFTLEVBQUU7SUFDekYsTUFBTSxDQUFDQyxrQkFBa0JDLG9CQUFvQixHQUFHcEMsK0NBQVFBLENBQUM7SUFDekQsTUFBTSxDQUFDcUMsWUFBWUMsY0FBYyxHQUFHdEMsK0NBQVFBLENBQWdCLEVBQUU7SUFDOUQsTUFBTSxDQUFDdUMsaUJBQWlCQyxtQkFBbUIsR0FBR3hDLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQ3lDLGlCQUFpQkMsbUJBQW1CLEdBQUcxQywrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUMyQyxlQUFlQyxpQkFBaUIsR0FBRzVDLCtDQUFRQSxDQUFnQjtJQUNsRSxNQUFNLENBQUM2QyxvQkFBb0JDLHNCQUFzQixHQUFHOUMsK0NBQVFBLENBQUM7SUFDN0QsTUFBTSxDQUFDK0MsV0FBV0MsYUFBYSxHQUFHaEQsK0NBQVFBLENBQWdCO0lBQzFE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QVU7MENBQ1JrQjs7Ozs7OzBDQUVMLDhEQUFDbkI7Z0NBQUlDLFdBQVU7O2tEQUNYLDhEQUFDWiw4Q0FBTUE7d0NBQ0hvSSxTQUFTRDt3Q0FDVEUsU0FBUTt3Q0FDUkMsTUFBSzt3Q0FDTDhDLFNBQVM7d0NBQ1R0QyxVQUFVOUc7d0NBQ1YySCxvQkFBTSw4REFBQ1g7NENBQUVwSSxXQUFVOzRDQUFtQkMsZUFBWTs7Ozs7O2tEQUVqRG1CLHFCQUFxQixnQkFBZ0I7Ozs7OztrREFFMUMsOERBQUNoQyw4Q0FBTUE7d0NBQ0hvSSxTQUFTOzRDQUNMLG9DQUFvQzs0Q0FDcEMsTUFBTWlELG1CQUE2QjtnREFDL0JDLGNBQWM7Z0RBQ2RDLGtCQUFrQjtnREFDbEJDLGVBQWU7Z0RBQ2ZDLGdCQUFnQjtnREFDaEJDLGdCQUFnQixFQUFFO2dEQUNsQkMsYUFBYSxDQUFDO2dEQUNkQyxXQUFXO2dEQUNYQyxnQkFBZ0I7Z0RBQ2hCQyxpQkFBaUJoSzs0Q0FDckI7NENBQ0FDLGlCQUFpQjs0Q0FDakJYLFNBQVNJLFlBQVk2Sjt3Q0FDekI7d0NBQ0FoRCxTQUFRO3dDQUNSQyxNQUFLO3dDQUNMOEMsU0FBUztrREFDWjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVqQztBQUVBLGlFQUFlbkssWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2phdmkvZGV2L01haW4yTUkvY29tcG9uZW50cy92aWV3cy9QcmFjdGljZVZpZXcudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNaWMsIFNlbmQgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgUGF0aWVudFByb2ZpbGUsIFVzZXJUaWVyLCBDaGF0TWVzc2FnZSwgRmVlZGJhY2sgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBGUkVFX1NFU1NJT05fRFVSQVRJT04sIFBSRU1JVU1fU0VTU0lPTl9EVVJBVElPTiB9IGZyb20gJy4uLy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyB1c2VTcGVlY2hSZWNvZ25pdGlvbiB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZVNwZWVjaFJlY29nbml0aW9uJztcbmltcG9ydCBQYXRpZW50UHJvZmlsZUNhcmQgZnJvbSAnLi4vdWkvUGF0aWVudFByb2ZpbGVDYXJkJztcbmltcG9ydCBDaGF0QnViYmxlIGZyb20gJy4uL3VpL0NoYXRCdWJibGUnO1xuaW1wb3J0IFRpbWVyIGZyb20gJy4uL3VpL1RpbWVyJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4uL3VpL0J1dHRvbic7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vdWkvQ2FyZCc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJy4uL3VpL1RvYXN0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuLi8uLi9jb250ZXh0cy9BdXRoQ29udGV4dCc7XG5pbXBvcnQgeyBnZXRTdXBhYmFzZUNsaWVudCwgaXNTdXBhYmFzZUNvbmZpZ3VyZWQgfSBmcm9tICcuLi8uLi9saWIvc3VwYWJhc2UnO1xuaW1wb3J0IHsgZ2V0VmFsaWRBdXRoVG9rZW4sIGF1dG9TYXZlU2Vzc2lvbiwgZ2V0QXV0b1NhdmVkU2Vzc2lvbiwgY2xlYXJBdXRvU2F2ZWRTZXNzaW9ucywgaXNTZXNzaW9uVmFsaWQgfSBmcm9tICcuLi8uLi91dGlscy9zZXNzaW9uTWFuYWdlcic7XG5cbmludGVyZmFjZSBQcmFjdGljZVZpZXdQcm9wcyB7XG4gICAgcGF0aWVudDogUGF0aWVudFByb2ZpbGU7XG4gICAgdXNlclRpZXI6IFVzZXJUaWVyO1xuICAgIG9uRmluaXNoOiAodHJhbnNjcmlwdDogQ2hhdE1lc3NhZ2VbXSwgZmVlZGJhY2s6IEZlZWRiYWNrKSA9PiB2b2lkO1xuICAgIG9uVXBncmFkZT86ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFNwZWVjaFZpc3VhbGl6ZXI6IFJlYWN0LkZDID0gKCkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1lbmQganVzdGlmeS1jZW50ZXIgc3BhY2UteC0xIHBsLTMgcHItMiBoLTZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy0xIGgtMiBiZy1bdmFyKC0tY29sb3ItcHJpbWFyeSldIHJvdW5kZWQtZnVsbCBhbmltYXRlLXdhdmV5XCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTEgaC00IGJnLVt2YXIoLS1jb2xvci1wcmltYXJ5KV0gcm91bmRlZC1mdWxsIGFuaW1hdGUtd2F2ZXlcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuMnMnIH19Pjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy0xIGgtNSBiZy1bdmFyKC0tY29sb3ItcHJpbWFyeSldIHJvdW5kZWQtZnVsbCBhbmltYXRlLXdhdmV5XCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwLjRzJyB9fT48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInctMSBoLTMgYmctW3ZhcigtLWNvbG9yLXByaW1hcnkpXSByb3VuZGVkLWZ1bGwgYW5pbWF0ZS13YXZleVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC4xcycgfX0+PC9zcGFuPlxuICAgIDwvZGl2PlxuKTtcblxuY29uc3QgUHJhY3RpY2VWaWV3OiBSZWFjdC5GQzxQcmFjdGljZVZpZXdQcm9wcz4gPSAoeyBwYXRpZW50LCB1c2VyVGllciwgb25GaW5pc2gsIG9uVXBncmFkZSB9KSA9PiB7XG4gICAgY29uc3QgW2lzU2Vzc2lvblN0YXJ0ZWQsIHNldElzU2Vzc2lvblN0YXJ0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFt0cmFuc2NyaXB0LCBzZXRUcmFuc2NyaXB0XSA9IHVzZVN0YXRlPENoYXRNZXNzYWdlW10+KFtdKTtcbiAgICBjb25zdCBbaXNQYXRpZW50VHlwaW5nLCBzZXRJc1BhdGllbnRUeXBpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtpc0VuZGluZ1Nlc3Npb24sIHNldElzRW5kaW5nU2Vzc2lvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2ZlZWRiYWNrRXJyb3IsIHNldEZlZWRiYWNrRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2lzUmV0cnlpbmdGZWVkYmFjaywgc2V0SXNSZXRyeWluZ0ZlZWRiYWNrXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2VuZEVycm9yLCBzZXRTZW5kRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2xhc3RGYWlsZWRNZXNzYWdlLCBzZXRMYXN0RmFpbGVkTWVzc2FnZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbc2Vzc2lvbkV4cGlyZWQsIHNldFNlc3Npb25FeHBpcmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBcbiAgICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgICBjb25zdCB7IHNob3dUb2FzdCwgVG9hc3RDb250YWluZXIsIHRvYXN0cywgcmVtb3ZlVG9hc3QgfSA9IHVzZVRvYXN0KCk7XG4gICAgY29uc3QgeyBpc0xpc3RlbmluZywgZmluYWxUcmFuc2NyaXB0LCBpbnRlcmltVHJhbnNjcmlwdCwgc3RhcnRMaXN0ZW5pbmcsIHN0b3BMaXN0ZW5pbmcsIGhhc1N1cHBvcnQsIGVycm9yOiBtaWNFcnJvciwgc2V0VHJhbnNjcmlwdDogc2V0U3BlZWNoVHJhbnNjcmlwdCB9ID0gdXNlU3BlZWNoUmVjb2duaXRpb24oKTtcbiAgICAvLyBDb21iaW5lIGZpbmFsIGFuZCBpbnRlcmltIGZvciBkaXNwbGF5IChpbnRlcmltIHNob3dzIGFzIGxpdmUgcHJldmlldylcbiAgICBjb25zdCBzcGVlY2hUcmFuc2NyaXB0ID0gZmluYWxUcmFuc2NyaXB0ICsgKGludGVyaW1UcmFuc2NyaXB0ID8gKGZpbmFsVHJhbnNjcmlwdCA/ICcgJyA6ICcnKSArIGludGVyaW1UcmFuc2NyaXB0IDogJycpO1xuICAgIGNvbnN0IGNoYXRDb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAgIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuICAgIGNvbnN0IGF1dG9TYXZlSW50ZXJ2YWxSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBzZXNzaW9uQ2hlY2tJbnRlcnZhbFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuXG4gICAgY29uc3Qgc2Vzc2lvbkR1cmF0aW9uID0gdXNlclRpZXIgPT09IFVzZXJUaWVyLlByZW1pdW0gPyBQUkVNSVVNX1NFU1NJT05fRFVSQVRJT04gOiBGUkVFX1NFU1NJT05fRFVSQVRJT047XG5cbiAgICAvLyBSZXN0b3JlIGF1dG8tc2F2ZWQgc2Vzc2lvbiBvbiBtb3VudFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNhdmVkU2Vzc2lvbiA9IGdldEF1dG9TYXZlZFNlc3Npb24oKTtcbiAgICAgICAgaWYgKHNhdmVkU2Vzc2lvbiAmJiBzYXZlZFNlc3Npb24udHJhbnNjcmlwdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZXN0b3JlID0gd2luZG93LmNvbmZpcm0oXG4gICAgICAgICAgICAgICAgJ1dlIGZvdW5kIGEgc2F2ZWQgcHJhY3RpY2Ugc2Vzc2lvbi4gV291bGQgeW91IGxpa2UgdG8gcmVzdG9yZSBpdD8nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHNob3VsZFJlc3RvcmUpIHtcbiAgICAgICAgICAgICAgICBzZXRUcmFuc2NyaXB0KHNhdmVkU2Vzc2lvbi50cmFuc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzZXRJc1Nlc3Npb25TdGFydGVkKHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhckF1dG9TYXZlZFNlc3Npb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChhdXRvU2F2ZUludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGF1dG9TYXZlSW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbkNoZWNrSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc2Vzc2lvbkNoZWNrSW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuXG4gICAgLy8gV2FybiB1c2VyIGJlZm9yZSBsZWF2aW5nIHRoZSBwYWdlIGlmIHNlc3Npb24gaXMgaW4gcHJvZ3Jlc3NcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBoYXNVbnNhdmVkU2Vzc2lvbiA9IGlzU2Vzc2lvblN0YXJ0ZWQgJiYgdHJhbnNjcmlwdC5sZW5ndGggPiAwICYmICFpc0VuZGluZ1Nlc3Npb247XG5cbiAgICAgICAgY29uc3QgaGFuZGxlQmVmb3JlVW5sb2FkID0gKGU6IEJlZm9yZVVubG9hZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFzVW5zYXZlZFNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICAvLyBBdXRvLXNhdmUgYmVmb3JlIGxlYXZpbmdcbiAgICAgICAgICAgICAgICBhdXRvU2F2ZVNlc3Npb24oe1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0LFxuICAgICAgICAgICAgICAgICAgICBwYXRpZW50LFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSAnWW91IGhhdmUgYW4gYWN0aXZlIHByYWN0aWNlIHNlc3Npb24uIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZT8nO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnJldHVyblZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVBvcFN0YXRlID0gKGU6IFBvcFN0YXRlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChoYXNVbnNhdmVkU2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZExlYXZlID0gd2luZG93LmNvbmZpcm0oXG4gICAgICAgICAgICAgICAgICAgICdZb3UgaGF2ZSBhbiBhY3RpdmUgcHJhY3RpY2Ugc2Vzc2lvbi4gWW91ciBwcm9ncmVzcyB3aWxsIGJlIHNhdmVkLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmU/J1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKCFzaG91bGRMZWF2ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IG5hdmlnYXRpb24gYnkgcHVzaGluZyB0aGUgY3VycmVudCBzdGF0ZSBiYWNrXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7IHZpZXc6ICdQcmFjdGljZScgfSwgJycsICcvcHJhY3RpY2UnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIGJlZm9yZSBsZWF2aW5nXG4gICAgICAgICAgICAgICAgICAgIGF1dG9TYXZlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVCZWZvcmVVbmxvYWQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBoYW5kbGVQb3BTdGF0ZSk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVCZWZvcmVVbmxvYWQpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgaGFuZGxlUG9wU3RhdGUpO1xuICAgICAgICB9O1xuICAgIH0sIFtpc1Nlc3Npb25TdGFydGVkLCB0cmFuc2NyaXB0LCBwYXRpZW50LCBpc0VuZGluZ1Nlc3Npb25dKTtcblxuICAgIC8vIEF1dG8tc2F2ZSBzZXNzaW9uIGRhdGEgZXZlcnkgMzAgc2Vjb25kc1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChpc1Nlc3Npb25TdGFydGVkICYmIHRyYW5zY3JpcHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXV0b1NhdmVJbnRlcnZhbFJlZi5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF1dG9TYXZlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDMwMDAwKTsgLy8gQXV0by1zYXZlIGV2ZXJ5IDMwIHNlY29uZHNcblxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXV0b1NhdmVJbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYXV0b1NhdmVJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwgW2lzU2Vzc2lvblN0YXJ0ZWQsIHRyYW5zY3JpcHQsIHBhdGllbnRdKTtcblxuICAgIC8vIENoZWNrIHNlc3Npb24gdmFsaWRpdHkgZXZlcnkgMiBtaW51dGVzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzU2Vzc2lvblN0YXJ0ZWQgJiYgdXNlcikge1xuICAgICAgICAgICAgc2Vzc2lvbkNoZWNrSW50ZXJ2YWxSZWYuY3VycmVudCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgaXNTZXNzaW9uVmFsaWQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2Vzc2lvbkV4cGlyZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uQ2hlY2tJbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNlc3Npb25DaGVja0ludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTIwMDAwKTsgLy8gQ2hlY2sgZXZlcnkgMiBtaW51dGVzXG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25DaGVja0ludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZXNzaW9uQ2hlY2tJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwgW2lzU2Vzc2lvblN0YXJ0ZWQsIHVzZXJdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgfSwgW3RyYW5zY3JpcHQsIGlzUGF0aWVudFR5cGluZ10pO1xuXG4gICAgLy8gQXV0by1yZXNpemUgdGV4dGFyZWFcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRleHRhcmVhUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICh0ZXh0YXJlYSkge1xuICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOyAvLyBSZXNldCBoZWlnaHQgdG8gc2hyaW5rIGlmIHRleHQgaXMgZGVsZXRlZFxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gdGV4dGFyZWEuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gYCR7c2Nyb2xsSGVpZ2h0fXB4YDsgLy8gU2V0IGhlaWdodCB0byBjb250ZW50IGhlaWdodFxuICAgICAgICB9XG4gICAgfSwgW3NwZWVjaFRyYW5zY3JpcHRdKTtcblxuICAgIC8qKlxuICAgICAqIEdldCBwYXRpZW50IHJlc3BvbnNlIGZyb20gRWRnZSBGdW5jdGlvblxuICAgICAqL1xuICAgIGNvbnN0IGdldFBhdGllbnRSZXNwb25zZUZyb21FZGdlRnVuY3Rpb24gPSB1c2VDYWxsYmFjayhhc3luYyAobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgc2Vzc2lvbiB2YWxpZGl0eSBiZWZvcmUgbWFraW5nIHJlcXVlc3RcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgZ2V0VmFsaWRBdXRoVG9rZW4oKTtcbiAgICAgICAgaWYgKCFhdXRoVG9rZW4pIHtcbiAgICAgICAgICAgIHNldFNlc3Npb25FeHBpcmVkKHRydWUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIHNlc3Npb24gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCBsb2cgaW4gYWdhaW4uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgU3VwYWJhc2UgVVJMIGFuZCBjb25zdHJ1Y3QgRWRnZSBGdW5jdGlvbiBVUkxcbiAgICAgICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gICAgICAgIGlmICghc3VwYWJhc2VVcmwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgVVJMIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmdW5jdGlvbnNVcmwgPSBgJHtzdXBhYmFzZVVybH0vZnVuY3Rpb25zL3YxL3BhdGllbnQtcmVzcG9uc2VgO1xuXG4gICAgICAgIC8vIFJlcXVpcmUgYXV0aGVudGljYXRpb25cbiAgICAgICAgaWYgKCFpc1N1cGFiYXNlQ29uZmlndXJlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY2hlY2sgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgYmUgbG9nZ2VkIGluIHRvIGNoYXQgd2l0aCB0aGUgcGF0aWVudC4gUGxlYXNlIGxvZyBpbiBhbmQgdHJ5IGFnYWluLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJlcGFyZSByZXF1ZXN0IHdpdGggcmVxdWlyZWQgQXV0aG9yaXphdGlvbiBoZWFkZXJcbiAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBNYWtlIHJlcXVlc3QgdG8gRWRnZSBGdW5jdGlvblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZ1bmN0aW9uc1VybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgcGF0aWVudCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhhbmRsZSBlcnJvcnNcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7IGVycm9yOiAnVW5rbm93biBlcnJvcicgfSkpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhLmVycm9yIHx8IGBGYWlsZWQgdG8gZ2V0IHBhdGllbnQgcmVzcG9uc2UgKCR7cmVzcG9uc2Uuc3RhdHVzfSlgO1xuXG4gICAgICAgICAgICAvLyBNYXAgSFRUUCBzdGF0dXMgY29kZXMgdG8gdXNlci1mcmllbmRseSBtZXNzYWdlc1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIHNlc3Npb24gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSSBzZXJ2aWNlIGlzIGJ1c3kuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBtb21lbnQuJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTA0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXRpZW50IHJlc3BvbnNlIHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FJIHNlcnZpY2UgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGFyc2UgYW5kIHJldHVybiByZXNwb25zZVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gZGF0YS5yZXNwb25zZSBhcyBzdHJpbmc7XG4gICAgfSwgW3RyYW5zY3JpcHQsIHBhdGllbnQsIHVzZXJdKTtcblxuICAgIGNvbnN0IGhhbmRsZVNlbmRNZXNzYWdlID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRleHQ6IHN0cmluZywgaXNSZXRyeSA9IGZhbHNlKSA9PiB7XG4gICAgICAgIC8vIENsZWFyIGFueSBwcmV2aW91cyBzZW5kIGVycm9yXG4gICAgICAgIHNldFNlbmRFcnJvcihudWxsKTtcbiAgICAgICAgc2V0TGFzdEZhaWxlZE1lc3NhZ2UobnVsbCk7XG5cbiAgICAgICAgaWYgKCF0ZXh0LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChpc1BhdGllbnRUeXBpbmcpIHtcbiAgICAgICAgICAgIHNldFNlbmRFcnJvcignUGxlYXNlIHdhaXQgZm9yIHRoZSBwYXRpZW50IHRvIHJlc3BvbmQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbmx5IGFkZCB1c2VyIG1lc3NhZ2UgaWYgbm90IGEgcmV0cnkgKHJldHJ5IG1lYW5zIHdlIGFscmVhZHkgaGF2ZSB0aGUgbWVzc2FnZSlcbiAgICAgICAgaWYgKCFpc1JldHJ5KSB7XG4gICAgICAgICAgICBjb25zdCBuZXdVc2VyTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7IGF1dGhvcjogJ3VzZXInLCB0ZXh0IH07XG4gICAgICAgICAgICBzZXRUcmFuc2NyaXB0KHByZXYgPT4gWy4uLnByZXYsIG5ld1VzZXJNZXNzYWdlXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SXNQYXRpZW50VHlwaW5nKHRydWUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgcGF0aWVudCByZXNwb25zZSBmcm9tIEVkZ2UgRnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IHBhdGllbnRSZXNwb25zZSA9IGF3YWl0IGdldFBhdGllbnRSZXNwb25zZUZyb21FZGdlRnVuY3Rpb24odGV4dCk7XG4gICAgICAgICAgICBjb25zdCBuZXdQYXRpZW50TWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7IGF1dGhvcjogJ3BhdGllbnQnLCB0ZXh0OiBwYXRpZW50UmVzcG9uc2UgfTtcbiAgICAgICAgICAgIHNldFRyYW5zY3JpcHQocHJldiA9PiBbLi4ucHJldiwgbmV3UGF0aWVudE1lc3NhZ2VdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQXV0by1zYXZlIGFmdGVyIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgICAgICAgIGF1dG9TYXZlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdDogWy4uLnRyYW5zY3JpcHQsIHsgYXV0aG9yOiAndXNlcicsIHRleHQgfSwgeyBhdXRob3I6ICdwYXRpZW50JywgdGV4dDogcGF0aWVudFJlc3BvbnNlIH1dLFxuICAgICAgICAgICAgICAgIHBhdGllbnQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbUHJhY3RpY2VWaWV3XSBGYWlsZWQgdG8gZ2V0IHBhdGllbnQgcmVzcG9uc2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGdldCBwYXRpZW50IHJlc3BvbnNlLic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICAgICAgICBjb25zdCBpc05ldHdvcmtFcnJvciA9IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnTmV0d29ya0Vycm9yJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnbmV0d29yaycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaXNOZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzZXRTZW5kRXJyb3IoJ05ldHdvcmsgY29ubmVjdGlvbiBsb3N0LiBDaGVjayB5b3VyIGNvbm5lY3Rpb24gYW5kIHRhcCBSZXRyeS4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0U2VuZEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBmYWlsZWQgbWVzc2FnZSBmb3IgcmV0cnlcbiAgICAgICAgICAgIHNldExhc3RGYWlsZWRNZXNzYWdlKHRleHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBdXRvLXNhdmUgdHJhbnNjcmlwdCBvbiBlcnJvciAoZG9uJ3QgYWRkIGZhbGxiYWNrIG1lc3NhZ2UsIGxldCB1c2VyIHJldHJ5KVxuICAgICAgICAgICAgYXV0b1NhdmVTZXNzaW9uKHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBbLi4udHJhbnNjcmlwdCwgeyBhdXRob3I6ICd1c2VyJywgdGV4dCB9XSxcbiAgICAgICAgICAgICAgICBwYXRpZW50LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0SXNQYXRpZW50VHlwaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0sIFtnZXRQYXRpZW50UmVzcG9uc2VGcm9tRWRnZUZ1bmN0aW9uLCBpc1BhdGllbnRUeXBpbmcsIHRyYW5zY3JpcHQsIHBhdGllbnRdKTtcblxuICAgIGNvbnN0IGhhbmRsZVJldHJ5TGFzdE1lc3NhZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGlmIChsYXN0RmFpbGVkTWVzc2FnZSkge1xuICAgICAgICAgICAgaGFuZGxlU2VuZE1lc3NhZ2UobGFzdEZhaWxlZE1lc3NhZ2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSwgW2xhc3RGYWlsZWRNZXNzYWdlLCBoYW5kbGVTZW5kTWVzc2FnZV0pO1xuICAgIFxuICAgIGNvbnN0IGhhbmRsZVZvaWNlU2VuZCA9ICgpID0+IHtcbiAgICAgICAgLy8gQ2xlYXIgYW55IHByZXZpb3VzIHNlbmQgZXJyb3Igd2hlbiB1c2VyIGludGVyYWN0cyB3aXRoIG1pY1xuICAgICAgICBzZXRTZW5kRXJyb3IobnVsbCk7XG4gICAgICAgIGlmIChpc0xpc3RlbmluZykge1xuICAgICAgICAgICAgc3RvcExpc3RlbmluZygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRMaXN0ZW5pbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY29uc3QgaGFuZGxlVGV4dFNlbmQgPSAoKSA9PiB7XG4gICAgICAgIGlmICghc3BlZWNoVHJhbnNjcmlwdC50cmltKCkpIHJldHVybjtcbiAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XG4gICAgICAgICAgICBzdG9wTGlzdGVuaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNjcmlwdFRvU2VuZCA9IHNwZWVjaFRyYW5zY3JpcHQ7XG4gICAgICAgIGhhbmRsZVNlbmRNZXNzYWdlKHRyYW5zY3JpcHRUb1NlbmQpO1xuICAgICAgICBzZXRTcGVlY2hUcmFuc2NyaXB0KCcnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGUgYW5hbHl6ZS1zZXNzaW9uIEVkZ2UgRnVuY3Rpb24gdG8gZ2V0IGZlZWRiYWNrXG4gICAgICogXG4gICAgICogVXNlcyBkdWFsLXJ1biB3cmFwcGVyIGZvciBTdHJhbmdsZXIgRmlnIG1pZ3JhdGlvbjpcbiAgICAgKiAtIENhbGxzIGJvdGggbGVnYWN5IGFuZCB2MiBmdW5jdGlvbnMgaW4gcGFyYWxsZWxcbiAgICAgKiAtIENvbXBhcmVzIG91dHB1dHMgYW5kIHRyYWNrcyBzZW1hbnRpYy1lcXVhbCBtYXRjaGVzXG4gICAgICogLSBSZXR1cm5zIGxlZ2FjeSBvdXRwdXQgKGZvciBub3cpIHdoaWxlIG1vbml0b3JpbmcgZHJpZnRcbiAgICAgKi9cbiAgICBjb25zdCBnZXRGZWVkYmFja0Zyb21FZGdlRnVuY3Rpb24gPSB1c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTxGZWVkYmFjaz4gPT4ge1xuICAgICAgICAvLyBDaGVjayBzZXNzaW9uIHZhbGlkaXR5IGJlZm9yZSBtYWtpbmcgcmVxdWVzdFxuICAgICAgICBjb25zdCBhdXRoVG9rZW4gPSBhd2FpdCBnZXRWYWxpZEF1dGhUb2tlbigpO1xuICAgICAgICBpZiAoIWF1dGhUb2tlbikge1xuICAgICAgICAgICAgc2V0U2Vzc2lvbkV4cGlyZWQodHJ1ZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgc2Vzc2lvbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgYW5kIGxvZyBpbiBhZ2Fpbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBTdXBhYmFzZSBVUkwgYW5kIGNvbnN0cnVjdCBFZGdlIEZ1bmN0aW9uIFVSTFxuICAgICAgICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgICAgICAgaWYgKCFzdXBhYmFzZVVybCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBVUkwgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSBkdWFsLXJ1biB3cmFwcGVyIGZvciBTdHJhbmdsZXIgRmlnIG1pZ3JhdGlvbiB0cmFja2luZ1xuICAgICAgICBjb25zdCBmdW5jdGlvbnNVcmwgPSBgJHtzdXBhYmFzZVVybH0vZnVuY3Rpb25zL3YxL2R1YWwtcnVuLWFuYWx5emUtc2Vzc2lvbmA7XG5cbiAgICAgICAgLy8gUmVxdWlyZSBhdXRoZW50aWNhdGlvblxuICAgICAgICBpZiAoIWlzU3VwYWJhc2VDb25maWd1cmVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBjaGVjayB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gZ2VuZXJhdGUgZmVlZGJhY2suIFBsZWFzZSBsb2cgaW4gYW5kIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZXBhcmUgcmVxdWVzdCB3aXRoIHJlcXVpcmVkIEF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTWFrZSByZXF1ZXN0IHRvIEVkZ2UgRnVuY3Rpb25cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmdW5jdGlvbnNVcmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0LFxuICAgICAgICAgICAgICAgIHBhdGllbnQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSGFuZGxlIGVycm9yc1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHsgZXJyb3I6ICdVbmtub3duIGVycm9yJyB9KSk7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGEuZXJyb3IgfHwgYEZhaWxlZCB0byBhbmFseXplIHNlc3Npb24gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgO1xuXG4gICAgICAgICAgICAvLyBNYXAgSFRUUCBzdGF0dXMgY29kZXMgdG8gdXNlci1mcmllbmRseSBtZXNzYWdlc1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIHNlc3Npb24gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSSBzZXJ2aWNlIGlzIGJ1c3kuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBtb21lbnQuJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTA0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbmFseXNpcyB0aW1lZCBvdXQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSSBzZXJ2aWNlIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhcnNlIGFuZCByZXR1cm4gZmVlZGJhY2tcbiAgICAgICAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBmZWVkYmFjayBhcyBGZWVkYmFjaztcbiAgICB9LCBbdHJhbnNjcmlwdCwgcGF0aWVudCwgdXNlcl0pO1xuXG4gICAgY29uc3QgaGFuZGxlRW5kU2Vzc2lvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgc2V0SXNFbmRpbmdTZXNzaW9uKHRydWUpO1xuICAgICAgICBzZXRGZWVkYmFja0Vycm9yKG51bGwpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2hvdyBzdWNjZXNzIHRvYXN0IGltbWVkaWF0ZWx5XG4gICAgICAgIHNob3dUb2FzdCgnU2Vzc2lvbiBjb21wbGV0ZSEgR2VuZXJhdGluZyB5b3VyIGZlZWRiYWNrLi4uJywgJ3N1Y2Nlc3MnKTtcblxuICAgICAgICAvLyBDbGVhciBhdXRvLXNhdmUgb24gc3VjY2Vzc2Z1bCBjb21wbGV0aW9uXG4gICAgICAgIGNsZWFyQXV0b1NhdmVkU2Vzc2lvbnMoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBnZXRGZWVkYmFja0Zyb21FZGdlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIHNldElzRW5kaW5nU2Vzc2lvbihmYWxzZSk7XG4gICAgICAgICAgICBvbkZpbmlzaCh0cmFuc2NyaXB0LCBmZWVkYmFjayk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbUHJhY3RpY2VWaWV3XSBGYWlsZWQgdG8gZ2V0IGZlZWRiYWNrOicsIGVycm9yKTtcbiAgICAgICAgICAgIHNldElzRW5kaW5nU2Vzc2lvbihmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgZmVlZGJhY2suIFBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHNldEZlZWRiYWNrRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgc2Vzc2lvbiBleHBpcmVkLCBhdXRvLXNhdmUgYmVmb3JlIHNob3dpbmcgZXJyb3JcbiAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3Nlc3Npb24gaGFzIGV4cGlyZWQnKSkge1xuICAgICAgICAgICAgICAgIGF1dG9TYXZlU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFt0cmFuc2NyaXB0LCBnZXRGZWVkYmFja0Zyb21FZGdlRnVuY3Rpb24sIG9uRmluaXNoLCBwYXRpZW50LCBzaG93VG9hc3RdKTtcblxuICAgIGNvbnN0IGhhbmRsZVJldHJ5RmVlZGJhY2sgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHNldElzUmV0cnlpbmdGZWVkYmFjayh0cnVlKTtcbiAgICAgICAgc2V0RmVlZGJhY2tFcnJvcihudWxsKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBnZXRGZWVkYmFja0Zyb21FZGdlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIHNldElzUmV0cnlpbmdGZWVkYmFjayhmYWxzZSk7XG4gICAgICAgICAgICBvbkZpbmlzaCh0cmFuc2NyaXB0LCBmZWVkYmFjayk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbUHJhY3RpY2VWaWV3XSBSZXRyeSBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgc2V0SXNSZXRyeWluZ0ZlZWRiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBmZWVkYmFjay4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgICAgICAgICAgc2V0RmVlZGJhY2tFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSwgW3RyYW5zY3JpcHQsIGdldEZlZWRiYWNrRnJvbUVkZ2VGdW5jdGlvbiwgb25GaW5pc2hdKTtcblxuICAgIGlmICghaXNTZXNzaW9uU3RhcnRlZCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctdHJhbnNwYXJlbnQgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XG4gICAgICAgICAgICAgICAgPFBhdGllbnRQcm9maWxlQ2FyZCBwYXRpZW50PXtwYXRpZW50fSB1c2VyVGllcj17dXNlclRpZXJ9IG9uVXBncmFkZT17b25VcGdyYWRlfSAvPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNTZXNzaW9uU3RhcnRlZCh0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICBzaXplPVwibGdcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC04IHB4LTEyIHB5LTQgdGV4dC0yeGwgc2hhZG93LVs0cHhfNHB4XzBweF8wcHhfcmdiYSgwLDAsMCwwLjgpXSBib3JkZXItMiBib3JkZXItYmxhY2tcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQmVnaW4gU2Vzc2lvblxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtc2NyZWVuIGJnLXRyYW5zcGFyZW50XCI+XG4gICAgICAgICAgICA8VG9hc3RDb250YWluZXIgdG9hc3RzPXt0b2FzdHN9IG9uUmVtb3ZlPXtyZW1vdmVUb2FzdH0gLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHAtNCBib3JkZXItYi0yIGJvcmRlci1ibGFjayBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIHRydW5jYXRlXCI+d2l0aCB7cGF0aWVudC5uYW1lfTwvaDM+XG4gICAgICAgICAgICAgICAgICAgIHsvKiBQcm9ncmVzcyBpbmRpY2F0b3Igc2hvd2luZyBtZXNzYWdlIGNvdW50ICovfVxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtbXV0ZWQpXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RyYW5zY3JpcHQubGVuZ3RoID09PSAwID8gJ1N0YXJ0IHRoZSBjb252ZXJzYXRpb24uLi4nIDogYCR7dHJhbnNjcmlwdC5sZW5ndGh9IG1lc3NhZ2Uke3RyYW5zY3JpcHQubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IGV4Y2hhbmdlZGB9XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBmbGV4LXNocmluay0wXCI+XG4gICAgICAgICAgICAgICAgICAgIDxUaW1lciBpbml0aWFsU2Vjb25kcz17c2Vzc2lvbkR1cmF0aW9ufSBvblRpbWVVcD17aGFuZGxlRW5kU2Vzc2lvbn0gLz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRW5kU2Vzc2lvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0VuZGluZ1Nlc3Npb259XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IG1pbi1oLVt2YXIoLS10b3VjaC10YXJnZXQtbWluKV0gdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIGJvcmRlci0yIGJvcmRlci1ibGFjayBkaXNhYmxlZDpvcGFjaXR5LTUwIHRyYW5zaXRpb24tY29sb3JzIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctcmVkLTUwMCBmb2N1cy12aXNpYmxlOnJpbmctb2Zmc2V0LTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VuZGluZ1Nlc3Npb24gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXJlZC02MDAnIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2lzRW5kaW5nU2Vzc2lvbiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTQgaC00IGJvcmRlci0yIGJvcmRlci13aGl0ZSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmRpbmcuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFbmQgU2Vzc2lvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgcmVmPXtjaGF0Q29udGFpbmVyUmVmfSBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNCBiZy13aGl0ZSByZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgICAgIHt0cmFuc2NyaXB0Lmxlbmd0aCA9PT0gMCAmJiAhaXNQYXRpZW50VHlwaW5nICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC1mdWxsIG1pbi1oLVsyMDBweF0gdGV4dC1jZW50ZXIgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1tdXRlZCldXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtY29tbWVudHMgdGV4dC00eGwgbWItMyBvcGFjaXR5LTQwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc21cIj5TYXkgc29tZXRoaW5nIHRvIHN0YXJ0IHRoZSBjb252ZXJzYXRpb248L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3RyYW5zY3JpcHQubWFwKChtc2csIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hhdEJ1YmJsZSBrZXk9e2luZGV4fSBtZXNzYWdlPXttc2d9IC8+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICB7aXNQYXRpZW50VHlwaW5nICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zbGlkZS1mYWRlLWluIHB0LTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hhdEJ1YmJsZSBtZXNzYWdlPXt7IGF1dGhvcjogJ3BhdGllbnQnLCB0ZXh0OiAnLi4uJyB9fSBpc1R5cGluZz17dHJ1ZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci10LTIgYm9yZGVyLWJsYWNrIGJnLVt2YXIoLS1jb2xvci1iZy1hY2NlbnQpXVwiPlxuICAgICAgICAgICAgICAgIHsvKiBTY3JlZW4gcmVhZGVyIGFubm91bmNlbWVudCBmb3Igdm9pY2UgcmVjb3JkaW5nIHN0YXR1cyAqL31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNyLW9ubHlcIiByb2xlPVwic3RhdHVzXCIgYXJpYS1saXZlPVwicG9saXRlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgICAgIHtpc0xpc3RlbmluZyA/ICdSZWNvcmRpbmcgc3RhcnRlZC4gU3BlYWsgbm93LicgOiAnJ31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7c2Vzc2lvbkV4cGlyZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8Q2FyZCB2YXJpYW50PVwiYWNjZW50XCIgcGFkZGluZz1cInNtXCIgY2xhc3NOYW1lPVwibWItMyBib3JkZXItbC00IGJvcmRlci1bdmFyKC0tY29sb3ItZXJyb3IpXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0yXCIgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LVt2YXIoLS1jb2xvci1lcnJvcildIHRleHQtc20gZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leGNsYW1hdGlvbi1jaXJjbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPllvdXIgc2Vzc2lvbiBoYXMgZXhwaXJlZDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBwcmFjdGljZSBzZXNzaW9uIGhhcyBiZWVuIHNhdmVkLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZSBhbmQgbG9nIGluIGFnYWluIHRvIGNvbnRpbnVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZnJlc2ggJiBMb2cgSW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7KG1pY0Vycm9yIHx8IHNlbmRFcnJvcikgJiYgIXNlc3Npb25FeHBpcmVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPENhcmQgdmFyaWFudD1cImFjY2VudFwiIHBhZGRpbmc9XCJzbVwiIGNsYXNzTmFtZT1cIm1iLTMgYm9yZGVyLWwtNCBib3JkZXItW3ZhcigtLWNvbG9yLWVycm9yKV1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gZ2FwLTJcIiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQgZ2FwLTIgdGV4dC1bdmFyKC0tY29sb3ItZXJyb3IpXSB0ZXh0LXNtIGZsZXgtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leGNsYW1hdGlvbi1jaXJjbGUgbXQtMC41XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57bWljRXJyb3IgfHwgc2VuZEVycm9yfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VuZEVycm9yICYmIGxhc3RGYWlsZWRNZXNzYWdlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmV0cnlMYXN0TWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1BhdGllbnRUeXBpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uPXs8aSBjbGFzc05hbWU9XCJmYS1zb2xpZCBmYS1yZWRvXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmV0cnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtZW5kIHNwYWNlLXgtM1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGl0ZW1zLWVuZCBiZy13aGl0ZSBib3JkZXItMiBib3JkZXItYmxhY2sgZm9jdXMtd2l0aGluOnJpbmctMiBmb2N1cy13aXRoaW46cmluZy1bdmFyKC0tY29sb3ItcHJpbWFyeSldIHRyYW5zaXRpb24tc2hhZG93IGR1cmF0aW9uLTIwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2lzTGlzdGVuaW5nICYmIDxTcGVlY2hWaXN1YWxpemVyIC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0ZXh0YXJlYVJlZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3BlZWNoVHJhbnNjcmlwdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNwZWVjaFRyYW5zY3JpcHQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtpc0xpc3RlbmluZyA/IFwiTGlzdGVuaW5nLi4uXCIgOiBcIlR5cGUgeW91ciByZXNwb25zZSBvciB1c2UgdGhlIG1pY3JvcGhvbmUuLi5cIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgcC0zIGJnLXRyYW5zcGFyZW50IGZvY3VzOm91dGxpbmUtbm9uZSByZXNpemUtbm9uZSB3LWZ1bGwgbWF4LWgtNTYgb3ZlcmZsb3cteS1hdXRvIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzPXsyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUZXh0U2VuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNjcm9sbCB0ZXh0YXJlYSBpbnRvIHZpZXcgd2hlbiBtb2JpbGUga2V5Ym9hcmQgb3BlbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYVJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdjZW50ZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUGF0aWVudFR5cGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17aXNMaXN0ZW5pbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY2FyZXRDb2xvcjogaXNMaXN0ZW5pbmcgPyAndHJhbnNwYXJlbnQnIDogJ2F1dG8nIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgey8qIE1pYyBidXR0b24gLSBGT1JDRUQgVE8gUkVOREVSIGZvciB0ZXN0aW5nICovfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGdyb3VwIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVm9pY2VTZW5kfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1BhdGllbnRUeXBpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1bdmFyKC0tdG91Y2gtdGFyZ2V0LW1pbildIGgtW3ZhcigtLXRvdWNoLXRhcmdldC1taW4pXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXSBib3JkZXItMiBib3JkZXItYmxhY2sgaG92ZXI6YmctW3ZhcigtLWNvbG9yLWJnLWFjY2VudCldIGRpc2FibGVkOmJnLVt2YXIoLS1jb2xvci1uZXV0cmFsLTMwMCldIGRpc2FibGVkOnRleHQtW3ZhcigtLWNvbG9yLW5ldXRyYWwtNTAwKV0gZGlzYWJsZWQ6Ym9yZGVyLVt2YXIoLS1jb2xvci1uZXV0cmFsLTQwMCldIHRyYW5zaXRpb24tY29sb3JzIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctW3ZhcigtLWNvbG9yLXByaW1hcnkpXSBmb2N1cy12aXNpYmxlOnJpbmctb2Zmc2V0LTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPyAnYmctW3ZhcigtLWNvbG9yLWVycm9yLWxpZ2h0KV0gdGV4dC1bdmFyKC0tY29sb3ItZXJyb3IpXScgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2lzTGlzdGVuaW5nID8gJ1N0b3AgcmVjb3JkaW5nJyA6ICdTdGFydCByZWNvcmRpbmcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17aXNMaXN0ZW5pbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1pYyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT17MjB9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2lzTGlzdGVuaW5nID8gJ3RleHQtW3ZhcigtLWNvbG9yLWVycm9yKV0nIDogJ3RleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS1mdWxsIG1iLTIgbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiBweC0zIHB5LTEuNSBiZy1bdmFyKC0tY29sb3ItbmV1dHJhbC04MDApXSB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1zZW1pYm9sZCBzaGFkb3ctbGcgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0zMDAgcG9pbnRlci1ldmVudHMtbm9uZSB6LTEwIHdoaXRlc3BhY2Utbm93cmFwIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNMaXN0ZW5pbmcgPyAnU3RvcCBSZWNvcmRpbmcnIDogJ1N0YXJ0IFJlY29yZGluZyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0ZXh0LVt2YXIoLS1jb2xvci1uZXV0cmFsLTgwMCldIGgtMiB3LWZ1bGwgbGVmdC0wIHRvcC1mdWxsXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDI1NSAyNTVcIiB4bWxTcGFjZT1cInByZXNlcnZlXCI+PHBvbHlnb24gY2xhc3NOYW1lPVwiZmlsbC1jdXJyZW50XCIgcG9pbnRzPVwiMCwwIDEyNy41LDEyNy41IDI1NSwwXCIvPjwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7LyogU2VuZCBidXR0b24gLSBGT1JDRUQgVE8gUkVOREVSIGZvciB0ZXN0aW5nICovfVxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVUZXh0U2VuZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1BhdGllbnRUeXBpbmcgfHwgIXNwZWVjaFRyYW5zY3JpcHQudHJpbSgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1bdmFyKC0tdG91Y2gtdGFyZ2V0LW1pbildIGgtW3ZhcigtLXRvdWNoLXRhcmdldC1taW4pXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1bdmFyKC0tY29sb3ItcHJpbWFyeSldIHRleHQtd2hpdGUgYm9yZGVyLTIgYm9yZGVyLWJsYWNrIGhvdmVyOmJnLVt2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmspXSBkaXNhYmxlZDpiZy1bdmFyKC0tY29sb3ItbmV1dHJhbC0zMDApXSBkaXNhYmxlZDp0ZXh0LVt2YXIoLS1jb2xvci1uZXV0cmFsLTUwMCldIGRpc2FibGVkOmJvcmRlci1bdmFyKC0tY29sb3ItbmV1dHJhbC00MDApXSBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgdHJhbnNpdGlvbi1jb2xvcnMgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzLXZpc2libGU6cmluZy0yIGZvY3VzLXZpc2libGU6cmluZy1bdmFyKC0tY29sb3ItcHJpbWFyeSldIGZvY3VzLXZpc2libGU6cmluZy1vZmZzZXQtMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiU2VuZCBtZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbmQgc2l6ZT17MjB9IGNsYXNzTmFtZT1cInRleHQtd2hpdGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgeyhpc0VuZGluZ1Nlc3Npb24gfHwgaXNSZXRyeWluZ0ZlZWRiYWNrKSAmJiAoXG4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy13aGl0ZSBiZy1vcGFjaXR5LTgwIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtMnhsIHotMTBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgYm9yZGVyLTQgYm9yZGVyLVt2YXIoLS1jb2xvci1wcmltYXJ5KV0gYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC00IHRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2lzUmV0cnlpbmdGZWVkYmFjayA/ICdSZXRyeWluZyBmZWVkYmFjayBnZW5lcmF0aW9uLi4uJyA6ICdHZW5lcmF0aW5nIHlvdXIgZmVlZGJhY2suLi4nfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7ZmVlZGJhY2tFcnJvciAmJiAhaXNFbmRpbmdTZXNzaW9uICYmICFpc1JldHJ5aW5nRmVlZGJhY2sgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy13aGl0ZSBiZy1vcGFjaXR5LTk1IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtMnhsIHotMTAgcC02XCI+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkIHZhcmlhbnQ9XCJlbGV2YXRlZFwiIHBhZGRpbmc9XCJsZ1wiIGNsYXNzTmFtZT1cIm1heC13LW1kIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xNiBoLTE2IHJvdW5kZWQtZnVsbCBiZy1bdmFyKC0tY29sb3ItZXJyb3ItbGlnaHQpXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUgdGV4dC0yeGwgdGV4dC1bdmFyKC0tY29sb3ItZXJyb3IpXVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtW3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSldIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmVlZGJhY2sgR2VuZXJhdGlvbiBGYWlsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtW3ZhcigtLWNvbG9yLXRleHQtc2Vjb25kYXJ5KV0gbWItNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmVlZGJhY2tFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJldHJ5RmVlZGJhY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwibGdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNSZXRyeWluZ0ZlZWRiYWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj17PGkgY2xhc3NOYW1lPVwiZmEtc29saWQgZmEtcmVkb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1JldHJ5aW5nRmVlZGJhY2sgPyAnUmV0cnlpbmcuLi4nIDogJ1JldHJ5IEZlZWRiYWNrIEdlbmVyYXRpb24nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGZhbGxiYWNrIGZlZWRiYWNrIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrRmVlZGJhY2s6IEZlZWRiYWNrID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXBhdGh5U2NvcmU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcGF0aHlCcmVha2Rvd246ICdGZWVkYmFjayBnZW5lcmF0aW9uIGZhaWxlZC4gWW91ciBwcmFjdGljZSBzZXNzaW9uIHdhcyBzdGlsbCB2YWx1YWJsZSEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGF0V2VudFJpZ2h0OiAnV2UgZW5jb3VudGVyZWQgYW4gaXNzdWUgZ2VuZXJhdGluZyBkZXRhaWxlZCBmZWVkYmFjaywgYnV0IGV2ZXJ5IHByYWN0aWNlIHNlc3Npb24gaGVscHMgeW91IGltcHJvdmUgeW91ciBNSSBza2lsbHMuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYXNGb3JHcm93dGg6ICdQbGVhc2UgdHJ5IGFub3RoZXIgc2Vzc2lvbiB0byByZWNlaXZlIGRldGFpbGVkIGZlZWRiYWNrLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsc0RldGVjdGVkOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGxDb3VudHM6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Rm9jdXM6ICdUcnkgYW5vdGhlciBwcmFjdGljZSBzZXNzaW9uIHRvIHJlY2VpdmUgZGV0YWlsZWQgZmVlZGJhY2suJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5hbHlzaXNTdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5c2lzTWVzc2FnZTogZmVlZGJhY2tFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZlZWRiYWNrRXJyb3IobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25GaW5pc2godHJhbnNjcmlwdCwgZmFsbGJhY2tGZWVkYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwibGdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRpbnVlIFdpdGhvdXQgRmVlZGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByYWN0aWNlVmlldzsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUNhbGxiYWNrIiwiTWljIiwiU2VuZCIsIlVzZXJUaWVyIiwiRlJFRV9TRVNTSU9OX0RVUkFUSU9OIiwiUFJFTUlVTV9TRVNTSU9OX0RVUkFUSU9OIiwidXNlU3BlZWNoUmVjb2duaXRpb24iLCJQYXRpZW50UHJvZmlsZUNhcmQiLCJDaGF0QnViYmxlIiwiVGltZXIiLCJCdXR0b24iLCJDYXJkIiwidXNlVG9hc3QiLCJ1c2VBdXRoIiwiaXNTdXBhYmFzZUNvbmZpZ3VyZWQiLCJnZXRWYWxpZEF1dGhUb2tlbiIsImF1dG9TYXZlU2Vzc2lvbiIsImdldEF1dG9TYXZlZFNlc3Npb24iLCJjbGVhckF1dG9TYXZlZFNlc3Npb25zIiwiaXNTZXNzaW9uVmFsaWQiLCJTcGVlY2hWaXN1YWxpemVyIiwiZGl2IiwiY2xhc3NOYW1lIiwiYXJpYS1oaWRkZW4iLCJzcGFuIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsIlByYWN0aWNlVmlldyIsInBhdGllbnQiLCJ1c2VyVGllciIsIm9uRmluaXNoIiwib25VcGdyYWRlIiwiaXNTZXNzaW9uU3RhcnRlZCIsInNldElzU2Vzc2lvblN0YXJ0ZWQiLCJ0cmFuc2NyaXB0Iiwic2V0VHJhbnNjcmlwdCIsImlzUGF0aWVudFR5cGluZyIsInNldElzUGF0aWVudFR5cGluZyIsImlzRW5kaW5nU2Vzc2lvbiIsInNldElzRW5kaW5nU2Vzc2lvbiIsImZlZWRiYWNrRXJyb3IiLCJzZXRGZWVkYmFja0Vycm9yIiwiaXNSZXRyeWluZ0ZlZWRiYWNrIiwic2V0SXNSZXRyeWluZ0ZlZWRiYWNrIiwic2VuZEVycm9yIiwic2V0U2VuZEVycm9yIiwibGFzdEZhaWxlZE1lc3NhZ2UiLCJzZXRMYXN0RmFpbGVkTWVzc2FnZSIsInNlc3Npb25FeHBpcmVkIiwic2V0U2Vzc2lvbkV4cGlyZWQiLCJ1c2VyIiwic2hvd1RvYXN0IiwiVG9hc3RDb250YWluZXIiLCJ0b2FzdHMiLCJyZW1vdmVUb2FzdCIsImlzTGlzdGVuaW5nIiwiZmluYWxUcmFuc2NyaXB0IiwiaW50ZXJpbVRyYW5zY3JpcHQiLCJzdGFydExpc3RlbmluZyIsInN0b3BMaXN0ZW5pbmciLCJoYXNTdXBwb3J0IiwiZXJyb3IiLCJtaWNFcnJvciIsInNldFNwZWVjaFRyYW5zY3JpcHQiLCJzcGVlY2hUcmFuc2NyaXB0IiwiY2hhdENvbnRhaW5lclJlZiIsInRleHRhcmVhUmVmIiwiYXV0b1NhdmVJbnRlcnZhbFJlZiIsInNlc3Npb25DaGVja0ludGVydmFsUmVmIiwic2Vzc2lvbkR1cmF0aW9uIiwiUHJlbWl1bSIsInNhdmVkU2Vzc2lvbiIsImxlbmd0aCIsInNob3VsZFJlc3RvcmUiLCJ3aW5kb3ciLCJjb25maXJtIiwiY3VycmVudCIsImNsZWFySW50ZXJ2YWwiLCJoYXNVbnNhdmVkU2Vzc2lvbiIsImhhbmRsZUJlZm9yZVVubG9hZCIsImUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImhhbmRsZVBvcFN0YXRlIiwic2hvdWxkTGVhdmUiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwidmlldyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJpc1ZhbGlkIiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwidGV4dGFyZWEiLCJoZWlnaHQiLCJnZXRQYXRpZW50UmVzcG9uc2VGcm9tRWRnZUZ1bmN0aW9uIiwibWVzc2FnZSIsImF1dGhUb2tlbiIsIkVycm9yIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiZnVuY3Rpb25zVXJsIiwiaGVhZGVycyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzIiwiZGF0YSIsImhhbmRsZVNlbmRNZXNzYWdlIiwidGV4dCIsImlzUmV0cnkiLCJ0cmltIiwibmV3VXNlck1lc3NhZ2UiLCJhdXRob3IiLCJwcmV2IiwicGF0aWVudFJlc3BvbnNlIiwibmV3UGF0aWVudE1lc3NhZ2UiLCJjb25zb2xlIiwiaXNOZXR3b3JrRXJyb3IiLCJpbmNsdWRlcyIsImhhbmRsZVJldHJ5TGFzdE1lc3NhZ2UiLCJoYW5kbGVWb2ljZVNlbmQiLCJoYW5kbGVUZXh0U2VuZCIsInRyYW5zY3JpcHRUb1NlbmQiLCJnZXRGZWVkYmFja0Zyb21FZGdlRnVuY3Rpb24iLCJmZWVkYmFjayIsImhhbmRsZUVuZFNlc3Npb24iLCJoYW5kbGVSZXRyeUZlZWRiYWNrIiwib25DbGljayIsInZhcmlhbnQiLCJzaXplIiwib25SZW1vdmUiLCJoMyIsIm5hbWUiLCJwIiwiaW5pdGlhbFNlY29uZHMiLCJvblRpbWVVcCIsImJ1dHRvbiIsImRpc2FibGVkIiwicmVmIiwiaSIsIm1hcCIsIm1zZyIsImluZGV4IiwiaXNUeXBpbmciLCJyb2xlIiwiYXJpYS1saXZlIiwiYXJpYS1hdG9taWMiLCJwYWRkaW5nIiwibG9jYXRpb24iLCJyZWxvYWQiLCJpY29uIiwidmFsdWUiLCJvbkNoYW5nZSIsInRhcmdldCIsInBsYWNlaG9sZGVyIiwicm93cyIsIm9uS2V5RG93biIsImtleSIsInNoaWZ0S2V5Iiwib25Gb2N1cyIsInNldFRpbWVvdXQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiYmxvY2siLCJyZWFkT25seSIsImNhcmV0Q29sb3IiLCJhcmlhLWxhYmVsIiwiYXJpYS1wcmVzc2VkIiwic3ZnIiwieCIsInkiLCJ2aWV3Qm94IiwieG1sU3BhY2UiLCJwb2x5Z29uIiwicG9pbnRzIiwiZnVsbFdpZHRoIiwiZmFsbGJhY2tGZWVkYmFjayIsImVtcGF0aHlTY29yZSIsImVtcGF0aHlCcmVha2Rvd24iLCJ3aGF0V2VudFJpZ2h0IiwiYXJlYXNGb3JHcm93dGgiLCJza2lsbHNEZXRlY3RlZCIsInNraWxsQ291bnRzIiwibmV4dEZvY3VzIiwiYW5hbHlzaXNTdGF0dXMiLCJhbmFseXNpc01lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/views/PracticeView.tsx\n");

/***/ }),

/***/ "(ssr)/./hooks/useSpeechRecognition.ts":
/*!***************************************!*\
  !*** ./hooks/useSpeechRecognition.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSpeechRecognition: () => (/* binding */ useSpeechRecognition)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n// Fix: Cast window to any to access non-standard SpeechRecognition APIs and rename the variable to avoid type name collision.\nconst SpeechRecognitionAPI = window.SpeechRecognition || window.webkitSpeechRecognition;\n// Module-level variable to persist transcript across React Strict Mode remounts\nlet persistedTranscript = '';\n// Mobile detection function\nconst isMobileDevice = ()=>{\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n};\nconst useSpeechRecognition = ()=>{\n    const [isListening, setIsListening] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [finalTranscript, setFinalTranscript] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''); // Only FINAL confirmed text\n    const [interimTranscript, setInterimTranscript] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''); // Live preview of interim results\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const isMountedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true); // Track if component is mounted\n    // Fix: The type SpeechRecognition is now correctly resolved via the interface definition above.\n    const recognitionRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const finalTranscriptRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(persistedTranscript); // Ref to hold only the FINAL transcript text, initialized from persisted value\n    const stopTriggeredRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false); // Flag to ignore late-coming results after stop is called\n    const userExplicitlyStoppedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false); // Track if user explicitly stopped\n    const stateSyncedInStopRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false); // Track if state was synced in stopListening() to prevent onend from overwriting\n    const interimTranscriptRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(''); // Mirror interim transcript in a ref (avoids stale state in stop/onend)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSpeechRecognition.useEffect\": ()=>{\n            // Reset mounted state on mount\n            isMountedRef.current = true;\n            // Restore transcript from persisted value (survives React Strict Mode remounts)\n            finalTranscriptRef.current = persistedTranscript;\n            setFinalTranscript(persistedTranscript);\n            if (!SpeechRecognitionAPI) {\n                const errorMsg = \"Speech Recognition API is not supported in this browser. Please use Chrome, Edge, or another Chromium-based browser.\";\n                console.error(errorMsg);\n                setError(errorMsg);\n                return;\n            }\n            // Check if we're in a secure context (required for Speech Recognition API)\n            // Secure context is required by the Speech Recognition API - this includes:\n            // 1. HTTPS connections\n            // 2. localhost or 127.0.0.1 (development)\n            // 3. Explicitly secure contexts as defined by window.isSecureContext\n            const isSecureContext = window.isSecureContext || window.location.protocol === 'https:' || window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n            if (!isSecureContext) {\n                const errorMsg = \"Speech Recognition requires a secure context (HTTPS or localhost). Please access this app via HTTPS or localhost.\";\n                console.error(errorMsg);\n                setError(errorMsg);\n                return;\n            }\n            const recognition = new SpeechRecognitionAPI();\n            const isMobile = isMobileDevice();\n            recognition.continuous = !isMobile; // continuous on desktop, single-utterance on mobile\n            recognition.interimResults = true;\n            recognition.lang = 'en-US';\n            recognition.onresult = ({\n                \"useSpeechRecognition.useEffect\": (event)=>{\n                    // Build interim transcript from ONLY the latest interim results in this event\n                    // Don't accumulate - rebuild from scratch each time\n                    let newInterimTranscript = '';\n                    let hasNewFinal = false;\n                    // Process results from resultIndex to end of results array\n                    const startIndex = event.resultIndex;\n                    for(let i = startIndex; i < event.results.length; ++i){\n                        const result = event.results[i];\n                        if (result.isFinal) {\n                            const final_text = result[0].transcript.trim();\n                            if (final_text) {\n                                // Simply append final results to the transcript\n                                const textToAdd = finalTranscriptRef.current ? ' ' + final_text : final_text;\n                                finalTranscriptRef.current += textToAdd;\n                                persistedTranscript = finalTranscriptRef.current;\n                                hasNewFinal = true;\n                                newInterimTranscript = '';\n                                interimTranscriptRef.current = '';\n                            }\n                        } else {\n                            // After stop is pressed, ignore late interim updates\n                            if (stopTriggeredRef.current) {\n                                continue;\n                            }\n                            // Build interim transcript from ONLY interim results in current event\n                            if (i >= startIndex) {\n                                newInterimTranscript += result[0].transcript;\n                            }\n                        }\n                    }\n                    // Update final transcript state only if we got new final results\n                    // Check if component is still mounted before updating state\n                    if (isMountedRef.current) {\n                        if (hasNewFinal) {\n                            setFinalTranscript(finalTranscriptRef.current);\n                            // Always clear interim when we get final results\n                            setInterimTranscript('');\n                            interimTranscriptRef.current = '';\n                        } else {\n                            // Update interim transcript (this replaces previous interim, doesn't append)\n                            const nextInterim = newInterimTranscript.trim();\n                            setInterimTranscript(nextInterim);\n                            interimTranscriptRef.current = nextInterim;\n                        }\n                    }\n                }\n            })[\"useSpeechRecognition.useEffect\"];\n            recognition.onend = ({\n                \"useSpeechRecognition.useEffect\": ()=>{\n                    // Check if component is still mounted before updating state\n                    if (!isMountedRef.current) {\n                        return;\n                    }\n                    setIsListening(false);\n                    stopTriggeredRef.current = false;\n                    // If we never received a final result, preserve whatever interim we had at stop time\n                    if (!finalTranscriptRef.current && interimTranscriptRef.current.trim()) {\n                        finalTranscriptRef.current = interimTranscriptRef.current.trim();\n                        persistedTranscript = finalTranscriptRef.current;\n                        setFinalTranscript({\n                            \"useSpeechRecognition.useEffect\": ()=>finalTranscriptRef.current\n                        }[\"useSpeechRecognition.useEffect\"]);\n                    }\n                    // Clear interim at end\n                    setInterimTranscript('');\n                    interimTranscriptRef.current = '';\n                    // Always preserve the transcript in onend\n                    persistedTranscript = finalTranscriptRef.current;\n                    setFinalTranscript({\n                        \"useSpeechRecognition.useEffect\": ()=>finalTranscriptRef.current\n                    }[\"useSpeechRecognition.useEffect\"]);\n                    stateSyncedInStopRef.current = false;\n                    userExplicitlyStoppedRef.current = false;\n                }\n            })[\"useSpeechRecognition.useEffect\"];\n            recognition.onerror = ({\n                \"useSpeechRecognition.useEffect\": (event)=>{\n                    // Check if component is still mounted\n                    if (!isMountedRef.current) {\n                        return;\n                    }\n                    console.error('Speech recognition error', event.error);\n                    setIsListening(false);\n                    stopTriggeredRef.current = false;\n                    userExplicitlyStoppedRef.current = false;\n                    setInterimTranscript('');\n                    // Provide user-friendly error messages\n                    let errorMessage = 'Microphone error occurred.';\n                    switch(event.error){\n                        case 'no-speech':\n                            errorMessage = 'No speech detected. Please try again.';\n                            break;\n                        case 'audio-capture':\n                            errorMessage = 'Microphone not found or access denied. Please check your microphone permissions.';\n                            break;\n                        case 'not-allowed':\n                            errorMessage = 'Microphone access denied. Please allow microphone access in your browser settings.';\n                            break;\n                        case 'network':\n                            errorMessage = 'Network error. Please check your internet connection.';\n                            break;\n                        case 'aborted':\n                            // User stopped, not really an error\n                            return;\n                        default:\n                            errorMessage = `Speech recognition error: ${event.error}`;\n                    }\n                    setError(errorMessage);\n                    // Clear error after 5 seconds (only if still mounted)\n                    setTimeout({\n                        \"useSpeechRecognition.useEffect\": ()=>{\n                            if (isMountedRef.current) {\n                                setError(null);\n                            }\n                        }\n                    }[\"useSpeechRecognition.useEffect\"], 5000);\n                }\n            })[\"useSpeechRecognition.useEffect\"];\n            recognitionRef.current = recognition;\n            return ({\n                \"useSpeechRecognition.useEffect\": ()=>{\n                    // Mark component as unmounted\n                    isMountedRef.current = false;\n                    // Remove all event listeners by stopping recognition\n                    if (recognitionRef.current) {\n                        try {\n                            recognitionRef.current.stop();\n                        } catch (err) {\n                        // Ignore errors when stopping (may already be stopped)\n                        }\n                        // Clear the ref\n                        recognitionRef.current = null;\n                    }\n                    // Reset refs (but preserve transcript refs to survive React Strict Mode remounts)\n                    stopTriggeredRef.current = false;\n                    userExplicitlyStoppedRef.current = false;\n                }\n            })[\"useSpeechRecognition.useEffect\"];\n        }\n    }[\"useSpeechRecognition.useEffect\"], []);\n    const startListening = ()=>{\n        if (!isMountedRef.current) {\n            return;\n        }\n        if (!recognitionRef.current) {\n            setError('Speech recognition not initialized. Please refresh the page.');\n            return;\n        }\n        if (isListening) {\n            return; // Already listening\n        }\n        try {\n            stopTriggeredRef.current = false;\n            userExplicitlyStoppedRef.current = false;\n            stateSyncedInStopRef.current = false;\n            setError(null);\n            // Clear interim when starting new session\n            setInterimTranscript('');\n            interimTranscriptRef.current = '';\n            recognitionRef.current.start();\n            setIsListening(true);\n        } catch (err) {\n            console.error('Failed to start speech recognition:', err);\n            if (isMountedRef.current) {\n                setError('Failed to start microphone. Please check your browser permissions.');\n                setIsListening(false);\n            }\n        }\n    };\n    const stopListening = ()=>{\n        if (recognitionRef.current && isListening) {\n            stopTriggeredRef.current = true;\n            recognitionRef.current.stop();\n            setIsListening(false);\n            // Preserve whatever interim we have by promoting it to final if we don't have a final yet\n            const interimAtStop = interimTranscriptRef.current.trim();\n            if (!finalTranscriptRef.current && interimAtStop) {\n                finalTranscriptRef.current = interimAtStop;\n                persistedTranscript = finalTranscriptRef.current;\n                setFinalTranscript(()=>finalTranscriptRef.current);\n            }\n            // Clear interim when stopping\n            setInterimTranscript('');\n            interimTranscriptRef.current = '';\n            // Sync React state with ref immediately\n            setFinalTranscript(()=>finalTranscriptRef.current);\n            stateSyncedInStopRef.current = true;\n        }\n    };\n    // This function allows components to reset the transcript and ensures the ref is also cleared.\n    const customSetTranscript = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSpeechRecognition.useCallback[customSetTranscript]\": (text)=>{\n            if (!isMountedRef.current) {\n                return;\n            }\n            // If text is empty, this means user sent the message - clear everything for fresh start\n            if (text === '') {\n                userExplicitlyStoppedRef.current = true;\n                finalTranscriptRef.current = '';\n                persistedTranscript = '';\n                setFinalTranscript('');\n                setInterimTranscript('');\n                interimTranscriptRef.current = '';\n                return;\n            }\n            // Non-empty text: full reset (for explicit transcript setting)\n            userExplicitlyStoppedRef.current = true;\n            finalTranscriptRef.current = text;\n            persistedTranscript = text;\n            setFinalTranscript(text);\n            setInterimTranscript('');\n            interimTranscriptRef.current = '';\n        }\n    }[\"useSpeechRecognition.useCallback[customSetTranscript]\"], []);\n    // Combined transcript for backward compatibility (final + interim)\n    const transcript = finalTranscript + (interimTranscript ? (finalTranscript ? ' ' : '') + interimTranscript : '');\n    // Check if Speech Recognition API is supported and we're in a secure context\n    const isSecureContext = window.isSecureContext || window.location.protocol === 'https:' || window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n    const hasSupport = !!SpeechRecognitionAPI && isSecureContext;\n    return {\n        isListening,\n        transcript,\n        finalTranscript,\n        interimTranscript,\n        startListening,\n        stopListening,\n        hasSupport,\n        error,\n        setTranscript: customSetTranscript\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjNCLE9BQU80QixRQUFRLENBQUNDLFFBQVEsS0FBSyxZQUM3QjdCLE9BQU80QixRQUFRLENBQUNFLFFBQVEsS0FBSyxlQUM3QjlCLE9BQU80QixRQUFRLENBQUNFLFFBQVEsS0FBSztJQUNyRCxNQUFNa0MsYUFBYSxDQUFDLENBQUNqRSx3QkFBd0I0QjtJQUU3QyxPQUFPO1FBQ0hsQjtRQUNBdUM7UUFDQXJDO1FBQ0FFO1FBQ0E2QztRQUNBRTtRQUNBSTtRQUNBakQ7UUFDQWtELGVBQWVIO0lBQ25CO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2phdmkvZGV2L01haW4yTUkvaG9va3MvdXNlU3BlZWNoUmVjb2duaXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuLy8gRml4OiBDYXN0IHdpbmRvdyB0byBhbnkgdG8gYWNjZXNzIG5vbi1zdGFuZGFyZCBTcGVlY2hSZWNvZ25pdGlvbiBBUElzIGFuZCByZW5hbWUgdGhlIHZhcmlhYmxlIHRvIGF2b2lkIHR5cGUgbmFtZSBjb2xsaXNpb24uXG5jb25zdCBTcGVlY2hSZWNvZ25pdGlvbkFQSSA9ICh3aW5kb3cgYXMgYW55KS5TcGVlY2hSZWNvZ25pdGlvbiB8fCAod2luZG93IGFzIGFueSkud2Via2l0U3BlZWNoUmVjb2duaXRpb247XG5cbi8vIERlZmluZSBldmVudCB0eXBlcyBmb3IgYmV0dGVyIHR5cGUgc2FmZXR5LCBhcyB0aGV5IGFyZSBub3Qgc3RhbmRhcmQgb24gdGhlIFNwZWVjaFJlY29nbml0aW9uIG9iamVjdCB0eXBlLlxuaW50ZXJmYWNlIFNwZWVjaFJlY29nbml0aW9uRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gICAgcmVzdWx0czogU3BlZWNoUmVjb2duaXRpb25SZXN1bHRMaXN0O1xuICAgIHJlc3VsdEluZGV4OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBTcGVlY2hSZWNvZ25pdGlvbkVycm9yRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gICAgZXJyb3I6IHN0cmluZztcbn1cblxuLy8gRml4OiBBZGQgYW4gaW50ZXJmYWNlIGZvciB0aGUgbm9uLXN0YW5kYXJkIFNwZWVjaFJlY29nbml0aW9uIG9iamVjdCB0byByZXNvbHZlIHRoZSB0eXBlIGVycm9yLlxuaW50ZXJmYWNlIFNwZWVjaFJlY29nbml0aW9uIHtcbiAgICBjb250aW51b3VzOiBib29sZWFuO1xuICAgIGludGVyaW1SZXN1bHRzOiBib29sZWFuO1xuICAgIGxhbmc6IHN0cmluZztcbiAgICBvbnJlc3VsdDogKGV2ZW50OiBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50KSA9PiB2b2lkO1xuICAgIG9uZW5kOiAoKSA9PiB2b2lkO1xuICAgIG9uZXJyb3I6IChldmVudDogU3BlZWNoUmVjb2duaXRpb25FcnJvckV2ZW50KSA9PiB2b2lkO1xuICAgIHN0YXJ0OiAoKSA9PiB2b2lkO1xuICAgIHN0b3A6ICgpID0+IHZvaWQ7XG59XG5cbi8vIE1vZHVsZS1sZXZlbCB2YXJpYWJsZSB0byBwZXJzaXN0IHRyYW5zY3JpcHQgYWNyb3NzIFJlYWN0IFN0cmljdCBNb2RlIHJlbW91bnRzXG5sZXQgcGVyc2lzdGVkVHJhbnNjcmlwdCA9ICcnO1xuXG4vLyBNb2JpbGUgZGV0ZWN0aW9uIGZ1bmN0aW9uXG5jb25zdCBpc01vYmlsZURldmljZSA9ICgpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZVNwZWVjaFJlY29nbml0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IFtpc0xpc3RlbmluZywgc2V0SXNMaXN0ZW5pbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtmaW5hbFRyYW5zY3JpcHQsIHNldEZpbmFsVHJhbnNjcmlwdF0gPSB1c2VTdGF0ZSgnJyk7IC8vIE9ubHkgRklOQUwgY29uZmlybWVkIHRleHRcbiAgICBjb25zdCBbaW50ZXJpbVRyYW5zY3JpcHQsIHNldEludGVyaW1UcmFuc2NyaXB0XSA9IHVzZVN0YXRlKCcnKTsgLy8gTGl2ZSBwcmV2aWV3IG9mIGludGVyaW0gcmVzdWx0c1xuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgaXNNb3VudGVkUmVmID0gdXNlUmVmKHRydWUpOyAvLyBUcmFjayBpZiBjb21wb25lbnQgaXMgbW91bnRlZFxuICAgIC8vIEZpeDogVGhlIHR5cGUgU3BlZWNoUmVjb2duaXRpb24gaXMgbm93IGNvcnJlY3RseSByZXNvbHZlZCB2aWEgdGhlIGludGVyZmFjZSBkZWZpbml0aW9uIGFib3ZlLlxuICAgIGNvbnN0IHJlY29nbml0aW9uUmVmID0gdXNlUmVmPFNwZWVjaFJlY29nbml0aW9uIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgZmluYWxUcmFuc2NyaXB0UmVmID0gdXNlUmVmKHBlcnNpc3RlZFRyYW5zY3JpcHQpOyAvLyBSZWYgdG8gaG9sZCBvbmx5IHRoZSBGSU5BTCB0cmFuc2NyaXB0IHRleHQsIGluaXRpYWxpemVkIGZyb20gcGVyc2lzdGVkIHZhbHVlXG4gICAgY29uc3Qgc3RvcFRyaWdnZXJlZFJlZiA9IHVzZVJlZihmYWxzZSk7IC8vIEZsYWcgdG8gaWdub3JlIGxhdGUtY29taW5nIHJlc3VsdHMgYWZ0ZXIgc3RvcCBpcyBjYWxsZWRcbiAgICBjb25zdCB1c2VyRXhwbGljaXRseVN0b3BwZWRSZWYgPSB1c2VSZWYoZmFsc2UpOyAvLyBUcmFjayBpZiB1c2VyIGV4cGxpY2l0bHkgc3RvcHBlZFxuICAgIGNvbnN0IHN0YXRlU3luY2VkSW5TdG9wUmVmID0gdXNlUmVmKGZhbHNlKTsgLy8gVHJhY2sgaWYgc3RhdGUgd2FzIHN5bmNlZCBpbiBzdG9wTGlzdGVuaW5nKCkgdG8gcHJldmVudCBvbmVuZCBmcm9tIG92ZXJ3cml0aW5nXG4gICAgY29uc3QgaW50ZXJpbVRyYW5zY3JpcHRSZWYgPSB1c2VSZWYoJycpOyAvLyBNaXJyb3IgaW50ZXJpbSB0cmFuc2NyaXB0IGluIGEgcmVmIChhdm9pZHMgc3RhbGUgc3RhdGUgaW4gc3RvcC9vbmVuZClcblxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgLy8gUmVzZXQgbW91bnRlZCBzdGF0ZSBvbiBtb3VudFxuICAgICAgICBpc01vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXN0b3JlIHRyYW5zY3JpcHQgZnJvbSBwZXJzaXN0ZWQgdmFsdWUgKHN1cnZpdmVzIFJlYWN0IFN0cmljdCBNb2RlIHJlbW91bnRzKVxuICAgICAgICBmaW5hbFRyYW5zY3JpcHRSZWYuY3VycmVudCA9IHBlcnNpc3RlZFRyYW5zY3JpcHQ7XG4gICAgICAgIHNldEZpbmFsVHJhbnNjcmlwdChwZXJzaXN0ZWRUcmFuc2NyaXB0KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghU3BlZWNoUmVjb2duaXRpb25BUEkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gXCJTcGVlY2ggUmVjb2duaXRpb24gQVBJIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLiBQbGVhc2UgdXNlIENocm9tZSwgRWRnZSwgb3IgYW5vdGhlciBDaHJvbWl1bS1iYXNlZCBicm93c2VyLlwiO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIHNlY3VyZSBjb250ZXh0IChyZXF1aXJlZCBmb3IgU3BlZWNoIFJlY29nbml0aW9uIEFQSSlcbiAgICAgICAgLy8gU2VjdXJlIGNvbnRleHQgaXMgcmVxdWlyZWQgYnkgdGhlIFNwZWVjaCBSZWNvZ25pdGlvbiBBUEkgLSB0aGlzIGluY2x1ZGVzOlxuICAgICAgICAvLyAxLiBIVFRQUyBjb25uZWN0aW9uc1xuICAgICAgICAvLyAyLiBsb2NhbGhvc3Qgb3IgMTI3LjAuMC4xIChkZXZlbG9wbWVudClcbiAgICAgICAgLy8gMy4gRXhwbGljaXRseSBzZWN1cmUgY29udGV4dHMgYXMgZGVmaW5lZCBieSB3aW5kb3cuaXNTZWN1cmVDb250ZXh0XG4gICAgICAgIGNvbnN0IGlzU2VjdXJlQ29udGV4dCA9IHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJzEyNy4wLjAuMSc7XG5cbiAgICAgICAgaWYgKCFpc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gXCJTcGVlY2ggUmVjb2duaXRpb24gcmVxdWlyZXMgYSBzZWN1cmUgY29udGV4dCAoSFRUUFMgb3IgbG9jYWxob3N0KS4gUGxlYXNlIGFjY2VzcyB0aGlzIGFwcCB2aWEgSFRUUFMgb3IgbG9jYWxob3N0LlwiO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWNvZ25pdGlvbjogU3BlZWNoUmVjb2duaXRpb24gPSBuZXcgU3BlZWNoUmVjb2duaXRpb25BUEkoKTtcbiAgICAgICAgY29uc3QgaXNNb2JpbGUgPSBpc01vYmlsZURldmljZSgpO1xuICAgICAgICByZWNvZ25pdGlvbi5jb250aW51b3VzID0gIWlzTW9iaWxlOyAvLyBjb250aW51b3VzIG9uIGRlc2t0b3AsIHNpbmdsZS11dHRlcmFuY2Ugb24gbW9iaWxlXG4gICAgICAgIHJlY29nbml0aW9uLmludGVyaW1SZXN1bHRzID0gdHJ1ZTtcbiAgICAgICAgcmVjb2duaXRpb24ubGFuZyA9ICdlbi1VUyc7XG4gICAgICAgIFxuICAgICAgICByZWNvZ25pdGlvbi5vbnJlc3VsdCA9IChldmVudDogU3BlZWNoUmVjb2duaXRpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gQnVpbGQgaW50ZXJpbSB0cmFuc2NyaXB0IGZyb20gT05MWSB0aGUgbGF0ZXN0IGludGVyaW0gcmVzdWx0cyBpbiB0aGlzIGV2ZW50XG4gICAgICAgICAgICAvLyBEb24ndCBhY2N1bXVsYXRlIC0gcmVidWlsZCBmcm9tIHNjcmF0Y2ggZWFjaCB0aW1lXG4gICAgICAgICAgICBsZXQgbmV3SW50ZXJpbVRyYW5zY3JpcHQgPSAnJztcbiAgICAgICAgICAgIGxldCBoYXNOZXdGaW5hbCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHJlc3VsdHMgZnJvbSByZXN1bHRJbmRleCB0byBlbmQgb2YgcmVzdWx0cyBhcnJheVxuICAgICAgICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IGV2ZW50LnJlc3VsdEluZGV4O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGV2ZW50LnJlc3VsdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBldmVudC5yZXN1bHRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaXNGaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbF90ZXh0ID0gcmVzdWx0WzBdLnRyYW5zY3JpcHQudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxfdGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2ltcGx5IGFwcGVuZCBmaW5hbCByZXN1bHRzIHRvIHRoZSB0cmFuc2NyaXB0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0VG9BZGQgPSBmaW5hbFRyYW5zY3JpcHRSZWYuY3VycmVudCA/ICcgJyArIGZpbmFsX3RleHQgOiBmaW5hbF90ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQgKz0gdGV4dFRvQWRkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVkVHJhbnNjcmlwdCA9IGZpbmFsVHJhbnNjcmlwdFJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV3RmluYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW50ZXJpbVRyYW5zY3JpcHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyaW1UcmFuc2NyaXB0UmVmLmN1cnJlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIHN0b3AgaXMgcHJlc3NlZCwgaWdub3JlIGxhdGUgaW50ZXJpbSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdG9wVHJpZ2dlcmVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGludGVyaW0gdHJhbnNjcmlwdCBmcm9tIE9OTFkgaW50ZXJpbSByZXN1bHRzIGluIGN1cnJlbnQgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPj0gc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW50ZXJpbVRyYW5zY3JpcHQgKz0gcmVzdWx0WzBdLnRyYW5zY3JpcHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmaW5hbCB0cmFuc2NyaXB0IHN0YXRlIG9ubHkgaWYgd2UgZ290IG5ldyBmaW5hbCByZXN1bHRzXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZCBiZWZvcmUgdXBkYXRpbmcgc3RhdGVcbiAgICAgICAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNOZXdGaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRGaW5hbFRyYW5zY3JpcHQoZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBbHdheXMgY2xlYXIgaW50ZXJpbSB3aGVuIHdlIGdldCBmaW5hbCByZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgIHNldEludGVyaW1UcmFuc2NyaXB0KCcnKTtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJpbVRyYW5zY3JpcHRSZWYuY3VycmVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBpbnRlcmltIHRyYW5zY3JpcHQgKHRoaXMgcmVwbGFjZXMgcHJldmlvdXMgaW50ZXJpbSwgZG9lc24ndCBhcHBlbmQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJbnRlcmltID0gbmV3SW50ZXJpbVRyYW5zY3JpcHQudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcmltVHJhbnNjcmlwdChuZXh0SW50ZXJpbSk7XG4gICAgICAgICAgICAgICAgICAgIGludGVyaW1UcmFuc2NyaXB0UmVmLmN1cnJlbnQgPSBuZXh0SW50ZXJpbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVjb2duaXRpb24ub25lbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZCBiZWZvcmUgdXBkYXRpbmcgc3RhdGVcbiAgICAgICAgICAgIGlmICghaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldElzTGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIHN0b3BUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gSWYgd2UgbmV2ZXIgcmVjZWl2ZWQgYSBmaW5hbCByZXN1bHQsIHByZXNlcnZlIHdoYXRldmVyIGludGVyaW0gd2UgaGFkIGF0IHN0b3AgdGltZVxuICAgICAgICAgICAgaWYgKCFmaW5hbFRyYW5zY3JpcHRSZWYuY3VycmVudCAmJiBpbnRlcmltVHJhbnNjcmlwdFJlZi5jdXJyZW50LnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGZpbmFsVHJhbnNjcmlwdFJlZi5jdXJyZW50ID0gaW50ZXJpbVRyYW5zY3JpcHRSZWYuY3VycmVudC50cmltKCk7XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVkVHJhbnNjcmlwdCA9IGZpbmFsVHJhbnNjcmlwdFJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgIHNldEZpbmFsVHJhbnNjcmlwdCgoKSA9PiBmaW5hbFRyYW5zY3JpcHRSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDbGVhciBpbnRlcmltIGF0IGVuZFxuICAgICAgICAgICAgc2V0SW50ZXJpbVRyYW5zY3JpcHQoJycpO1xuICAgICAgICAgICAgaW50ZXJpbVRyYW5zY3JpcHRSZWYuY3VycmVudCA9ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBbHdheXMgcHJlc2VydmUgdGhlIHRyYW5zY3JpcHQgaW4gb25lbmRcbiAgICAgICAgICAgIHBlcnNpc3RlZFRyYW5zY3JpcHQgPSBmaW5hbFRyYW5zY3JpcHRSZWYuY3VycmVudDtcbiAgICAgICAgICAgIHNldEZpbmFsVHJhbnNjcmlwdCgoKSA9PiBmaW5hbFRyYW5zY3JpcHRSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBzdGF0ZVN5bmNlZEluU3RvcFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICB1c2VyRXhwbGljaXRseVN0b3BwZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlY29nbml0aW9uLm9uZXJyb3IgPSAoZXZlbnQ6IFNwZWVjaFJlY29nbml0aW9uRXJyb3JFdmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWRcbiAgICAgICAgICAgIGlmICghaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NwZWVjaCByZWNvZ25pdGlvbiBlcnJvcicsIGV2ZW50LmVycm9yKTtcbiAgICAgICAgICAgIHNldElzTGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIHN0b3BUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgdXNlckV4cGxpY2l0bHlTdG9wcGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHNldEludGVyaW1UcmFuc2NyaXB0KCcnKTtcblxuICAgICAgICAgICAgLy8gUHJvdmlkZSB1c2VyLWZyaWVuZGx5IGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ01pY3JvcGhvbmUgZXJyb3Igb2NjdXJyZWQuJztcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjYXNlICduby1zcGVlY2gnOlxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnTm8gc3BlZWNoIGRldGVjdGVkLiBQbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1ZGlvLWNhcHR1cmUnOlxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnTWljcm9waG9uZSBub3QgZm91bmQgb3IgYWNjZXNzIGRlbmllZC4gUGxlYXNlIGNoZWNrIHlvdXIgbWljcm9waG9uZSBwZXJtaXNzaW9ucy4nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdub3QtYWxsb3dlZCc6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdNaWNyb3Bob25lIGFjY2VzcyBkZW5pZWQuIFBsZWFzZSBhbGxvdyBtaWNyb3Bob25lIGFjY2VzcyBpbiB5b3VyIGJyb3dzZXIgc2V0dGluZ3MuJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbmV0d29yayc6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdOZXR3b3JrIGVycm9yLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uLic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Fib3J0ZWQnOlxuICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIHN0b3BwZWQsIG5vdCByZWFsbHkgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBTcGVlY2ggcmVjb2duaXRpb24gZXJyb3I6ICR7ZXZlbnQuZXJyb3J9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG5cbiAgICAgICAgICAgIC8vIENsZWFyIGVycm9yIGFmdGVyIDUgc2Vjb25kcyAob25seSBpZiBzdGlsbCBtb3VudGVkKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQgPSByZWNvZ25pdGlvbjtcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTWFyayBjb21wb25lbnQgYXMgdW5tb3VudGVkXG4gICAgICAgICAgICBpc01vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGV2ZW50IGxpc3RlbmVycyBieSBzdG9wcGluZyByZWNvZ25pdGlvblxuICAgICAgICAgICAgaWYgKHJlY29nbml0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXJyb3JzIHdoZW4gc3RvcHBpbmcgKG1heSBhbHJlYWR5IGJlIHN0b3BwZWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZWZcbiAgICAgICAgICAgICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVzZXQgcmVmcyAoYnV0IHByZXNlcnZlIHRyYW5zY3JpcHQgcmVmcyB0byBzdXJ2aXZlIFJlYWN0IFN0cmljdCBNb2RlIHJlbW91bnRzKVxuICAgICAgICAgICAgc3RvcFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICB1c2VyRXhwbGljaXRseVN0b3BwZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IHN0YXJ0TGlzdGVuaW5nID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlY29nbml0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKCdTcGVlY2ggcmVjb2duaXRpb24gbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0xpc3RlbmluZykge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IGxpc3RlbmluZ1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN0b3BUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgdXNlckV4cGxpY2l0bHlTdG9wcGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN0YXRlU3luY2VkSW5TdG9wUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhciBpbnRlcmltIHdoZW4gc3RhcnRpbmcgbmV3IHNlc3Npb25cbiAgICAgICAgICAgIHNldEludGVyaW1UcmFuc2NyaXB0KCcnKTtcbiAgICAgICAgICAgIGludGVyaW1UcmFuc2NyaXB0UmVmLmN1cnJlbnQgPSAnJztcbiAgICAgICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQuc3RhcnQoKTtcbiAgICAgICAgICAgIHNldElzTGlzdGVuaW5nKHRydWUpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdGFydCBzcGVlY2ggcmVjb2duaXRpb246JywgZXJyKTtcbiAgICAgICAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBzdGFydCBtaWNyb3Bob25lLiBQbGVhc2UgY2hlY2sgeW91ciBicm93c2VyIHBlcm1pc3Npb25zLicpO1xuICAgICAgICAgICAgc2V0SXNMaXN0ZW5pbmcoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHN0b3BMaXN0ZW5pbmcgPSAoKSA9PiB7XG4gICAgICAgIGlmIChyZWNvZ25pdGlvblJlZi5jdXJyZW50ICYmIGlzTGlzdGVuaW5nKSB7XG4gICAgICAgICAgICBzdG9wVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgcmVjb2duaXRpb25SZWYuY3VycmVudC5zdG9wKCk7XG4gICAgICAgICAgICBzZXRJc0xpc3RlbmluZyhmYWxzZSk7XG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB3aGF0ZXZlciBpbnRlcmltIHdlIGhhdmUgYnkgcHJvbW90aW5nIGl0IHRvIGZpbmFsIGlmIHdlIGRvbid0IGhhdmUgYSBmaW5hbCB5ZXRcbiAgICAgICAgICAgIGNvbnN0IGludGVyaW1BdFN0b3AgPSBpbnRlcmltVHJhbnNjcmlwdFJlZi5jdXJyZW50LnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQgJiYgaW50ZXJpbUF0U3RvcCkge1xuICAgICAgICAgICAgICAgIGZpbmFsVHJhbnNjcmlwdFJlZi5jdXJyZW50ID0gaW50ZXJpbUF0U3RvcDtcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZWRUcmFuc2NyaXB0ID0gZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgc2V0RmluYWxUcmFuc2NyaXB0KCgpID0+IGZpbmFsVHJhbnNjcmlwdFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENsZWFyIGludGVyaW0gd2hlbiBzdG9wcGluZ1xuICAgICAgICAgICAgc2V0SW50ZXJpbVRyYW5zY3JpcHQoJycpO1xuICAgICAgICAgICAgaW50ZXJpbVRyYW5zY3JpcHRSZWYuY3VycmVudCA9ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTeW5jIFJlYWN0IHN0YXRlIHdpdGggcmVmIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBzZXRGaW5hbFRyYW5zY3JpcHQoKCkgPT4gZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgc3RhdGVTeW5jZWRJblN0b3BSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBhbGxvd3MgY29tcG9uZW50cyB0byByZXNldCB0aGUgdHJhbnNjcmlwdCBhbmQgZW5zdXJlcyB0aGUgcmVmIGlzIGFsc28gY2xlYXJlZC5cbiAgICBjb25zdCBjdXN0b21TZXRUcmFuc2NyaXB0ID0gdXNlQ2FsbGJhY2soKHRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIWlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0ZXh0IGlzIGVtcHR5LCB0aGlzIG1lYW5zIHVzZXIgc2VudCB0aGUgbWVzc2FnZSAtIGNsZWFyIGV2ZXJ5dGhpbmcgZm9yIGZyZXNoIHN0YXJ0XG4gICAgICAgIGlmICh0ZXh0ID09PSAnJykge1xuICAgICAgICAgICAgdXNlckV4cGxpY2l0bHlTdG9wcGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQgPSAnJztcbiAgICAgICAgICAgIHBlcnNpc3RlZFRyYW5zY3JpcHQgPSAnJztcbiAgICAgICAgICAgIHNldEZpbmFsVHJhbnNjcmlwdCgnJyk7XG4gICAgICAgICAgICBzZXRJbnRlcmltVHJhbnNjcmlwdCgnJyk7XG4gICAgICAgICAgICBpbnRlcmltVHJhbnNjcmlwdFJlZi5jdXJyZW50ID0gJyc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOb24tZW1wdHkgdGV4dDogZnVsbCByZXNldCAoZm9yIGV4cGxpY2l0IHRyYW5zY3JpcHQgc2V0dGluZylcbiAgICAgICAgdXNlckV4cGxpY2l0bHlTdG9wcGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgZmluYWxUcmFuc2NyaXB0UmVmLmN1cnJlbnQgPSB0ZXh0O1xuICAgICAgICBwZXJzaXN0ZWRUcmFuc2NyaXB0ID0gdGV4dDtcbiAgICAgICAgc2V0RmluYWxUcmFuc2NyaXB0KHRleHQpO1xuICAgICAgICBzZXRJbnRlcmltVHJhbnNjcmlwdCgnJyk7XG4gICAgICAgIGludGVyaW1UcmFuc2NyaXB0UmVmLmN1cnJlbnQgPSAnJztcbiAgICB9LCBbXSk7XG5cbiAgICAvLyBDb21iaW5lZCB0cmFuc2NyaXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IChmaW5hbCArIGludGVyaW0pXG4gICAgY29uc3QgdHJhbnNjcmlwdCA9IGZpbmFsVHJhbnNjcmlwdCArIChpbnRlcmltVHJhbnNjcmlwdCA/IChmaW5hbFRyYW5zY3JpcHQgPyAnICcgOiAnJykgKyBpbnRlcmltVHJhbnNjcmlwdCA6ICcnKTtcblxuICAgIC8vIENoZWNrIGlmIFNwZWVjaCBSZWNvZ25pdGlvbiBBUEkgaXMgc3VwcG9ydGVkIGFuZCB3ZSdyZSBpbiBhIHNlY3VyZSBjb250ZXh0XG4gICAgY29uc3QgaXNTZWN1cmVDb250ZXh0ID0gd2luZG93LmlzU2VjdXJlQ29udGV4dCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnMTI3LjAuMC4xJztcbiAgICBjb25zdCBoYXNTdXBwb3J0ID0gISFTcGVlY2hSZWNvZ25pdGlvbkFQSSAmJiBpc1NlY3VyZUNvbnRleHQ7XG5cbiAgICByZXR1cm4geyBcbiAgICAgICAgaXNMaXN0ZW5pbmcsIFxuICAgICAgICB0cmFuc2NyaXB0LCAvLyBDb21iaW5lZCAoYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcbiAgICAgICAgZmluYWxUcmFuc2NyaXB0LCAvLyBPbmx5IGZpbmFsIGNvbmZpcm1lZCB0ZXh0XG4gICAgICAgIGludGVyaW1UcmFuc2NyaXB0LCAvLyBMaXZlIHByZXZpZXcgKHRlbXBvcmFyeSlcbiAgICAgICAgc3RhcnRMaXN0ZW5pbmcsIFxuICAgICAgICBzdG9wTGlzdGVuaW5nLCBcbiAgICAgICAgaGFzU3VwcG9ydCwgXG4gICAgICAgIGVycm9yLCBcbiAgICAgICAgc2V0VHJhbnNjcmlwdDogY3VzdG9tU2V0VHJhbnNjcmlwdCBcbiAgICB9O1xufTtcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUNhbGxiYWNrIiwiU3BlZWNoUmVjb2duaXRpb25BUEkiLCJ3aW5kb3ciLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwicGVyc2lzdGVkVHJhbnNjcmlwdCIsImlzTW9iaWxlRGV2aWNlIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInVzZVNwZWVjaFJlY29nbml0aW9uIiwiaXNMaXN0ZW5pbmciLCJzZXRJc0xpc3RlbmluZyIsImZpbmFsVHJhbnNjcmlwdCIsInNldEZpbmFsVHJhbnNjcmlwdCIsImludGVyaW1UcmFuc2NyaXB0Iiwic2V0SW50ZXJpbVRyYW5zY3JpcHQiLCJlcnJvciIsInNldEVycm9yIiwiaXNNb3VudGVkUmVmIiwicmVjb2duaXRpb25SZWYiLCJmaW5hbFRyYW5zY3JpcHRSZWYiLCJzdG9wVHJpZ2dlcmVkUmVmIiwidXNlckV4cGxpY2l0bHlTdG9wcGVkUmVmIiwic3RhdGVTeW5jZWRJblN0b3BSZWYiLCJpbnRlcmltVHJhbnNjcmlwdFJlZiIsImN1cnJlbnQiLCJlcnJvck1zZyIsImNvbnNvbGUiLCJpc1NlY3VyZUNvbnRleHQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJyZWNvZ25pdGlvbiIsImlzTW9iaWxlIiwiY29udGludW91cyIsImludGVyaW1SZXN1bHRzIiwibGFuZyIsIm9ucmVzdWx0IiwiZXZlbnQiLCJuZXdJbnRlcmltVHJhbnNjcmlwdCIsImhhc05ld0ZpbmFsIiwic3RhcnRJbmRleCIsInJlc3VsdEluZGV4IiwiaSIsInJlc3VsdHMiLCJsZW5ndGgiLCJyZXN1bHQiLCJpc0ZpbmFsIiwiZmluYWxfdGV4dCIsInRyYW5zY3JpcHQiLCJ0cmltIiwidGV4dFRvQWRkIiwibmV4dEludGVyaW0iLCJvbmVuZCIsIm9uZXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzZXRUaW1lb3V0Iiwic3RvcCIsImVyciIsInN0YXJ0TGlzdGVuaW5nIiwic3RhcnQiLCJzdG9wTGlzdGVuaW5nIiwiaW50ZXJpbUF0U3RvcCIsImN1c3RvbVNldFRyYW5zY3JpcHQiLCJ0ZXh0IiwiaGFzU3VwcG9ydCIsInNldFRyYW5zY3JpcHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./hooks/useSpeechRecognition.ts\n");

/***/ }),

/***/ "(ssr)/./utils/sessionManager.ts":
/*!*********************************!*\
  !*** ./utils/sessionManager.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   autoSaveSession: () => (/* binding */ autoSaveSession),\n/* harmony export */   clearAutoSavedSessions: () => (/* binding */ clearAutoSavedSessions),\n/* harmony export */   getAutoSavedSession: () => (/* binding */ getAutoSavedSession),\n/* harmony export */   getValidAuthToken: () => (/* binding */ getValidAuthToken),\n/* harmony export */   isSessionValid: () => (/* binding */ isSessionValid)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(ssr)/./lib/supabase.ts\");\n/**\n * Session Management Utility\n * \n * Handles token refresh, session expiry detection, and auto-save functionality\n * to prevent data loss during long practice sessions.\n */ \nconst AUTO_SAVE_KEY_PREFIX = 'mi-practice-auto-save-';\nconst AUTO_SAVE_EXPIRY_MS = 24 * 60 * 60 * 1000; // 24 hours\n/**\n * Get a valid auth token, refreshing if necessary\n * Returns null if session is expired and cannot be refreshed\n */ async function getValidAuthToken() {\n    if (!(0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.isSupabaseConfigured)()) {\n        return null;\n    }\n    try {\n        const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.getSupabaseClient)();\n        const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n        if (sessionError || !session) {\n            return null;\n        }\n        if (!session.access_token) {\n            return null;\n        }\n        // Check if token is expired or will expire soon (within 5 minutes)\n        try {\n            const tokenParts = session.access_token.split('.');\n            if (tokenParts.length === 3) {\n                const payload = JSON.parse(atob(tokenParts[1]));\n                const now = Math.floor(Date.now() / 1000);\n                const expiresAt = payload.exp || 0;\n                const timeUntilExpiry = expiresAt - now;\n                // If expired or expires within 5 minutes, refresh\n                if (timeUntilExpiry < 300) {\n                    console.log('[sessionManager] Token expires soon, refreshing...');\n                    if (session.refresh_token) {\n                        const { data: { session: refreshedSession }, error: refreshError } = await supabase.auth.refreshSession(session);\n                        if (refreshError || !refreshedSession?.access_token) {\n                            console.error('[sessionManager] Failed to refresh session:', refreshError);\n                            return null;\n                        }\n                        console.log('[sessionManager] Session refreshed successfully');\n                        return refreshedSession.access_token;\n                    } else {\n                        console.warn('[sessionManager] No refresh token available');\n                        return null;\n                    }\n                }\n            }\n        } catch (parseError) {\n            // If we can't parse the token, use it as-is (server will validate)\n            console.warn('[sessionManager] Could not parse token, using as-is');\n        }\n        return session.access_token;\n    } catch (error) {\n        console.error('[sessionManager] Error getting auth token:', error);\n        return null;\n    }\n}\n/**\n * Check if current session is valid\n */ async function isSessionValid() {\n    const token = await getValidAuthToken();\n    return token !== null;\n}\n/**\n * Auto-save practice session data to localStorage\n */ function autoSaveSession(sessionData) {\n    try {\n        const key = `${AUTO_SAVE_KEY_PREFIX}${Date.now()}`;\n        const data = {\n            ...sessionData,\n            timestamp: Date.now()\n        };\n        localStorage.setItem(key, JSON.stringify(data));\n        // Clean up old auto-saves (older than expiry)\n        cleanupOldAutoSaves();\n        console.log('[sessionManager] Auto-saved session data');\n    } catch (error) {\n        console.error('[sessionManager] Failed to auto-save:', error);\n    }\n}\n/**\n * Get the most recent auto-saved session\n */ function getAutoSavedSession() {\n    try {\n        const keys = Object.keys(localStorage).filter((key)=>key.startsWith(AUTO_SAVE_KEY_PREFIX));\n        if (keys.length === 0) {\n            return null;\n        }\n        // Get the most recent auto-save\n        const sortedKeys = keys.sort((a, b)=>{\n            const timestampA = parseInt(a.replace(AUTO_SAVE_KEY_PREFIX, ''));\n            const timestampB = parseInt(b.replace(AUTO_SAVE_KEY_PREFIX, ''));\n            return timestampB - timestampA;\n        });\n        const mostRecentKey = sortedKeys[0];\n        const data = localStorage.getItem(mostRecentKey);\n        if (!data) {\n            return null;\n        }\n        const sessionData = JSON.parse(data);\n        // Check if auto-save is still valid (not expired)\n        const age = Date.now() - sessionData.timestamp;\n        if (age > AUTO_SAVE_EXPIRY_MS) {\n            localStorage.removeItem(mostRecentKey);\n            return null;\n        }\n        return {\n            transcript: sessionData.transcript,\n            patient: sessionData.patient,\n            timestamp: sessionData.timestamp\n        };\n    } catch (error) {\n        console.error('[sessionManager] Failed to get auto-saved session:', error);\n        return null;\n    }\n}\n/**\n * Clear all auto-saved sessions\n */ function clearAutoSavedSessions() {\n    try {\n        const keys = Object.keys(localStorage).filter((key)=>key.startsWith(AUTO_SAVE_KEY_PREFIX));\n        keys.forEach((key)=>localStorage.removeItem(key));\n        console.log('[sessionManager] Cleared all auto-saved sessions');\n    } catch (error) {\n        console.error('[sessionManager] Failed to clear auto-saves:', error);\n    }\n}\n/**\n * Clean up old auto-saves (older than expiry)\n */ function cleanupOldAutoSaves() {\n    try {\n        const keys = Object.keys(localStorage).filter((key)=>key.startsWith(AUTO_SAVE_KEY_PREFIX));\n        const now = Date.now();\n        keys.forEach((key)=>{\n            const data = localStorage.getItem(key);\n            if (data) {\n                try {\n                    const sessionData = JSON.parse(data);\n                    const age = now - sessionData.timestamp;\n                    if (age > AUTO_SAVE_EXPIRY_MS) {\n                        localStorage.removeItem(key);\n                    }\n                } catch  {\n                    // Invalid data, remove it\n                    localStorage.removeItem(key);\n                }\n            }\n        });\n    } catch (error) {\n        console.error('[sessionManager] Failed to cleanup old auto-saves:', error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUIsUUFBUW5CLEtBQUssQ0FBQyxnREFBZ0RBO0lBQ2hFO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELFNBQVNvQztJQUNQLElBQUk7UUFDRixNQUFNRSxPQUFPQyxPQUFPRCxJQUFJLENBQUNMLGNBQWNPLE1BQU0sQ0FBQ1QsQ0FBQUEsTUFDNUNBLElBQUlVLFVBQVUsQ0FBQy9DO1FBR2pCLE1BQU1rQixNQUFNRyxLQUFLSCxHQUFHO1FBQ3BCMEIsS0FBS21CLE9BQU8sQ0FBQzFCLENBQUFBO1lBQ1gsTUFBTWpDLE9BQU9tQyxhQUFha0IsT0FBTyxDQUFDcEI7WUFDbEMsSUFBSWpDLE1BQU07Z0JBQ1IsSUFBSTtvQkFDRixNQUFNZ0MsY0FBY3JCLEtBQUtDLEtBQUssQ0FBQ1o7b0JBQy9CLE1BQU1zRCxNQUFNeEMsTUFBTWtCLFlBQVlFLFNBQVM7b0JBQ3ZDLElBQUlvQixNQUFNekQscUJBQXFCO3dCQUM3QnNDLGFBQWFvQixVQUFVLENBQUN0QjtvQkFDMUI7Z0JBQ0YsRUFBRSxPQUFNO29CQUNOLDBCQUEwQjtvQkFDMUJFLGFBQWFvQixVQUFVLENBQUN0QjtnQkFDMUI7WUFDRjtRQUNGO0lBQ0YsRUFBRSxPQUFPL0IsT0FBTztRQUNkbUIsUUFBUW5CLEtBQUssQ0FBQyxzREFBc0RBO0lBQ3RFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXZpL2Rldi9NYWluMk1JL3V0aWxzL3Nlc3Npb25NYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2Vzc2lvbiBNYW5hZ2VtZW50IFV0aWxpdHlcbiAqIFxuICogSGFuZGxlcyB0b2tlbiByZWZyZXNoLCBzZXNzaW9uIGV4cGlyeSBkZXRlY3Rpb24sIGFuZCBhdXRvLXNhdmUgZnVuY3Rpb25hbGl0eVxuICogdG8gcHJldmVudCBkYXRhIGxvc3MgZHVyaW5nIGxvbmcgcHJhY3RpY2Ugc2Vzc2lvbnMuXG4gKi9cblxuaW1wb3J0IHsgZ2V0U3VwYWJhc2VDbGllbnQsIGlzU3VwYWJhc2VDb25maWd1cmVkIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25EYXRhIHtcbiAgdHJhbnNjcmlwdDogQXJyYXk8eyBhdXRob3I6IHN0cmluZzsgdGV4dDogc3RyaW5nIH0+O1xuICBwYXRpZW50OiBhbnk7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5jb25zdCBBVVRPX1NBVkVfS0VZX1BSRUZJWCA9ICdtaS1wcmFjdGljZS1hdXRvLXNhdmUtJztcbmNvbnN0IEFVVE9fU0FWRV9FWFBJUllfTVMgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuXG4vKipcbiAqIEdldCBhIHZhbGlkIGF1dGggdG9rZW4sIHJlZnJlc2hpbmcgaWYgbmVjZXNzYXJ5XG4gKiBSZXR1cm5zIG51bGwgaWYgc2Vzc2lvbiBpcyBleHBpcmVkIGFuZCBjYW5ub3QgYmUgcmVmcmVzaGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWYWxpZEF1dGhUb2tlbigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgaWYgKCFpc1N1cGFiYXNlQ29uZmlndXJlZCgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcblxuICAgIGlmIChzZXNzaW9uRXJyb3IgfHwgIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghc2Vzc2lvbi5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRva2VuIGlzIGV4cGlyZWQgb3Igd2lsbCBleHBpcmUgc29vbiAod2l0aGluIDUgbWludXRlcylcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW5QYXJ0cyA9IHNlc3Npb24uYWNjZXNzX3Rva2VuLnNwbGl0KCcuJyk7XG4gICAgICBpZiAodG9rZW5QYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoYXRvYih0b2tlblBhcnRzWzFdKSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgICAgICBjb25zdCBleHBpcmVzQXQgPSBwYXlsb2FkLmV4cCB8fCAwO1xuICAgICAgICBjb25zdCB0aW1lVW50aWxFeHBpcnkgPSBleHBpcmVzQXQgLSBub3c7XG5cbiAgICAgICAgLy8gSWYgZXhwaXJlZCBvciBleHBpcmVzIHdpdGhpbiA1IG1pbnV0ZXMsIHJlZnJlc2hcbiAgICAgICAgaWYgKHRpbWVVbnRpbEV4cGlyeSA8IDMwMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2Vzc2lvbk1hbmFnZXJdIFRva2VuIGV4cGlyZXMgc29vbiwgcmVmcmVzaGluZy4uLicpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXNzaW9uLnJlZnJlc2hfdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uOiByZWZyZXNoZWRTZXNzaW9uIH0sIGVycm9yOiByZWZyZXNoRXJyb3IgfSA9IFxuICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5hdXRoLnJlZnJlc2hTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVmcmVzaEVycm9yIHx8ICFyZWZyZXNoZWRTZXNzaW9uPy5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3Nlc3Npb25NYW5hZ2VyXSBGYWlsZWQgdG8gcmVmcmVzaCBzZXNzaW9uOicsIHJlZnJlc2hFcnJvcik7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW3Nlc3Npb25NYW5hZ2VyXSBTZXNzaW9uIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIHJldHVybiByZWZyZXNoZWRTZXNzaW9uLmFjY2Vzc190b2tlbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbc2Vzc2lvbk1hbmFnZXJdIE5vIHJlZnJlc2ggdG9rZW4gYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgdG9rZW4sIHVzZSBpdCBhcy1pcyAoc2VydmVyIHdpbGwgdmFsaWRhdGUpXG4gICAgICBjb25zb2xlLndhcm4oJ1tzZXNzaW9uTWFuYWdlcl0gQ291bGQgbm90IHBhcnNlIHRva2VuLCB1c2luZyBhcy1pcycpO1xuICAgIH1cblxuICAgIHJldHVybiBzZXNzaW9uLmFjY2Vzc190b2tlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbc2Vzc2lvbk1hbmFnZXJdIEVycm9yIGdldHRpbmcgYXV0aCB0b2tlbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBjdXJyZW50IHNlc3Npb24gaXMgdmFsaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzU2Vzc2lvblZhbGlkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFZhbGlkQXV0aFRva2VuKCk7XG4gIHJldHVybiB0b2tlbiAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBBdXRvLXNhdmUgcHJhY3RpY2Ugc2Vzc2lvbiBkYXRhIHRvIGxvY2FsU3RvcmFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXV0b1NhdmVTZXNzaW9uKHNlc3Npb25EYXRhOiBTZXNzaW9uRGF0YSk6IHZvaWQge1xuICB0cnkge1xuICAgIGNvbnN0IGtleSA9IGAke0FVVE9fU0FWRV9LRVlfUFJFRklYfSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAuLi5zZXNzaW9uRGF0YSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIG9sZCBhdXRvLXNhdmVzIChvbGRlciB0aGFuIGV4cGlyeSlcbiAgICBjbGVhbnVwT2xkQXV0b1NhdmVzKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1tzZXNzaW9uTWFuYWdlcl0gQXV0by1zYXZlZCBzZXNzaW9uIGRhdGEnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbc2Vzc2lvbk1hbmFnZXJdIEZhaWxlZCB0byBhdXRvLXNhdmU6JywgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRoZSBtb3N0IHJlY2VudCBhdXRvLXNhdmVkIHNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dG9TYXZlZFNlc3Npb24oKTogU2Vzc2lvbkRhdGEgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LnN0YXJ0c1dpdGgoQVVUT19TQVZFX0tFWV9QUkVGSVgpXG4gICAgKTtcbiAgICBcbiAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgbW9zdCByZWNlbnQgYXV0by1zYXZlXG4gICAgY29uc3Qgc29ydGVkS2V5cyA9IGtleXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgdGltZXN0YW1wQSA9IHBhcnNlSW50KGEucmVwbGFjZShBVVRPX1NBVkVfS0VZX1BSRUZJWCwgJycpKTtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcEIgPSBwYXJzZUludChiLnJlcGxhY2UoQVVUT19TQVZFX0tFWV9QUkVGSVgsICcnKSk7XG4gICAgICByZXR1cm4gdGltZXN0YW1wQiAtIHRpbWVzdGFtcEE7XG4gICAgfSk7XG5cbiAgICBjb25zdCBtb3N0UmVjZW50S2V5ID0gc29ydGVkS2V5c1swXTtcbiAgICBjb25zdCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obW9zdFJlY2VudEtleSk7XG4gICAgXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uRGF0YSA9IEpTT04ucGFyc2UoZGF0YSkgYXMgU2Vzc2lvbkRhdGEgJiB7IHRpbWVzdGFtcDogbnVtYmVyIH07XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYXV0by1zYXZlIGlzIHN0aWxsIHZhbGlkIChub3QgZXhwaXJlZClcbiAgICBjb25zdCBhZ2UgPSBEYXRlLm5vdygpIC0gc2Vzc2lvbkRhdGEudGltZXN0YW1wO1xuICAgIGlmIChhZ2UgPiBBVVRPX1NBVkVfRVhQSVJZX01TKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShtb3N0UmVjZW50S2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2NyaXB0OiBzZXNzaW9uRGF0YS50cmFuc2NyaXB0LFxuICAgICAgcGF0aWVudDogc2Vzc2lvbkRhdGEucGF0aWVudCxcbiAgICAgIHRpbWVzdGFtcDogc2Vzc2lvbkRhdGEudGltZXN0YW1wLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Nlc3Npb25NYW5hZ2VyXSBGYWlsZWQgdG8gZ2V0IGF1dG8tc2F2ZWQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhciBhbGwgYXV0by1zYXZlZCBzZXNzaW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBdXRvU2F2ZWRTZXNzaW9ucygpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LnN0YXJ0c1dpdGgoQVVUT19TQVZFX0tFWV9QUkVGSVgpXG4gICAgKTtcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSkpO1xuICAgIGNvbnNvbGUubG9nKCdbc2Vzc2lvbk1hbmFnZXJdIENsZWFyZWQgYWxsIGF1dG8tc2F2ZWQgc2Vzc2lvbnMnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbc2Vzc2lvbk1hbmFnZXJdIEZhaWxlZCB0byBjbGVhciBhdXRvLXNhdmVzOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIG9sZCBhdXRvLXNhdmVzIChvbGRlciB0aGFuIGV4cGlyeSlcbiAqL1xuZnVuY3Rpb24gY2xlYW51cE9sZEF1dG9TYXZlcygpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LnN0YXJ0c1dpdGgoQVVUT19TQVZFX0tFWV9QUkVGSVgpXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gSlNPTi5wYXJzZShkYXRhKSBhcyB7IHRpbWVzdGFtcDogbnVtYmVyIH07XG4gICAgICAgICAgY29uc3QgYWdlID0gbm93IC0gc2Vzc2lvbkRhdGEudGltZXN0YW1wO1xuICAgICAgICAgIGlmIChhZ2UgPiBBVVRPX1NBVkVfRVhQSVJZX01TKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gSW52YWxpZCBkYXRhLCByZW1vdmUgaXRcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Nlc3Npb25NYW5hZ2VyXSBGYWlsZWQgdG8gY2xlYW51cCBvbGQgYXV0by1zYXZlczonLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRTdXBhYmFzZUNsaWVudCIsImlzU3VwYWJhc2VDb25maWd1cmVkIiwiQVVUT19TQVZFX0tFWV9QUkVGSVgiLCJBVVRPX1NBVkVfRVhQSVJZX01TIiwiZ2V0VmFsaWRBdXRoVG9rZW4iLCJzdXBhYmFzZSIsImRhdGEiLCJzZXNzaW9uIiwiZXJyb3IiLCJzZXNzaW9uRXJyb3IiLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsImFjY2Vzc190b2tlbiIsInRva2VuUGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwibm93IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsImV4cGlyZXNBdCIsImV4cCIsInRpbWVVbnRpbEV4cGlyeSIsImNvbnNvbGUiLCJsb2ciLCJyZWZyZXNoX3Rva2VuIiwicmVmcmVzaGVkU2Vzc2lvbiIsInJlZnJlc2hFcnJvciIsInJlZnJlc2hTZXNzaW9uIiwid2FybiIsInBhcnNlRXJyb3IiLCJpc1Nlc3Npb25WYWxpZCIsInRva2VuIiwiYXV0b1NhdmVTZXNzaW9uIiwic2Vzc2lvbkRhdGEiLCJrZXkiLCJ0aW1lc3RhbXAiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiY2xlYW51cE9sZEF1dG9TYXZlcyIsImdldEF1dG9TYXZlZFNlc3Npb24iLCJrZXlzIiwiT2JqZWN0IiwiZmlsdGVyIiwic3RhcnRzV2l0aCIsInNvcnRlZEtleXMiLCJzb3J0IiwiYSIsImIiLCJ0aW1lc3RhbXBBIiwicGFyc2VJbnQiLCJyZXBsYWNlIiwidGltZXN0YW1wQiIsIm1vc3RSZWNlbnRLZXkiLCJnZXRJdGVtIiwiYWdlIiwicmVtb3ZlSXRlbSIsInRyYW5zY3JpcHQiLCJwYXRpZW50IiwiY2xlYXJBdXRvU2F2ZWRTZXNzaW9ucyIsImZvckVhY2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/sessionManager.ts\n");

/***/ })

};
;