"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AppPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types */ \"(app-pages-browser)/./types.ts\");\n/* harmony import */ var _services_patientService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/patientService */ \"(app-pages-browser)/./services/patientService.ts\");\n/* harmony import */ var _services_subscriptionService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/subscriptionService */ \"(app-pages-browser)/./services/subscriptionService.ts\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./contexts/AuthContext.tsx\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./lib/supabase.ts\");\n/* harmony import */ var _components_ui_LoadingSpinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/LoadingSpinner */ \"(app-pages-browser)/./components/ui/LoadingSpinner.tsx\");\n/* harmony import */ var _components_ui_BottomNavBar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/BottomNavBar */ \"(app-pages-browser)/./components/ui/BottomNavBar.tsx\");\n/* harmony import */ var _components_ui_ReviewPrompt__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/ui/ReviewPrompt */ \"(app-pages-browser)/./components/ui/ReviewPrompt.tsx\");\n/* harmony import */ var _components_views_ViewRenderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/views/ViewRenderer */ \"(app-pages-browser)/./components/views/ViewRenderer.tsx\");\n/* harmony import */ var _components_gamification_BadgeUnlockToast__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/gamification/BadgeUnlockToast */ \"(app-pages-browser)/./components/gamification/BadgeUnlockToast.tsx\");\n/* harmony import */ var _hooks_useAppState__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/hooks/useAppState */ \"(app-pages-browser)/./hooks/useAppState.ts\");\n/* harmony import */ var _hooks_useTierManager__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/hooks/useTierManager */ \"(app-pages-browser)/./hooks/useTierManager.ts\");\n/* harmony import */ var _hooks_useSessionManager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/hooks/useSessionManager */ \"(app-pages-browser)/./hooks/useSessionManager.ts\");\n/* harmony import */ var _hooks_useStreak__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/useStreak */ \"(app-pages-browser)/./hooks/useStreak.ts\");\n/* harmony import */ var _hooks_useXP__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/hooks/useXP */ \"(app-pages-browser)/./hooks/useXP.ts\");\n/* harmony import */ var _hooks_useBadges__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/hooks/useBadges */ \"(app-pages-browser)/./hooks/useBadges.ts\");\n/* harmony import */ var _hooks_useAuthCallback__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @/hooks/useAuthCallback */ \"(app-pages-browser)/./hooks/useAuthCallback.ts\");\n/* harmony import */ var _hooks_useStripeCallback__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/hooks/useStripeCallback */ \"(app-pages-browser)/./hooks/useStripeCallback.ts\");\n/* harmony import */ var _hooks_useAppRouter__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @/hooks/useAppRouter */ \"(app-pages-browser)/./hooks/useAppRouter.ts\");\n/* harmony import */ var _hooks_useOnlineSync__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @/hooks/useOnlineSync */ \"(app-pages-browser)/./hooks/useOnlineSync.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Core components (always loaded)\n\n\n\n\n// Lazy-loaded components\nconst Onboarding = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_components_views_Onboarding_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! @/components/views/Onboarding */ \"(app-pages-browser)/./components/views/Onboarding.tsx\")));\n_c = Onboarding;\n// Gamification components\n\n// Custom hooks\n\n\n\n\n\n\n\n\n\n\nfunction AppPage() {\n    _s();\n    const { user, loading: authLoading, signOut } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth)();\n    // Use consolidated app state hook\n    const appState = (0,_hooks_useAppState__WEBPACK_IMPORTED_MODULE_12__.useAppState)();\n    const { view, setView, sessions, setSessions, sessionsLoading, setSessionsLoading, remainingFreeSessions, setRemainingFreeSessions, currentPatient, setCurrentPatient, currentSession, setCurrentSession, showOnboarding, setShowOnboarding, coachingSummary, setCoachingSummary, coachingSummaryError, setCoachingSummaryError, isGeneratingSummary, setIsGeneratingSummary, showReviewPrompt, setShowReviewPrompt, confirmationEmail, setConfirmationEmail, loggingOut, setLoggingOut } = appState;\n    // Use tier manager hook with server-side premium verification\n    const { userTier, setUserTier, refreshTier, isPremiumVerified, isVerifying: isTierVerifying } = (0,_hooks_useTierManager__WEBPACK_IMPORTED_MODULE_13__.useTierManager)();\n    // Use streak hook for gamification\n    const { currentStreak, updateStreak, processQueue: processStreakQueue } = (0,_hooks_useStreak__WEBPACK_IMPORTED_MODULE_15__.useStreak)();\n    // Use XP hook for gamification\n    const { addXP, processQueue: processXPQueue } = (0,_hooks_useXP__WEBPACK_IMPORTED_MODULE_16__.useXP)();\n    // Use badges hook for gamification\n    const { checkAndUnlockBadges, newlyUnlockedBadges, markBadgeAsSeen } = (0,_hooks_useBadges__WEBPACK_IMPORTED_MODULE_17__.useBadges)();\n    // Use online sync hook to process queued operations when connectivity is restored\n    (0,_hooks_useOnlineSync__WEBPACK_IMPORTED_MODULE_21__.useOnlineSync)({\n        processStreakQueue,\n        processXPQueue,\n        isAuthenticated: !!user\n    });\n    // Track which badge to show in toast (one at a time)\n    const [badgeToastQueue, setBadgeToastQueue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // When new badges are unlocked, add them to the toast queue - FIXED: Use ref to prevent loops\n    const previousBadgesRef = useRef([]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppPage.useEffect\": ()=>{\n            const currentBadgeIds = newlyUnlockedBadges.map({\n                \"AppPage.useEffect.currentBadgeIds\": (b)=>b.id\n            }[\"AppPage.useEffect.currentBadgeIds\"]);\n            const previousBadgeIds = previousBadgesRef.current;\n            // Only process if badges actually changed\n            if (currentBadgeIds.length > 0 && JSON.stringify(currentBadgeIds) !== JSON.stringify(previousBadgeIds)) {\n                setBadgeToastQueue({\n                    \"AppPage.useEffect\": (prev)=>{\n                        // Add only badges not already in queue\n                        const existingIds = new Set(prev);\n                        const toAdd = currentBadgeIds.filter({\n                            \"AppPage.useEffect.toAdd\": (id)=>!existingIds.has(id)\n                        }[\"AppPage.useEffect.toAdd\"]);\n                        return [\n                            ...prev,\n                            ...toAdd\n                        ];\n                    }\n                }[\"AppPage.useEffect\"]);\n                previousBadgesRef.current = currentBadgeIds;\n            }\n        }\n    }[\"AppPage.useEffect\"], [\n        newlyUnlockedBadges\n    ]);\n    // Handle dismissing a badge toast\n    const handleBadgeToastClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleBadgeToastClose]\": async ()=>{\n            if (badgeToastQueue.length > 0) {\n                const dismissedBadgeId = badgeToastQueue[0];\n                await markBadgeAsSeen(dismissedBadgeId);\n                setBadgeToastQueue({\n                    \"AppPage.useCallback[handleBadgeToastClose]\": (prev)=>prev.slice(1)\n                }[\"AppPage.useCallback[handleBadgeToastClose]\"]);\n            }\n        }\n    }[\"AppPage.useCallback[handleBadgeToastClose]\"], [\n        badgeToastQueue,\n        markBadgeAsSeen\n    ]);\n    // Get the current badge to show\n    const currentBadgeToShow = newlyUnlockedBadges.find((b)=>b.id === badgeToastQueue[0]);\n    // Use session manager hook\n    const { saveNewSession } = (0,_hooks_useSessionManager__WEBPACK_IMPORTED_MODULE_14__.useSessionManager)({\n        user,\n        authLoading,\n        userTier,\n        setSessions,\n        setSessionsLoading,\n        setRemainingFreeSessions,\n        updateStreak,\n        addXP,\n        checkAndUnlockBadges,\n        currentStreak\n    });\n    // Use auth callback hook\n    (0,_hooks_useAuthCallback__WEBPACK_IMPORTED_MODULE_18__.useAuthCallback)({\n        setView\n    });\n    // Use Stripe callback hook\n    (0,_hooks_useStripeCallback__WEBPACK_IMPORTED_MODULE_19__.useStripeCallback)({\n        user,\n        authLoading,\n        setUserTier,\n        setRemainingFreeSessions,\n        setView\n    });\n    // Use app router hook\n    (0,_hooks_useAppRouter__WEBPACK_IMPORTED_MODULE_20__.useAppRouter)({\n        user,\n        authLoading,\n        view,\n        setView\n    });\n    // Load onboarding state - FIXED: Only run once on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppPage.useEffect\": ()=>{\n            const onboardingComplete = localStorage.getItem('mi-coach-onboarding-complete');\n            setShowOnboarding(onboardingComplete !== 'true');\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"AppPage.useEffect\"], []); // Empty deps - only run once on mount\n    const handleOnboardingFinish = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleOnboardingFinish]\": ()=>{\n            localStorage.setItem('mi-coach-onboarding-complete', 'true');\n            setShowOnboarding(false);\n            // After onboarding, go to Dashboard (anonymous users can access it)\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n        }\n    }[\"AppPage.useCallback[handleOnboardingFinish]\"], [\n        setShowOnboarding,\n        setView\n    ]);\n    const handleStartPractice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleStartPractice]\": async ()=>{\n            // Require authentication to start practice\n            if (!user) {\n                console.log('[App] User not authenticated, redirecting to login');\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Login);\n                return;\n            }\n            // Guard: wait until userTier is loaded and verification is complete\n            if (!userTier || userTier === '' || isTierVerifying) {\n                console.warn('[App] User tier not yet loaded or still verifying, waiting...');\n                return;\n            }\n            // Check if user can start a new session\n            const canStart = await (0,_services_subscriptionService__WEBPACK_IMPORTED_MODULE_4__.canStartSession)(user.id, userTier);\n            if (!canStart) {\n                console.log('[App] User cannot start session (limit reached), showing paywall');\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Paywall);\n                return;\n            }\n            if (userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium) {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.ScenarioSelection);\n            } else {\n                const patient = (0,_services_patientService__WEBPACK_IMPORTED_MODULE_3__.generatePatientProfile)();\n                setCurrentPatient(patient);\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Practice);\n            }\n        }\n    }[\"AppPage.useCallback[handleStartPractice]\"], [\n        user,\n        userTier,\n        isTierVerifying,\n        setView,\n        setCurrentPatient\n    ]);\n    const handleStartFilteredPractice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleStartFilteredPractice]\": (filters)=>{\n            // Require authentication to start practice\n            if (!user) {\n                console.log('[App] User not authenticated, redirecting to login');\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Login);\n                return;\n            }\n            const patient = (0,_services_patientService__WEBPACK_IMPORTED_MODULE_3__.generatePatientProfile)(filters);\n            setCurrentPatient(patient);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Practice);\n        }\n    }[\"AppPage.useCallback[handleStartFilteredPractice]\"], [\n        user,\n        setCurrentPatient,\n        setView\n    ]);\n    // Save the new session when practice is finished\n    const handleFinishPractice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleFinishPractice]\": async (transcript, feedback)=>{\n            if (!currentPatient) {\n                console.error(\"[App] Cannot save session: missing patient\");\n                return;\n            }\n            const newSession = await saveNewSession(transcript, feedback, currentPatient, sessions, userTier);\n            setCurrentSession(newSession);\n            setCoachingSummary(null); // Invalidate old summary\n            setCoachingSummaryError(null);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Feedback);\n        }\n    }[\"AppPage.useCallback[handleFinishPractice]\"], [\n        currentPatient,\n        sessions,\n        userTier,\n        saveNewSession,\n        setCurrentSession,\n        setCoachingSummary,\n        setCoachingSummaryError,\n        setView\n    ]);\n    const handleDoneFromFeedback = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleDoneFromFeedback]\": ()=>{\n            const sessionCount = parseInt(localStorage.getItem('mi-coach-session-count') || '0', 10);\n            const reviewDismissed = localStorage.getItem('mi-coach-review-dismissed') === 'true';\n            const remindAfterCount = parseInt(localStorage.getItem('mi-coach-review-remind-after') || '0', 10);\n            if (!reviewDismissed && sessionCount >= 3 && sessionCount >= remindAfterCount) {\n                setShowReviewPrompt(true);\n            } else {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n            }\n        }\n    }[\"AppPage.useCallback[handleDoneFromFeedback]\"], [\n        setShowReviewPrompt,\n        setView\n    ]);\n    const handleReviewPromptClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleReviewPromptClose]\": (choice)=>{\n            setShowReviewPrompt(false);\n            if (choice === 'rate' || choice === 'no') {\n                localStorage.setItem('mi-coach-review-dismissed', 'true');\n                if (choice === 'rate') {\n                    // In a real app, you'd link to the store.\n                    alert(\"Thank you for your feedback! You will now be redirected to the app store.\");\n                }\n            } else if (choice === 'later') {\n                const sessionCount = parseInt(localStorage.getItem('mi-coach-session-count') || '0', 10);\n                // Remind again after 3 more sessions\n                localStorage.setItem('mi-coach-review-remind-after', (sessionCount + 3).toString());\n            }\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n        }\n    }[\"AppPage.useCallback[handleReviewPromptClose]\"], [\n        setShowReviewPrompt,\n        setView\n    ]);\n    const generateCoachingSummaryFromEdgeFunction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\": async (sessions)=>{\n            // Get Supabase URL and construct Edge Function URL\n            const supabaseUrl = \"https://alszwgqoicjgfrhecscj.supabase.co\";\n            if (!supabaseUrl) {\n                throw new Error('Supabase URL not configured');\n            }\n            // Use dual-run wrapper for Strangler Fig migration tracking\n            // Calls both legacy and v2 functions, compares outputs, tracks matches\n            const functionsUrl = `${supabaseUrl}/functions/v1/dual-run-coaching-summary`;\n            // Require authentication - get JWT token from session\n            const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_6__.getSupabaseClient)();\n            let authToken;\n            try {\n                const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n                if (sessionError || !session || !session.access_token) {\n                    throw new Error('Your session has expired. Please refresh the page and log in again.');\n                }\n                authToken = session.access_token;\n            } catch (error) {\n                console.error('[App] Failed to get auth token:', error);\n                throw new Error('Failed to authenticate. Please refresh the page and try again.');\n            }\n            // Prepare request with required Authorization header\n            const headers = {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${authToken}`\n            };\n            // Make request to Edge Function\n            const response = await fetch(functionsUrl, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify({\n                    sessions\n                })\n            });\n            // Handle errors\n            if (!response.ok) {\n                const errorData = await response.json().catch({\n                    \"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\": ()=>({\n                            error: 'Unknown error'\n                        })\n                }[\"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\"]);\n                const errorMessage = errorData.error || `Failed to generate coaching summary (${response.status})`;\n                // Map HTTP status codes to user-friendly messages\n                if (response.status === 401) {\n                    throw new Error('Your session has expired. Please refresh the page and log in again.');\n                } else if (response.status === 429) {\n                    throw new Error('AI service is busy. Please try again in a moment.');\n                } else if (response.status === 504) {\n                    throw new Error('Coaching summary generation timed out. Please try again.');\n                } else if (response.status === 500) {\n                    throw new Error('AI service error. Please try again later.');\n                } else {\n                    throw new Error(errorMessage);\n                }\n            }\n            // Parse and return response\n            const data = await response.json();\n            return data;\n        }\n    }[\"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\"], []);\n    const handleGenerateCoachingSummary = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleGenerateCoachingSummary]\": async ()=>{\n            if (coachingSummary && !isGeneratingSummary) {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.CoachingSummary);\n                return;\n            }\n            if (userTier !== _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium) {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Paywall);\n                return;\n            }\n            setCoachingSummaryError(null);\n            setIsGeneratingSummary(true);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.CoachingSummary);\n            try {\n                const premiumSessions = sessions.filter({\n                    \"AppPage.useCallback[handleGenerateCoachingSummary].premiumSessions\": (s)=>s.tier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium\n                }[\"AppPage.useCallback[handleGenerateCoachingSummary].premiumSessions\"]);\n                if (premiumSessions.length === 0) {\n                    setCoachingSummaryError(\"You need to complete at least one Premium session to generate a summary.\");\n                    setIsGeneratingSummary(false);\n                    return;\n                }\n                const reportObject = await generateCoachingSummaryFromEdgeFunction(premiumSessions);\n                setCoachingSummary(reportObject);\n            } catch (error) {\n                console.error(\"Failed to generate coaching summary:\", error);\n                const errorMessage = error instanceof Error ? error.message : \"Sorry, we couldn't generate your summary at this time. Please try again later.\";\n                setCoachingSummaryError(errorMessage);\n            } finally{\n                setIsGeneratingSummary(false);\n            }\n        }\n    }[\"AppPage.useCallback[handleGenerateCoachingSummary]\"], [\n        coachingSummary,\n        isGeneratingSummary,\n        userTier,\n        sessions,\n        setView,\n        setCoachingSummaryError,\n        setIsGeneratingSummary,\n        setCoachingSummary,\n        generateCoachingSummaryFromEdgeFunction\n    ]);\n    const handleNavigate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleNavigate]\": (targetView)=>setView(targetView)\n    }[\"AppPage.useCallback[handleNavigate]\"], [\n        setView\n    ]);\n    const handleEmailConfirmation = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleEmailConfirmation]\": (email)=>{\n            setConfirmationEmail(email);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.EmailConfirmation);\n        }\n    }[\"AppPage.useCallback[handleEmailConfirmation]\"], [\n        setConfirmationEmail,\n        setView\n    ]);\n    const handleLogout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleLogout]\": async ()=>{\n            if (loggingOut) {\n                return;\n            }\n            setLoggingOut(true);\n            // Reset app state\n            setUserTier(_types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Free);\n            localStorage.removeItem('mi-coach-tier');\n            setSessions([]);\n            setRemainingFreeSessions(null);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Login);\n            let logoutError = null;\n            try {\n                await signOut();\n            } catch (error) {\n                const err = error instanceof Error ? error : new Error('Logout failed');\n                console.error('[App] Logout failed:', err);\n                logoutError = err;\n            } finally{\n                setLoggingOut(false);\n            }\n            if (logoutError) {\n                throw logoutError;\n            }\n        }\n    }[\"AppPage.useCallback[handleLogout]\"], [\n        loggingOut,\n        setLoggingOut,\n        setUserTier,\n        setSessions,\n        setRemainingFreeSessions,\n        setView,\n        signOut\n    ]);\n    // Save the new user tier to localStorage and Supabase upon upgrade.\n    const handleUpgrade = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleUpgrade]\": async ()=>{\n            if (!user) {\n                console.error('[App] Cannot upgrade: user not authenticated');\n                return;\n            }\n            try {\n                const newTier = _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium;\n                // Update in Supabase\n                console.log('[App] Upgrading user tier to Premium');\n                // Note: updateUserTier is called internally by the payment processor\n                // For now, just update locally and in localStorage\n                setUserTier(newTier);\n                // Reload tier from Supabase to confirm\n                const updatedTier = await refreshTier();\n                if (updatedTier) {\n                    setUserTier(updatedTier);\n                }\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard); // Go back to dashboard after upgrading\n            } catch (error) {\n                console.error('[App] Failed to upgrade tier:', error);\n                // Still navigate to dashboard even if refresh fails\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n            }\n        }\n    }[\"AppPage.useCallback[handleUpgrade]\"], [\n        user,\n        setUserTier,\n        refreshTier,\n        setView\n    ]);\n    const handleTierUpdated = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleTierUpdated]\": async ()=>{\n            // Reload tier from Supabase after subscription change\n            if (user) {\n                const updatedTier = await refreshTier();\n                if (updatedTier) {\n                    setUserTier(updatedTier);\n                }\n            }\n        }\n    }[\"AppPage.useCallback[handleTierUpdated]\"], [\n        user,\n        refreshTier,\n        setUserTier\n    ]);\n    // Show loading state while auth is initializing\n    if (authLoading || showOnboarding === null) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_LoadingSpinner__WEBPACK_IMPORTED_MODULE_7__.PageLoader, {\n            message: \"Initializing...\"\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n            lineNumber: 430,\n            columnNumber: 12\n        }, this);\n    }\n    // Show onboarding if not completed\n    if (showOnboarding) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n            fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_LoadingSpinner__WEBPACK_IMPORTED_MODULE_7__.PageLoader, {\n                message: \"Loading onboarding...\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 436,\n                columnNumber: 27\n            }, void 0),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Onboarding, {\n                onFinish: handleOnboardingFinish\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 437,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n            lineNumber: 436,\n            columnNumber: 7\n        }, this);\n    }\n    // Show login/auth screens when on those views (allow anonymous access to other views)\n    const isAuthView = view === _types__WEBPACK_IMPORTED_MODULE_2__.View.Login || view === _types__WEBPACK_IMPORTED_MODULE_2__.View.ForgotPassword || view === _types__WEBPACK_IMPORTED_MODULE_2__.View.EmailConfirmation || view === _types__WEBPACK_IMPORTED_MODULE_2__.View.ResetPassword;\n    const shouldRenderAuthViews = !user && !authLoading && isAuthView;\n    const viewsWithNavBar = [\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard,\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.ResourceLibrary,\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.Settings,\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.Calendar\n    ];\n    const isPremiumFeedback = view === _types__WEBPACK_IMPORTED_MODULE_2__.View.Feedback && userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium;\n    const shouldShowNavBar = viewsWithNavBar.includes(view) || isPremiumFeedback;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-transparent text-[var(--color-text-primary)]\",\n        id: \"main-content\",\n        children: [\n            shouldShowNavBar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col\",\n                style: {\n                    height: '100vh'\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                        className: \"flex-1 overflow-y-auto pb-20\",\n                        role: \"main\",\n                        \"aria-label\": \"Main content\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_views_ViewRenderer__WEBPACK_IMPORTED_MODULE_10__.ViewRenderer, {\n                            view: view,\n                            userTier: userTier,\n                            user: user,\n                            sessions: sessions,\n                            remainingFreeSessions: remainingFreeSessions,\n                            currentPatient: currentPatient,\n                            currentSession: currentSession,\n                            coachingSummary: coachingSummary,\n                            coachingSummaryError: coachingSummaryError,\n                            isGeneratingSummary: isGeneratingSummary,\n                            confirmationEmail: confirmationEmail,\n                            isPremiumVerified: isPremiumVerified,\n                            isTierVerifying: isTierVerifying,\n                            onNavigate: handleNavigate,\n                            onStartPractice: handleStartPractice,\n                            onStartFilteredPractice: handleStartFilteredPractice,\n                            onFinishPractice: handleFinishPractice,\n                            onDoneFromFeedback: handleDoneFromFeedback,\n                            onUpgrade: handleUpgrade,\n                            onLogout: handleLogout,\n                            onGenerateCoachingSummary: handleGenerateCoachingSummary,\n                            onEmailConfirmation: handleEmailConfirmation,\n                            onTierUpdated: handleTierUpdated\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                            lineNumber: 455,\n                            columnNumber: 19\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                        lineNumber: 454,\n                        columnNumber: 15\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_BottomNavBar__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        currentView: view,\n                        onNavigate: handleNavigate,\n                        userTier: userTier\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                        lineNumber: 481,\n                        columnNumber: 15\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 453,\n                columnNumber: 11\n            }, this) : // Views without the main nav bar (e.g., practice, feedback, paywall)\n            // These components manage their own full-screen layout.\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_views_ViewRenderer__WEBPACK_IMPORTED_MODULE_10__.ViewRenderer, {\n                view: view,\n                userTier: userTier,\n                user: user,\n                sessions: sessions,\n                remainingFreeSessions: remainingFreeSessions,\n                currentPatient: currentPatient,\n                currentSession: currentSession,\n                coachingSummary: coachingSummary,\n                coachingSummaryError: coachingSummaryError,\n                isGeneratingSummary: isGeneratingSummary,\n                confirmationEmail: confirmationEmail,\n                isPremiumVerified: isPremiumVerified,\n                isTierVerifying: isTierVerifying,\n                onNavigate: handleNavigate,\n                onStartPractice: handleStartPractice,\n                onStartFilteredPractice: handleStartFilteredPractice,\n                onFinishPractice: handleFinishPractice,\n                onDoneFromFeedback: handleDoneFromFeedback,\n                onUpgrade: handleUpgrade,\n                onLogout: handleLogout,\n                onGenerateCoachingSummary: handleGenerateCoachingSummary,\n                onEmailConfirmation: handleEmailConfirmation,\n                onTierUpdated: handleTierUpdated\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 486,\n                columnNumber: 11\n            }, this),\n            showReviewPrompt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_ReviewPrompt__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                onClose: handleReviewPromptClose\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 513,\n                columnNumber: 11\n            }, this),\n            currentBadgeToShow && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_gamification_BadgeUnlockToast__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                badge: currentBadgeToShow,\n                onClose: handleBadgeToastClose\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 517,\n                columnNumber: 11\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"aria-live-region\",\n                \"aria-live\": \"polite\",\n                \"aria-atomic\": \"true\",\n                className: \"sr-only\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 523,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n        lineNumber: 451,\n        columnNumber: 5\n    }, this);\n}\n_s(AppPage, \"CJVSLQ9qUfukkbDXB1V/MUWsiBg=\", false, function() {\n    return [\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth,\n        _hooks_useAppState__WEBPACK_IMPORTED_MODULE_12__.useAppState,\n        _hooks_useTierManager__WEBPACK_IMPORTED_MODULE_13__.useTierManager,\n        _hooks_useStreak__WEBPACK_IMPORTED_MODULE_15__.useStreak,\n        _hooks_useXP__WEBPACK_IMPORTED_MODULE_16__.useXP,\n        _hooks_useBadges__WEBPACK_IMPORTED_MODULE_17__.useBadges,\n        _hooks_useOnlineSync__WEBPACK_IMPORTED_MODULE_21__.useOnlineSync,\n        _hooks_useSessionManager__WEBPACK_IMPORTED_MODULE_14__.useSessionManager,\n        _hooks_useAuthCallback__WEBPACK_IMPORTED_MODULE_18__.useAuthCallback,\n        _hooks_useStripeCallback__WEBPACK_IMPORTED_MODULE_19__.useStripeCallback,\n        _hooks_useAppRouter__WEBPACK_IMPORTED_MODULE_20__.useAppRouter\n    ];\n});\n_c1 = AppPage;\nvar _c, _c1;\n$RefreshReg$(_c, \"Onboarding\");\n$RefreshReg$(_c1, \"AppPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0NBQ0csOERBQUN4QyxtRUFBWUE7Z0JBQUN1TSxTQUFTbEY7Ozs7OztZQUcxQmpDLG9DQUNHLDhEQUFDakYsa0ZBQWdCQTtnQkFDZnFNLE9BQU9wSDtnQkFDUG1ILFNBQVN0SDs7Ozs7OzBCQUlmLDhEQUFDb0c7Z0JBQUloSCxJQUFHO2dCQUFtQm9JLGFBQVU7Z0JBQVNDLGVBQVk7Z0JBQU9wQixXQUFVOzs7Ozs7Ozs7Ozs7QUFHakY7R0E1ZXdCeEs7O1FBQzBCbEIsMERBQU9BO1FBR3RDUSw0REFBV0E7UUErQm9FQyxrRUFBY0E7UUFHcENFLHdEQUFTQTtRQUduQ0MsZ0RBQUtBO1FBR2tCQyx3REFBU0E7UUFHaEZJLGdFQUFhQTtRQXlDY1Asd0VBQWlCQTtRQWM1Q0ksb0VBQWVBO1FBR2ZDLHdFQUFpQkE7UUFTakJDLDhEQUFZQTs7O01BbEhVRSIsInNvdXJjZXMiOlsiL1VzZXJzL2phdmkvZGV2L01haW4yTUkvYXBwL3BhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCBTdXNwZW5zZSwgbGF6eSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFVzZXJUaWVyLCBWaWV3LCBQYXRpZW50UHJvZmlsZSwgU2Vzc2lvbiwgRmVlZGJhY2ssIENoYXRNZXNzYWdlLCBQYXRpZW50UHJvZmlsZUZpbHRlcnMsIENvYWNoaW5nU3VtbWFyeSB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVQYXRpZW50UHJvZmlsZSB9IGZyb20gJ0Avc2VydmljZXMvcGF0aWVudFNlcnZpY2UnO1xuaW1wb3J0IHsgY2FuU3RhcnRTZXNzaW9uIH0gZnJvbSAnQC9zZXJ2aWNlcy9zdWJzY3JpcHRpb25TZXJ2aWNlJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCB7IGdldFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuXG4vLyBDb3JlIGNvbXBvbmVudHMgKGFsd2F5cyBsb2FkZWQpXG5pbXBvcnQgeyBQYWdlTG9hZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL0xvYWRpbmdTcGlubmVyJztcbmltcG9ydCBCb3R0b21OYXZCYXIgZnJvbSAnQC9jb21wb25lbnRzL3VpL0JvdHRvbU5hdkJhcic7XG5pbXBvcnQgUmV2aWV3UHJvbXB0IGZyb20gJ0AvY29tcG9uZW50cy91aS9SZXZpZXdQcm9tcHQnO1xuaW1wb3J0IHsgVmlld1JlbmRlcmVyIH0gZnJvbSAnQC9jb21wb25lbnRzL3ZpZXdzL1ZpZXdSZW5kZXJlcic7XG5cbi8vIExhenktbG9hZGVkIGNvbXBvbmVudHNcbmNvbnN0IE9uYm9hcmRpbmcgPSBsYXp5KCgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL3ZpZXdzL09uYm9hcmRpbmcnKSk7XG5cbi8vIEdhbWlmaWNhdGlvbiBjb21wb25lbnRzXG5pbXBvcnQgQmFkZ2VVbmxvY2tUb2FzdCBmcm9tICdAL2NvbXBvbmVudHMvZ2FtaWZpY2F0aW9uL0JhZGdlVW5sb2NrVG9hc3QnO1xuXG4vLyBDdXN0b20gaG9va3NcbmltcG9ydCB7IHVzZUFwcFN0YXRlIH0gZnJvbSAnQC9ob29rcy91c2VBcHBTdGF0ZSc7XG5pbXBvcnQgeyB1c2VUaWVyTWFuYWdlciB9IGZyb20gJ0AvaG9va3MvdXNlVGllck1hbmFnZXInO1xuaW1wb3J0IHsgdXNlU2Vzc2lvbk1hbmFnZXIgfSBmcm9tICdAL2hvb2tzL3VzZVNlc3Npb25NYW5hZ2VyJztcbmltcG9ydCB7IHVzZVN0cmVhayB9IGZyb20gJ0AvaG9va3MvdXNlU3RyZWFrJztcbmltcG9ydCB7IHVzZVhQIH0gZnJvbSAnQC9ob29rcy91c2VYUCc7XG5pbXBvcnQgeyB1c2VCYWRnZXMgfSBmcm9tICdAL2hvb2tzL3VzZUJhZGdlcyc7XG5pbXBvcnQgeyB1c2VBdXRoQ2FsbGJhY2sgfSBmcm9tICdAL2hvb2tzL3VzZUF1dGhDYWxsYmFjayc7XG5pbXBvcnQgeyB1c2VTdHJpcGVDYWxsYmFjayB9IGZyb20gJ0AvaG9va3MvdXNlU3RyaXBlQ2FsbGJhY2snO1xuaW1wb3J0IHsgdXNlQXBwUm91dGVyIH0gZnJvbSAnQC9ob29rcy91c2VBcHBSb3V0ZXInO1xuaW1wb3J0IHsgdXNlT25saW5lU3luYyB9IGZyb20gJ0AvaG9va3MvdXNlT25saW5lU3luYyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcFBhZ2UoKSB7XG4gIGNvbnN0IHsgdXNlciwgbG9hZGluZzogYXV0aExvYWRpbmcsIHNpZ25PdXQgfSA9IHVzZUF1dGgoKTtcbiAgXG4gIC8vIFVzZSBjb25zb2xpZGF0ZWQgYXBwIHN0YXRlIGhvb2tcbiAgY29uc3QgYXBwU3RhdGUgPSB1c2VBcHBTdGF0ZSgpO1xuICBjb25zdCB7XG4gICAgdmlldyxcbiAgICBzZXRWaWV3LFxuICAgIHNlc3Npb25zLFxuICAgIHNldFNlc3Npb25zLFxuICAgIHNlc3Npb25zTG9hZGluZyxcbiAgICBzZXRTZXNzaW9uc0xvYWRpbmcsXG4gICAgcmVtYWluaW5nRnJlZVNlc3Npb25zLFxuICAgIHNldFJlbWFpbmluZ0ZyZWVTZXNzaW9ucyxcbiAgICBjdXJyZW50UGF0aWVudCxcbiAgICBzZXRDdXJyZW50UGF0aWVudCxcbiAgICBjdXJyZW50U2Vzc2lvbixcbiAgICBzZXRDdXJyZW50U2Vzc2lvbixcbiAgICBzaG93T25ib2FyZGluZyxcbiAgICBzZXRTaG93T25ib2FyZGluZyxcbiAgICBjb2FjaGluZ1N1bW1hcnksXG4gICAgc2V0Q29hY2hpbmdTdW1tYXJ5LFxuICAgIGNvYWNoaW5nU3VtbWFyeUVycm9yLFxuICAgIHNldENvYWNoaW5nU3VtbWFyeUVycm9yLFxuICAgIGlzR2VuZXJhdGluZ1N1bW1hcnksXG4gICAgc2V0SXNHZW5lcmF0aW5nU3VtbWFyeSxcbiAgICBzaG93UmV2aWV3UHJvbXB0LFxuICAgIHNldFNob3dSZXZpZXdQcm9tcHQsXG4gICAgY29uZmlybWF0aW9uRW1haWwsXG4gICAgc2V0Q29uZmlybWF0aW9uRW1haWwsXG4gICAgbG9nZ2luZ091dCxcbiAgICBzZXRMb2dnaW5nT3V0LFxuICB9ID0gYXBwU3RhdGU7XG5cbiAgLy8gVXNlIHRpZXIgbWFuYWdlciBob29rIHdpdGggc2VydmVyLXNpZGUgcHJlbWl1bSB2ZXJpZmljYXRpb25cbiAgY29uc3QgeyB1c2VyVGllciwgc2V0VXNlclRpZXIsIHJlZnJlc2hUaWVyLCBpc1ByZW1pdW1WZXJpZmllZCwgaXNWZXJpZnlpbmc6IGlzVGllclZlcmlmeWluZyB9ID0gdXNlVGllck1hbmFnZXIoKTtcblxuICAvLyBVc2Ugc3RyZWFrIGhvb2sgZm9yIGdhbWlmaWNhdGlvblxuICBjb25zdCB7IGN1cnJlbnRTdHJlYWssIHVwZGF0ZVN0cmVhaywgcHJvY2Vzc1F1ZXVlOiBwcm9jZXNzU3RyZWFrUXVldWUgfSA9IHVzZVN0cmVhaygpO1xuXG4gIC8vIFVzZSBYUCBob29rIGZvciBnYW1pZmljYXRpb25cbiAgY29uc3QgeyBhZGRYUCwgcHJvY2Vzc1F1ZXVlOiBwcm9jZXNzWFBRdWV1ZSB9ID0gdXNlWFAoKTtcblxuICAvLyBVc2UgYmFkZ2VzIGhvb2sgZm9yIGdhbWlmaWNhdGlvblxuICBjb25zdCB7IGNoZWNrQW5kVW5sb2NrQmFkZ2VzLCBuZXdseVVubG9ja2VkQmFkZ2VzLCBtYXJrQmFkZ2VBc1NlZW4gfSA9IHVzZUJhZGdlcygpO1xuXG4gIC8vIFVzZSBvbmxpbmUgc3luYyBob29rIHRvIHByb2Nlc3MgcXVldWVkIG9wZXJhdGlvbnMgd2hlbiBjb25uZWN0aXZpdHkgaXMgcmVzdG9yZWRcbiAgdXNlT25saW5lU3luYyh7XG4gICAgcHJvY2Vzc1N0cmVha1F1ZXVlLFxuICAgIHByb2Nlc3NYUFF1ZXVlLFxuICAgIGlzQXV0aGVudGljYXRlZDogISF1c2VyLFxuICB9KTtcblxuICAvLyBUcmFjayB3aGljaCBiYWRnZSB0byBzaG93IGluIHRvYXN0IChvbmUgYXQgYSB0aW1lKVxuICBjb25zdCBbYmFkZ2VUb2FzdFF1ZXVlLCBzZXRCYWRnZVRvYXN0UXVldWVdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcblxuICAvLyBXaGVuIG5ldyBiYWRnZXMgYXJlIHVubG9ja2VkLCBhZGQgdGhlbSB0byB0aGUgdG9hc3QgcXVldWUgLSBGSVhFRDogVXNlIHJlZiB0byBwcmV2ZW50IGxvb3BzXG4gIGNvbnN0IHByZXZpb3VzQmFkZ2VzUmVmID0gdXNlUmVmPHN0cmluZ1tdPihbXSk7XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRCYWRnZUlkcyA9IG5ld2x5VW5sb2NrZWRCYWRnZXMubWFwKGIgPT4gYi5pZCk7XG4gICAgY29uc3QgcHJldmlvdXNCYWRnZUlkcyA9IHByZXZpb3VzQmFkZ2VzUmVmLmN1cnJlbnQ7XG4gICAgXG4gICAgLy8gT25seSBwcm9jZXNzIGlmIGJhZGdlcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKGN1cnJlbnRCYWRnZUlkcy5sZW5ndGggPiAwICYmIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRCYWRnZUlkcykgIT09IEpTT04uc3RyaW5naWZ5KHByZXZpb3VzQmFkZ2VJZHMpKSB7XG4gICAgICBzZXRCYWRnZVRvYXN0UXVldWUocHJldiA9PiB7XG4gICAgICAgIC8vIEFkZCBvbmx5IGJhZGdlcyBub3QgYWxyZWFkeSBpbiBxdWV1ZVxuICAgICAgICBjb25zdCBleGlzdGluZ0lkcyA9IG5ldyBTZXQocHJldik7XG4gICAgICAgIGNvbnN0IHRvQWRkID0gY3VycmVudEJhZGdlSWRzLmZpbHRlcihpZCA9PiAhZXhpc3RpbmdJZHMuaGFzKGlkKSk7XG4gICAgICAgIHJldHVybiBbLi4ucHJldiwgLi4udG9BZGRdO1xuICAgICAgfSk7XG4gICAgICBwcmV2aW91c0JhZGdlc1JlZi5jdXJyZW50ID0gY3VycmVudEJhZGdlSWRzO1xuICAgIH1cbiAgfSwgW25ld2x5VW5sb2NrZWRCYWRnZXNdKTtcblxuICAvLyBIYW5kbGUgZGlzbWlzc2luZyBhIGJhZGdlIHRvYXN0XG4gIGNvbnN0IGhhbmRsZUJhZGdlVG9hc3RDbG9zZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoYmFkZ2VUb2FzdFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGRpc21pc3NlZEJhZGdlSWQgPSBiYWRnZVRvYXN0UXVldWVbMF07XG4gICAgICBhd2FpdCBtYXJrQmFkZ2VBc1NlZW4oZGlzbWlzc2VkQmFkZ2VJZCk7XG4gICAgICBzZXRCYWRnZVRvYXN0UXVldWUocHJldiA9PiBwcmV2LnNsaWNlKDEpKTtcbiAgICB9XG4gIH0sIFtiYWRnZVRvYXN0UXVldWUsIG1hcmtCYWRnZUFzU2Vlbl0pO1xuXG4gIC8vIEdldCB0aGUgY3VycmVudCBiYWRnZSB0byBzaG93XG4gIGNvbnN0IGN1cnJlbnRCYWRnZVRvU2hvdyA9IG5ld2x5VW5sb2NrZWRCYWRnZXMuZmluZChiID0+IGIuaWQgPT09IGJhZGdlVG9hc3RRdWV1ZVswXSk7XG5cbiAgLy8gVXNlIHNlc3Npb24gbWFuYWdlciBob29rXG4gIGNvbnN0IHsgc2F2ZU5ld1Nlc3Npb24gfSA9IHVzZVNlc3Npb25NYW5hZ2VyKHtcbiAgICB1c2VyLFxuICAgIGF1dGhMb2FkaW5nLFxuICAgIHVzZXJUaWVyLFxuICAgIHNldFNlc3Npb25zLFxuICAgIHNldFNlc3Npb25zTG9hZGluZyxcbiAgICBzZXRSZW1haW5pbmdGcmVlU2Vzc2lvbnMsXG4gICAgdXBkYXRlU3RyZWFrLFxuICAgIGFkZFhQLFxuICAgIGNoZWNrQW5kVW5sb2NrQmFkZ2VzLFxuICAgIGN1cnJlbnRTdHJlYWssXG4gIH0pO1xuXG4gIC8vIFVzZSBhdXRoIGNhbGxiYWNrIGhvb2tcbiAgdXNlQXV0aENhbGxiYWNrKHsgc2V0VmlldyB9KTtcblxuICAvLyBVc2UgU3RyaXBlIGNhbGxiYWNrIGhvb2tcbiAgdXNlU3RyaXBlQ2FsbGJhY2soe1xuICAgIHVzZXIsXG4gICAgYXV0aExvYWRpbmcsXG4gICAgc2V0VXNlclRpZXIsXG4gICAgc2V0UmVtYWluaW5nRnJlZVNlc3Npb25zLFxuICAgIHNldFZpZXcsXG4gIH0pO1xuXG4gIC8vIFVzZSBhcHAgcm91dGVyIGhvb2tcbiAgdXNlQXBwUm91dGVyKHsgdXNlciwgYXV0aExvYWRpbmcsIHZpZXcsIHNldFZpZXcgfSk7XG5cbiAgLy8gTG9hZCBvbmJvYXJkaW5nIHN0YXRlIC0gRklYRUQ6IE9ubHkgcnVuIG9uY2Ugb24gbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvbmJvYXJkaW5nQ29tcGxldGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWktY29hY2gtb25ib2FyZGluZy1jb21wbGV0ZScpO1xuICAgIHNldFNob3dPbmJvYXJkaW5nKG9uYm9hcmRpbmdDb21wbGV0ZSAhPT0gJ3RydWUnKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtdKTsgLy8gRW1wdHkgZGVwcyAtIG9ubHkgcnVuIG9uY2Ugb24gbW91bnRcblxuICBjb25zdCBoYW5kbGVPbmJvYXJkaW5nRmluaXNoID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtaS1jb2FjaC1vbmJvYXJkaW5nLWNvbXBsZXRlJywgJ3RydWUnKTtcbiAgICBzZXRTaG93T25ib2FyZGluZyhmYWxzZSk7XG4gICAgLy8gQWZ0ZXIgb25ib2FyZGluZywgZ28gdG8gRGFzaGJvYXJkIChhbm9ueW1vdXMgdXNlcnMgY2FuIGFjY2VzcyBpdClcbiAgICBzZXRWaWV3KFZpZXcuRGFzaGJvYXJkKTtcbiAgfSwgW3NldFNob3dPbmJvYXJkaW5nLCBzZXRWaWV3XSk7XG5cbiAgY29uc3QgaGFuZGxlU3RhcnRQcmFjdGljZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAvLyBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIHRvIHN0YXJ0IHByYWN0aWNlXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0FwcF0gVXNlciBub3QgYXV0aGVudGljYXRlZCwgcmVkaXJlY3RpbmcgdG8gbG9naW4nKTtcbiAgICAgIHNldFZpZXcoVmlldy5Mb2dpbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR3VhcmQ6IHdhaXQgdW50aWwgdXNlclRpZXIgaXMgbG9hZGVkIGFuZCB2ZXJpZmljYXRpb24gaXMgY29tcGxldGVcbiAgICBpZiAoIXVzZXJUaWVyIHx8IHVzZXJUaWVyID09PSAnJyB8fCBpc1RpZXJWZXJpZnlpbmcpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0FwcF0gVXNlciB0aWVyIG5vdCB5ZXQgbG9hZGVkIG9yIHN0aWxsIHZlcmlmeWluZywgd2FpdGluZy4uLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHVzZXIgY2FuIHN0YXJ0IGEgbmV3IHNlc3Npb25cbiAgICBjb25zdCBjYW5TdGFydCA9IGF3YWl0IGNhblN0YXJ0U2Vzc2lvbih1c2VyLmlkLCB1c2VyVGllcik7XG4gICAgaWYgKCFjYW5TdGFydCkge1xuICAgICAgY29uc29sZS5sb2coJ1tBcHBdIFVzZXIgY2Fubm90IHN0YXJ0IHNlc3Npb24gKGxpbWl0IHJlYWNoZWQpLCBzaG93aW5nIHBheXdhbGwnKTtcbiAgICAgIHNldFZpZXcoVmlldy5QYXl3YWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodXNlclRpZXIgPT09IFVzZXJUaWVyLlByZW1pdW0pIHtcbiAgICAgIHNldFZpZXcoVmlldy5TY2VuYXJpb1NlbGVjdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBhdGllbnQgPSBnZW5lcmF0ZVBhdGllbnRQcm9maWxlKCk7XG4gICAgICBzZXRDdXJyZW50UGF0aWVudChwYXRpZW50KTtcbiAgICAgIHNldFZpZXcoVmlldy5QcmFjdGljZSk7XG4gICAgfVxuICB9LCBbdXNlciwgdXNlclRpZXIsIGlzVGllclZlcmlmeWluZywgc2V0Vmlldywgc2V0Q3VycmVudFBhdGllbnRdKTtcbiAgXG4gIGNvbnN0IGhhbmRsZVN0YXJ0RmlsdGVyZWRQcmFjdGljZSA9IHVzZUNhbGxiYWNrKChmaWx0ZXJzOiBQYXRpZW50UHJvZmlsZUZpbHRlcnMpID0+IHtcbiAgICAvLyBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIHRvIHN0YXJ0IHByYWN0aWNlXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0FwcF0gVXNlciBub3QgYXV0aGVudGljYXRlZCwgcmVkaXJlY3RpbmcgdG8gbG9naW4nKTtcbiAgICAgIHNldFZpZXcoVmlldy5Mb2dpbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGF0aWVudCA9IGdlbmVyYXRlUGF0aWVudFByb2ZpbGUoZmlsdGVycyk7XG4gICAgc2V0Q3VycmVudFBhdGllbnQocGF0aWVudCk7XG4gICAgc2V0VmlldyhWaWV3LlByYWN0aWNlKTtcbiAgfSwgW3VzZXIsIHNldEN1cnJlbnRQYXRpZW50LCBzZXRWaWV3XSk7XG5cbiAgLy8gU2F2ZSB0aGUgbmV3IHNlc3Npb24gd2hlbiBwcmFjdGljZSBpcyBmaW5pc2hlZFxuICBjb25zdCBoYW5kbGVGaW5pc2hQcmFjdGljZSA9IHVzZUNhbGxiYWNrKGFzeW5jICh0cmFuc2NyaXB0OiBDaGF0TWVzc2FnZVtdLCBmZWVkYmFjazogRmVlZGJhY2spID0+IHtcbiAgICBpZiAoIWN1cnJlbnRQYXRpZW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW0FwcF0gQ2Fubm90IHNhdmUgc2Vzc2lvbjogbWlzc2luZyBwYXRpZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBzYXZlTmV3U2Vzc2lvbih0cmFuc2NyaXB0LCBmZWVkYmFjaywgY3VycmVudFBhdGllbnQsIHNlc3Npb25zLCB1c2VyVGllcik7XG4gICAgXG4gICAgc2V0Q3VycmVudFNlc3Npb24obmV3U2Vzc2lvbik7XG4gICAgc2V0Q29hY2hpbmdTdW1tYXJ5KG51bGwpOyAvLyBJbnZhbGlkYXRlIG9sZCBzdW1tYXJ5XG4gICAgc2V0Q29hY2hpbmdTdW1tYXJ5RXJyb3IobnVsbCk7XG4gICAgc2V0VmlldyhWaWV3LkZlZWRiYWNrKTtcbiAgfSwgW2N1cnJlbnRQYXRpZW50LCBzZXNzaW9ucywgdXNlclRpZXIsIHNhdmVOZXdTZXNzaW9uLCBzZXRDdXJyZW50U2Vzc2lvbiwgc2V0Q29hY2hpbmdTdW1tYXJ5LCBzZXRDb2FjaGluZ1N1bW1hcnlFcnJvciwgc2V0Vmlld10pO1xuICBcbiAgY29uc3QgaGFuZGxlRG9uZUZyb21GZWVkYmFjayA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBzZXNzaW9uQ291bnQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWktY29hY2gtc2Vzc2lvbi1jb3VudCcpIHx8ICcwJywgMTApO1xuICAgIGNvbnN0IHJldmlld0Rpc21pc3NlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtaS1jb2FjaC1yZXZpZXctZGlzbWlzc2VkJykgPT09ICd0cnVlJztcbiAgICBjb25zdCByZW1pbmRBZnRlckNvdW50ID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21pLWNvYWNoLXJldmlldy1yZW1pbmQtYWZ0ZXInKSB8fCAnMCcsIDEwKTtcblxuICAgIGlmICghcmV2aWV3RGlzbWlzc2VkICYmIHNlc3Npb25Db3VudCA+PSAzICYmIHNlc3Npb25Db3VudCA+PSByZW1pbmRBZnRlckNvdW50KSB7XG4gICAgICAgIHNldFNob3dSZXZpZXdQcm9tcHQodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VmlldyhWaWV3LkRhc2hib2FyZCk7XG4gICAgfVxuICB9LCBbc2V0U2hvd1Jldmlld1Byb21wdCwgc2V0Vmlld10pO1xuICBcbiAgY29uc3QgaGFuZGxlUmV2aWV3UHJvbXB0Q2xvc2UgPSB1c2VDYWxsYmFjaygoY2hvaWNlOiAncmF0ZScgfCAnbGF0ZXInIHwgJ25vJykgPT4ge1xuICAgIHNldFNob3dSZXZpZXdQcm9tcHQoZmFsc2UpO1xuICAgIFxuICAgIGlmIChjaG9pY2UgPT09ICdyYXRlJyB8fCBjaG9pY2UgPT09ICdubycpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21pLWNvYWNoLXJldmlldy1kaXNtaXNzZWQnLCAndHJ1ZScpO1xuICAgICAgICBpZiAoY2hvaWNlID09PSAncmF0ZScpIHtcbiAgICAgICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB5b3UnZCBsaW5rIHRvIHRoZSBzdG9yZS5cbiAgICAgICAgICAgICBhbGVydChcIlRoYW5rIHlvdSBmb3IgeW91ciBmZWVkYmFjayEgWW91IHdpbGwgbm93IGJlIHJlZGlyZWN0ZWQgdG8gdGhlIGFwcCBzdG9yZS5cIik7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNob2ljZSA9PT0gJ2xhdGVyJykge1xuICAgICAgICBjb25zdCBzZXNzaW9uQ291bnQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWktY29hY2gtc2Vzc2lvbi1jb3VudCcpIHx8ICcwJywgMTApO1xuICAgICAgICAvLyBSZW1pbmQgYWdhaW4gYWZ0ZXIgMyBtb3JlIHNlc3Npb25zXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtaS1jb2FjaC1yZXZpZXctcmVtaW5kLWFmdGVyJywgKHNlc3Npb25Db3VudCArIDMpLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBcbiAgICBzZXRWaWV3KFZpZXcuRGFzaGJvYXJkKTtcbiAgfSwgW3NldFNob3dSZXZpZXdQcm9tcHQsIHNldFZpZXddKTtcblxuICBjb25zdCBnZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeUZyb21FZGdlRnVuY3Rpb24gPSB1c2VDYWxsYmFjayhhc3luYyAoc2Vzc2lvbnM6IFNlc3Npb25bXSk6IFByb21pc2U8Q29hY2hpbmdTdW1tYXJ5PiA9PiB7XG4gICAgLy8gR2V0IFN1cGFiYXNlIFVSTCBhbmQgY29uc3RydWN0IEVkZ2UgRnVuY3Rpb24gVVJMXG4gICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gICAgaWYgKCFzdXBhYmFzZVVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBVUkwgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICAvLyBVc2UgZHVhbC1ydW4gd3JhcHBlciBmb3IgU3RyYW5nbGVyIEZpZyBtaWdyYXRpb24gdHJhY2tpbmdcbiAgICAvLyBDYWxscyBib3RoIGxlZ2FjeSBhbmQgdjIgZnVuY3Rpb25zLCBjb21wYXJlcyBvdXRwdXRzLCB0cmFja3MgbWF0Y2hlc1xuICAgIGNvbnN0IGZ1bmN0aW9uc1VybCA9IGAke3N1cGFiYXNlVXJsfS9mdW5jdGlvbnMvdjEvZHVhbC1ydW4tY29hY2hpbmctc3VtbWFyeWA7XG5cbiAgICAvLyBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIC0gZ2V0IEpXVCB0b2tlbiBmcm9tIHNlc3Npb25cbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG4gICAgbGV0IGF1dGhUb2tlbjogc3RyaW5nO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcbiAgICAgIFxuICAgICAgaWYgKHNlc3Npb25FcnJvciB8fCAhc2Vzc2lvbiB8fCAhc2Vzc2lvbi5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIHNlc3Npb24gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCBsb2cgaW4gYWdhaW4uJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGF1dGhUb2tlbiA9IHNlc3Npb24uYWNjZXNzX3Rva2VuO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQXBwXSBGYWlsZWQgdG8gZ2V0IGF1dGggdG9rZW46JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYXV0aGVudGljYXRlLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZSBhbmQgdHJ5IGFnYWluLicpO1xuICAgIH1cblxuICAgIC8vIFByZXBhcmUgcmVxdWVzdCB3aXRoIHJlcXVpcmVkIEF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCxcbiAgICB9O1xuXG4gICAgLy8gTWFrZSByZXF1ZXN0IHRvIEVkZ2UgRnVuY3Rpb25cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZ1bmN0aW9uc1VybCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzZXNzaW9ucyB9KSxcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSBlcnJvcnNcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHsgZXJyb3I6ICdVbmtub3duIGVycm9yJyB9KSk7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGEuZXJyb3IgfHwgYEZhaWxlZCB0byBnZW5lcmF0ZSBjb2FjaGluZyBzdW1tYXJ5ICgke3Jlc3BvbnNlLnN0YXR1c30pYDtcblxuICAgICAgLy8gTWFwIEhUVFAgc3RhdHVzIGNvZGVzIHRvIHVzZXItZnJpZW5kbHkgbWVzc2FnZXNcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgc2Vzc2lvbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgYW5kIGxvZyBpbiBhZ2Fpbi4nKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSSBzZXJ2aWNlIGlzIGJ1c3kuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBtb21lbnQuJyk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTA0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29hY2hpbmcgc3VtbWFyeSBnZW5lcmF0aW9uIHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSSBzZXJ2aWNlIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUGFyc2UgYW5kIHJldHVybiByZXNwb25zZVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGEgYXMgQ29hY2hpbmdTdW1tYXJ5O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlR2VuZXJhdGVDb2FjaGluZ1N1bW1hcnkgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChjb2FjaGluZ1N1bW1hcnkgJiYgIWlzR2VuZXJhdGluZ1N1bW1hcnkpIHtcbiAgICAgICAgICAgIHNldFZpZXcoVmlldy5Db2FjaGluZ1N1bW1hcnkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZXJUaWVyICE9PSBVc2VyVGllci5QcmVtaXVtKSB7XG4gICAgICAgICAgICBzZXRWaWV3KFZpZXcuUGF5d2FsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldENvYWNoaW5nU3VtbWFyeUVycm9yKG51bGwpO1xuICAgICAgICBzZXRJc0dlbmVyYXRpbmdTdW1tYXJ5KHRydWUpO1xuICAgICAgICBzZXRWaWV3KFZpZXcuQ29hY2hpbmdTdW1tYXJ5KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJlbWl1bVNlc3Npb25zID0gc2Vzc2lvbnMuZmlsdGVyKHMgPT4gcy50aWVyID09PSBVc2VyVGllci5QcmVtaXVtKTtcbiAgICAgICAgICAgIGlmIChwcmVtaXVtU2Vzc2lvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgIHNldENvYWNoaW5nU3VtbWFyeUVycm9yKFwiWW91IG5lZWQgdG8gY29tcGxldGUgYXQgbGVhc3Qgb25lIFByZW1pdW0gc2Vzc2lvbiB0byBnZW5lcmF0ZSBhIHN1bW1hcnkuXCIpO1xuICAgICAgICAgICAgICAgICBzZXRJc0dlbmVyYXRpbmdTdW1tYXJ5KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVwb3J0T2JqZWN0ID0gYXdhaXQgZ2VuZXJhdGVDb2FjaGluZ1N1bW1hcnlGcm9tRWRnZUZ1bmN0aW9uKHByZW1pdW1TZXNzaW9ucyk7XG4gICAgICAgICAgICBzZXRDb2FjaGluZ1N1bW1hcnkocmVwb3J0T2JqZWN0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2VuZXJhdGUgY29hY2hpbmcgc3VtbWFyeTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlNvcnJ5LCB3ZSBjb3VsZG4ndCBnZW5lcmF0ZSB5b3VyIHN1bW1hcnkgYXQgdGhpcyB0aW1lLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiO1xuICAgICAgICAgICAgc2V0Q29hY2hpbmdTdW1tYXJ5RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldElzR2VuZXJhdGluZ1N1bW1hcnkoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2NvYWNoaW5nU3VtbWFyeSwgaXNHZW5lcmF0aW5nU3VtbWFyeSwgdXNlclRpZXIsIHNlc3Npb25zLCBzZXRWaWV3LCBzZXRDb2FjaGluZ1N1bW1hcnlFcnJvciwgc2V0SXNHZW5lcmF0aW5nU3VtbWFyeSwgc2V0Q29hY2hpbmdTdW1tYXJ5LCBnZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeUZyb21FZGdlRnVuY3Rpb25dKTtcblxuICBjb25zdCBoYW5kbGVOYXZpZ2F0ZSA9IHVzZUNhbGxiYWNrKCh0YXJnZXRWaWV3OiBWaWV3KSA9PiBzZXRWaWV3KHRhcmdldFZpZXcpLCBbc2V0Vmlld10pO1xuICBcbiAgY29uc3QgaGFuZGxlRW1haWxDb25maXJtYXRpb24gPSB1c2VDYWxsYmFjaygoZW1haWw6IHN0cmluZykgPT4ge1xuICAgIHNldENvbmZpcm1hdGlvbkVtYWlsKGVtYWlsKTtcbiAgICBzZXRWaWV3KFZpZXcuRW1haWxDb25maXJtYXRpb24pO1xuICB9LCBbc2V0Q29uZmlybWF0aW9uRW1haWwsIHNldFZpZXddKTtcblxuICBjb25zdCBoYW5kbGVMb2dvdXQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKGxvZ2dpbmdPdXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRMb2dnaW5nT3V0KHRydWUpO1xuICAgIFxuICAgIC8vIFJlc2V0IGFwcCBzdGF0ZVxuICAgIHNldFVzZXJUaWVyKFVzZXJUaWVyLkZyZWUpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdtaS1jb2FjaC10aWVyJyk7XG4gICAgc2V0U2Vzc2lvbnMoW10pO1xuICAgIHNldFJlbWFpbmluZ0ZyZWVTZXNzaW9ucyhudWxsKTtcbiAgICBzZXRWaWV3KFZpZXcuTG9naW4pO1xuXG4gICAgbGV0IGxvZ291dEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzaWduT3V0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVyciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcignTG9nb3V0IGZhaWxlZCcpO1xuICAgICAgY29uc29sZS5lcnJvcignW0FwcF0gTG9nb3V0IGZhaWxlZDonLCBlcnIpO1xuICAgICAgbG9nb3V0RXJyb3IgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvZ2dpbmdPdXQoZmFsc2UpO1xuICAgIH1cblxuICAgIGlmIChsb2dvdXRFcnJvcikge1xuICAgICAgdGhyb3cgbG9nb3V0RXJyb3I7XG4gICAgfVxuICB9LCBbbG9nZ2luZ091dCwgc2V0TG9nZ2luZ091dCwgc2V0VXNlclRpZXIsIHNldFNlc3Npb25zLCBzZXRSZW1haW5pbmdGcmVlU2Vzc2lvbnMsIHNldFZpZXcsIHNpZ25PdXRdKTtcblxuICAvLyBTYXZlIHRoZSBuZXcgdXNlciB0aWVyIHRvIGxvY2FsU3RvcmFnZSBhbmQgU3VwYWJhc2UgdXBvbiB1cGdyYWRlLlxuICBjb25zdCBoYW5kbGVVcGdyYWRlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0FwcF0gQ2Fubm90IHVwZ3JhZGU6IHVzZXIgbm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbmV3VGllciA9IFVzZXJUaWVyLlByZW1pdW07XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBpbiBTdXBhYmFzZVxuICAgICAgY29uc29sZS5sb2coJ1tBcHBdIFVwZ3JhZGluZyB1c2VyIHRpZXIgdG8gUHJlbWl1bScpO1xuICAgICAgLy8gTm90ZTogdXBkYXRlVXNlclRpZXIgaXMgY2FsbGVkIGludGVybmFsbHkgYnkgdGhlIHBheW1lbnQgcHJvY2Vzc29yXG4gICAgICAvLyBGb3Igbm93LCBqdXN0IHVwZGF0ZSBsb2NhbGx5IGFuZCBpbiBsb2NhbFN0b3JhZ2VcbiAgICAgIHNldFVzZXJUaWVyKG5ld1RpZXIpO1xuICAgICAgXG4gICAgICAvLyBSZWxvYWQgdGllciBmcm9tIFN1cGFiYXNlIHRvIGNvbmZpcm1cbiAgICAgIGNvbnN0IHVwZGF0ZWRUaWVyID0gYXdhaXQgcmVmcmVzaFRpZXIoKTtcbiAgICAgIGlmICh1cGRhdGVkVGllcikge1xuICAgICAgICBzZXRVc2VyVGllcih1cGRhdGVkVGllcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldFZpZXcoVmlldy5EYXNoYm9hcmQpOyAvLyBHbyBiYWNrIHRvIGRhc2hib2FyZCBhZnRlciB1cGdyYWRpbmdcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0FwcF0gRmFpbGVkIHRvIHVwZ3JhZGUgdGllcjonLCBlcnJvcik7XG4gICAgICAvLyBTdGlsbCBuYXZpZ2F0ZSB0byBkYXNoYm9hcmQgZXZlbiBpZiByZWZyZXNoIGZhaWxzXG4gICAgICBzZXRWaWV3KFZpZXcuRGFzaGJvYXJkKTtcbiAgICB9XG4gIH0sIFt1c2VyLCBzZXRVc2VyVGllciwgcmVmcmVzaFRpZXIsIHNldFZpZXddKTtcblxuICBjb25zdCBoYW5kbGVUaWVyVXBkYXRlZCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAvLyBSZWxvYWQgdGllciBmcm9tIFN1cGFiYXNlIGFmdGVyIHN1YnNjcmlwdGlvbiBjaGFuZ2VcbiAgICBpZiAodXNlcikge1xuICAgICAgY29uc3QgdXBkYXRlZFRpZXIgPSBhd2FpdCByZWZyZXNoVGllcigpO1xuICAgICAgaWYgKHVwZGF0ZWRUaWVyKSB7XG4gICAgICAgIHNldFVzZXJUaWVyKHVwZGF0ZWRUaWVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFt1c2VyLCByZWZyZXNoVGllciwgc2V0VXNlclRpZXJdKTtcbiAgXG4gIC8vIFNob3cgbG9hZGluZyBzdGF0ZSB3aGlsZSBhdXRoIGlzIGluaXRpYWxpemluZ1xuICBpZiAoYXV0aExvYWRpbmcgfHwgc2hvd09uYm9hcmRpbmcgPT09IG51bGwpIHtcbiAgICByZXR1cm4gPFBhZ2VMb2FkZXIgbWVzc2FnZT1cIkluaXRpYWxpemluZy4uLlwiIC8+O1xuICB9XG5cbiAgLy8gU2hvdyBvbmJvYXJkaW5nIGlmIG5vdCBjb21wbGV0ZWRcbiAgaWYgKHNob3dPbmJvYXJkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PFBhZ2VMb2FkZXIgbWVzc2FnZT1cIkxvYWRpbmcgb25ib2FyZGluZy4uLlwiIC8+fT5cbiAgICAgICAgPE9uYm9hcmRpbmcgb25GaW5pc2g9e2hhbmRsZU9uYm9hcmRpbmdGaW5pc2h9IC8+XG4gICAgICA8L1N1c3BlbnNlPlxuICAgICk7XG4gIH1cblxuICAvLyBTaG93IGxvZ2luL2F1dGggc2NyZWVucyB3aGVuIG9uIHRob3NlIHZpZXdzIChhbGxvdyBhbm9ueW1vdXMgYWNjZXNzIHRvIG90aGVyIHZpZXdzKVxuICBjb25zdCBpc0F1dGhWaWV3ID0gdmlldyA9PT0gVmlldy5Mb2dpbiB8fCB2aWV3ID09PSBWaWV3LkZvcmdvdFBhc3N3b3JkIHx8IHZpZXcgPT09IFZpZXcuRW1haWxDb25maXJtYXRpb24gfHwgdmlldyA9PT0gVmlldy5SZXNldFBhc3N3b3JkO1xuICBjb25zdCBzaG91bGRSZW5kZXJBdXRoVmlld3MgPSAhdXNlciAmJiAhYXV0aExvYWRpbmcgJiYgaXNBdXRoVmlldztcblxuICBjb25zdCB2aWV3c1dpdGhOYXZCYXIgPSBbVmlldy5EYXNoYm9hcmQsIFZpZXcuUmVzb3VyY2VMaWJyYXJ5LCBWaWV3LlNldHRpbmdzLCBWaWV3LkNhbGVuZGFyXTtcbiAgY29uc3QgaXNQcmVtaXVtRmVlZGJhY2sgPSB2aWV3ID09PSBWaWV3LkZlZWRiYWNrICYmIHVzZXJUaWVyID09PSBVc2VyVGllci5QcmVtaXVtO1xuICBjb25zdCBzaG91bGRTaG93TmF2QmFyID0gdmlld3NXaXRoTmF2QmFyLmluY2x1ZGVzKHZpZXcpIHx8IGlzUHJlbWl1bUZlZWRiYWNrO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctdHJhbnNwYXJlbnQgdGV4dC1bdmFyKC0tY29sb3ItdGV4dC1wcmltYXJ5KV1cIiBpZD1cIm1haW4tY29udGVudFwiPlxuICAgICAge3Nob3VsZFNob3dOYXZCYXIgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCIgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwdmgnIH19PlxuICAgICAgICAgICAgICA8bWFpbiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHBiLTIwXCIgcm9sZT1cIm1haW5cIiBhcmlhLWxhYmVsPVwiTWFpbiBjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICA8Vmlld1JlbmRlcmVyXG4gICAgICAgICAgICAgICAgICAgIHZpZXc9e3ZpZXd9XG4gICAgICAgICAgICAgICAgICAgIHVzZXJUaWVyPXt1c2VyVGllcn1cbiAgICAgICAgICAgICAgICAgICAgdXNlcj17dXNlcn1cbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbnM9e3Nlc3Npb25zfVxuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdGcmVlU2Vzc2lvbnM9e3JlbWFpbmluZ0ZyZWVTZXNzaW9uc31cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGllbnQ9e2N1cnJlbnRQYXRpZW50fVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2Vzc2lvbj17Y3VycmVudFNlc3Npb259XG4gICAgICAgICAgICAgICAgICAgIGNvYWNoaW5nU3VtbWFyeT17Y29hY2hpbmdTdW1tYXJ5fVxuICAgICAgICAgICAgICAgICAgICBjb2FjaGluZ1N1bW1hcnlFcnJvcj17Y29hY2hpbmdTdW1tYXJ5RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGlzR2VuZXJhdGluZ1N1bW1hcnk9e2lzR2VuZXJhdGluZ1N1bW1hcnl9XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbkVtYWlsPXtjb25maXJtYXRpb25FbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgaXNQcmVtaXVtVmVyaWZpZWQ9e2lzUHJlbWl1bVZlcmlmaWVkfVxuICAgICAgICAgICAgICAgICAgICBpc1RpZXJWZXJpZnlpbmc9e2lzVGllclZlcmlmeWluZ31cbiAgICAgICAgICAgICAgICAgICAgb25OYXZpZ2F0ZT17aGFuZGxlTmF2aWdhdGV9XG4gICAgICAgICAgICAgICAgICAgIG9uU3RhcnRQcmFjdGljZT17aGFuZGxlU3RhcnRQcmFjdGljZX1cbiAgICAgICAgICAgICAgICAgICAgb25TdGFydEZpbHRlcmVkUHJhY3RpY2U9e2hhbmRsZVN0YXJ0RmlsdGVyZWRQcmFjdGljZX1cbiAgICAgICAgICAgICAgICAgICAgb25GaW5pc2hQcmFjdGljZT17aGFuZGxlRmluaXNoUHJhY3RpY2V9XG4gICAgICAgICAgICAgICAgICAgIG9uRG9uZUZyb21GZWVkYmFjaz17aGFuZGxlRG9uZUZyb21GZWVkYmFja31cbiAgICAgICAgICAgICAgICAgICAgb25VcGdyYWRlPXtoYW5kbGVVcGdyYWRlfVxuICAgICAgICAgICAgICAgICAgICBvbkxvZ291dD17aGFuZGxlTG9nb3V0fVxuICAgICAgICAgICAgICAgICAgICBvbkdlbmVyYXRlQ29hY2hpbmdTdW1tYXJ5PXtoYW5kbGVHZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeX1cbiAgICAgICAgICAgICAgICAgICAgb25FbWFpbENvbmZpcm1hdGlvbj17aGFuZGxlRW1haWxDb25maXJtYXRpb259XG4gICAgICAgICAgICAgICAgICAgIG9uVGllclVwZGF0ZWQ9e2hhbmRsZVRpZXJVcGRhdGVkfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9tYWluPlxuICAgICAgICAgICAgICA8Qm90dG9tTmF2QmFyIGN1cnJlbnRWaWV3PXt2aWV3fSBvbk5hdmlnYXRlPXtoYW5kbGVOYXZpZ2F0ZX0gdXNlclRpZXI9e3VzZXJUaWVyfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgKSA6IChcbiAgICAgICAgICAvLyBWaWV3cyB3aXRob3V0IHRoZSBtYWluIG5hdiBiYXIgKGUuZy4sIHByYWN0aWNlLCBmZWVkYmFjaywgcGF5d2FsbClcbiAgICAgICAgICAvLyBUaGVzZSBjb21wb25lbnRzIG1hbmFnZSB0aGVpciBvd24gZnVsbC1zY3JlZW4gbGF5b3V0LlxuICAgICAgICAgIDxWaWV3UmVuZGVyZXJcbiAgICAgICAgICAgIHZpZXc9e3ZpZXd9XG4gICAgICAgICAgICB1c2VyVGllcj17dXNlclRpZXJ9XG4gICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgc2Vzc2lvbnM9e3Nlc3Npb25zfVxuICAgICAgICAgICAgcmVtYWluaW5nRnJlZVNlc3Npb25zPXtyZW1haW5pbmdGcmVlU2Vzc2lvbnN9XG4gICAgICAgICAgICBjdXJyZW50UGF0aWVudD17Y3VycmVudFBhdGllbnR9XG4gICAgICAgICAgICBjdXJyZW50U2Vzc2lvbj17Y3VycmVudFNlc3Npb259XG4gICAgICAgICAgICBjb2FjaGluZ1N1bW1hcnk9e2NvYWNoaW5nU3VtbWFyeX1cbiAgICAgICAgICAgIGNvYWNoaW5nU3VtbWFyeUVycm9yPXtjb2FjaGluZ1N1bW1hcnlFcnJvcn1cbiAgICAgICAgICAgIGlzR2VuZXJhdGluZ1N1bW1hcnk9e2lzR2VuZXJhdGluZ1N1bW1hcnl9XG4gICAgICAgICAgICBjb25maXJtYXRpb25FbWFpbD17Y29uZmlybWF0aW9uRW1haWx9XG4gICAgICAgICAgICBpc1ByZW1pdW1WZXJpZmllZD17aXNQcmVtaXVtVmVyaWZpZWR9XG4gICAgICAgICAgICBpc1RpZXJWZXJpZnlpbmc9e2lzVGllclZlcmlmeWluZ31cbiAgICAgICAgICAgIG9uTmF2aWdhdGU9e2hhbmRsZU5hdmlnYXRlfVxuICAgICAgICAgICAgb25TdGFydFByYWN0aWNlPXtoYW5kbGVTdGFydFByYWN0aWNlfVxuICAgICAgICAgICAgb25TdGFydEZpbHRlcmVkUHJhY3RpY2U9e2hhbmRsZVN0YXJ0RmlsdGVyZWRQcmFjdGljZX1cbiAgICAgICAgICAgIG9uRmluaXNoUHJhY3RpY2U9e2hhbmRsZUZpbmlzaFByYWN0aWNlfVxuICAgICAgICAgICAgb25Eb25lRnJvbUZlZWRiYWNrPXtoYW5kbGVEb25lRnJvbUZlZWRiYWNrfVxuICAgICAgICAgICAgb25VcGdyYWRlPXtoYW5kbGVVcGdyYWRlfVxuICAgICAgICAgICAgb25Mb2dvdXQ9e2hhbmRsZUxvZ291dH1cbiAgICAgICAgICAgIG9uR2VuZXJhdGVDb2FjaGluZ1N1bW1hcnk9e2hhbmRsZUdlbmVyYXRlQ29hY2hpbmdTdW1tYXJ5fVxuICAgICAgICAgICAgb25FbWFpbENvbmZpcm1hdGlvbj17aGFuZGxlRW1haWxDb25maXJtYXRpb259XG4gICAgICAgICAgICBvblRpZXJVcGRhdGVkPXtoYW5kbGVUaWVyVXBkYXRlZH1cbiAgICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHtzaG93UmV2aWV3UHJvbXB0ICYmIChcbiAgICAgICAgICA8UmV2aWV3UHJvbXB0IG9uQ2xvc2U9e2hhbmRsZVJldmlld1Byb21wdENsb3NlfSAvPlxuICAgICAgKX1cbiAgICAgIHsvKiBCYWRnZSB1bmxvY2sgY2VsZWJyYXRpb24gdG9hc3QgKi99XG4gICAgICB7Y3VycmVudEJhZGdlVG9TaG93ICYmIChcbiAgICAgICAgICA8QmFkZ2VVbmxvY2tUb2FzdFxuICAgICAgICAgICAgYmFkZ2U9e2N1cnJlbnRCYWRnZVRvU2hvd31cbiAgICAgICAgICAgIG9uQ2xvc2U9e2hhbmRsZUJhZGdlVG9hc3RDbG9zZX1cbiAgICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHsvKiBBcmlhIGxpdmUgcmVnaW9uIGZvciBhc3luYyBmZWVkYmFjayAqL31cbiAgICAgIDxkaXYgaWQ9XCJhcmlhLWxpdmUtcmVnaW9uXCIgYXJpYS1saXZlPVwicG9saXRlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgY2xhc3NOYW1lPVwic3Itb25seVwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsIlN1c3BlbnNlIiwibGF6eSIsIlVzZXJUaWVyIiwiVmlldyIsImdlbmVyYXRlUGF0aWVudFByb2ZpbGUiLCJjYW5TdGFydFNlc3Npb24iLCJ1c2VBdXRoIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJQYWdlTG9hZGVyIiwiQm90dG9tTmF2QmFyIiwiUmV2aWV3UHJvbXB0IiwiVmlld1JlbmRlcmVyIiwiT25ib2FyZGluZyIsIkJhZGdlVW5sb2NrVG9hc3QiLCJ1c2VBcHBTdGF0ZSIsInVzZVRpZXJNYW5hZ2VyIiwidXNlU2Vzc2lvbk1hbmFnZXIiLCJ1c2VTdHJlYWsiLCJ1c2VYUCIsInVzZUJhZGdlcyIsInVzZUF1dGhDYWxsYmFjayIsInVzZVN0cmlwZUNhbGxiYWNrIiwidXNlQXBwUm91dGVyIiwidXNlT25saW5lU3luYyIsIkFwcFBhZ2UiLCJ1c2VyIiwibG9hZGluZyIsImF1dGhMb2FkaW5nIiwic2lnbk91dCIsImFwcFN0YXRlIiwidmlldyIsInNldFZpZXciLCJzZXNzaW9ucyIsInNldFNlc3Npb25zIiwic2Vzc2lvbnNMb2FkaW5nIiwic2V0U2Vzc2lvbnNMb2FkaW5nIiwicmVtYWluaW5nRnJlZVNlc3Npb25zIiwic2V0UmVtYWluaW5nRnJlZVNlc3Npb25zIiwiY3VycmVudFBhdGllbnQiLCJzZXRDdXJyZW50UGF0aWVudCIsImN1cnJlbnRTZXNzaW9uIiwic2V0Q3VycmVudFNlc3Npb24iLCJzaG93T25ib2FyZGluZyIsInNldFNob3dPbmJvYXJkaW5nIiwiY29hY2hpbmdTdW1tYXJ5Iiwic2V0Q29hY2hpbmdTdW1tYXJ5IiwiY29hY2hpbmdTdW1tYXJ5RXJyb3IiLCJzZXRDb2FjaGluZ1N1bW1hcnlFcnJvciIsImlzR2VuZXJhdGluZ1N1bW1hcnkiLCJzZXRJc0dlbmVyYXRpbmdTdW1tYXJ5Iiwic2hvd1Jldmlld1Byb21wdCIsInNldFNob3dSZXZpZXdQcm9tcHQiLCJjb25maXJtYXRpb25FbWFpbCIsInNldENvbmZpcm1hdGlvbkVtYWlsIiwibG9nZ2luZ091dCIsInNldExvZ2dpbmdPdXQiLCJ1c2VyVGllciIsInNldFVzZXJUaWVyIiwicmVmcmVzaFRpZXIiLCJpc1ByZW1pdW1WZXJpZmllZCIsImlzVmVyaWZ5aW5nIiwiaXNUaWVyVmVyaWZ5aW5nIiwiY3VycmVudFN0cmVhayIsInVwZGF0ZVN0cmVhayIsInByb2Nlc3NRdWV1ZSIsInByb2Nlc3NTdHJlYWtRdWV1ZSIsImFkZFhQIiwicHJvY2Vzc1hQUXVldWUiLCJjaGVja0FuZFVubG9ja0JhZGdlcyIsIm5ld2x5VW5sb2NrZWRCYWRnZXMiLCJtYXJrQmFkZ2VBc1NlZW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJiYWRnZVRvYXN0UXVldWUiLCJzZXRCYWRnZVRvYXN0UXVldWUiLCJwcmV2aW91c0JhZGdlc1JlZiIsInVzZVJlZiIsImN1cnJlbnRCYWRnZUlkcyIsIm1hcCIsImIiLCJpZCIsInByZXZpb3VzQmFkZ2VJZHMiLCJjdXJyZW50IiwibGVuZ3RoIiwiSlNPTiIsInN0cmluZ2lmeSIsInByZXYiLCJleGlzdGluZ0lkcyIsIlNldCIsInRvQWRkIiwiZmlsdGVyIiwiaGFzIiwiaGFuZGxlQmFkZ2VUb2FzdENsb3NlIiwiZGlzbWlzc2VkQmFkZ2VJZCIsInNsaWNlIiwiY3VycmVudEJhZGdlVG9TaG93IiwiZmluZCIsInNhdmVOZXdTZXNzaW9uIiwib25ib2FyZGluZ0NvbXBsZXRlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImhhbmRsZU9uYm9hcmRpbmdGaW5pc2giLCJzZXRJdGVtIiwiRGFzaGJvYXJkIiwiaGFuZGxlU3RhcnRQcmFjdGljZSIsImNvbnNvbGUiLCJsb2ciLCJMb2dpbiIsIndhcm4iLCJjYW5TdGFydCIsIlBheXdhbGwiLCJQcmVtaXVtIiwiU2NlbmFyaW9TZWxlY3Rpb24iLCJwYXRpZW50IiwiUHJhY3RpY2UiLCJoYW5kbGVTdGFydEZpbHRlcmVkUHJhY3RpY2UiLCJmaWx0ZXJzIiwiaGFuZGxlRmluaXNoUHJhY3RpY2UiLCJ0cmFuc2NyaXB0IiwiZmVlZGJhY2siLCJlcnJvciIsIm5ld1Nlc3Npb24iLCJGZWVkYmFjayIsImhhbmRsZURvbmVGcm9tRmVlZGJhY2siLCJzZXNzaW9uQ291bnQiLCJwYXJzZUludCIsInJldmlld0Rpc21pc3NlZCIsInJlbWluZEFmdGVyQ291bnQiLCJoYW5kbGVSZXZpZXdQcm9tcHRDbG9zZSIsImNob2ljZSIsImFsZXJ0IiwidG9TdHJpbmciLCJnZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeUZyb21FZGdlRnVuY3Rpb24iLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJFcnJvciIsImZ1bmN0aW9uc1VybCIsInN1cGFiYXNlIiwiYXV0aFRva2VuIiwiZGF0YSIsInNlc3Npb24iLCJzZXNzaW9uRXJyb3IiLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsImFjY2Vzc190b2tlbiIsImhlYWRlcnMiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzIiwiaGFuZGxlR2VuZXJhdGVDb2FjaGluZ1N1bW1hcnkiLCJDb2FjaGluZ1N1bW1hcnkiLCJwcmVtaXVtU2Vzc2lvbnMiLCJzIiwidGllciIsInJlcG9ydE9iamVjdCIsIm1lc3NhZ2UiLCJoYW5kbGVOYXZpZ2F0ZSIsInRhcmdldFZpZXciLCJoYW5kbGVFbWFpbENvbmZpcm1hdGlvbiIsImVtYWlsIiwiRW1haWxDb25maXJtYXRpb24iLCJoYW5kbGVMb2dvdXQiLCJGcmVlIiwicmVtb3ZlSXRlbSIsImxvZ291dEVycm9yIiwiZXJyIiwiaGFuZGxlVXBncmFkZSIsIm5ld1RpZXIiLCJ1cGRhdGVkVGllciIsImhhbmRsZVRpZXJVcGRhdGVkIiwiZmFsbGJhY2siLCJvbkZpbmlzaCIsImlzQXV0aFZpZXciLCJGb3Jnb3RQYXNzd29yZCIsIlJlc2V0UGFzc3dvcmQiLCJzaG91bGRSZW5kZXJBdXRoVmlld3MiLCJ2aWV3c1dpdGhOYXZCYXIiLCJSZXNvdXJjZUxpYnJhcnkiLCJTZXR0aW5ncyIsIkNhbGVuZGFyIiwiaXNQcmVtaXVtRmVlZGJhY2siLCJzaG91bGRTaG93TmF2QmFyIiwiaW5jbHVkZXMiLCJkaXYiLCJjbGFzc05hbWUiLCJzdHlsZSIsImhlaWdodCIsIm1haW4iLCJyb2xlIiwiYXJpYS1sYWJlbCIsIm9uTmF2aWdhdGUiLCJvblN0YXJ0UHJhY3RpY2UiLCJvblN0YXJ0RmlsdGVyZWRQcmFjdGljZSIsIm9uRmluaXNoUHJhY3RpY2UiLCJvbkRvbmVGcm9tRmVlZGJhY2siLCJvblVwZ3JhZGUiLCJvbkxvZ291dCIsIm9uR2VuZXJhdGVDb2FjaGluZ1N1bW1hcnkiLCJvbkVtYWlsQ29uZmlybWF0aW9uIiwib25UaWVyVXBkYXRlZCIsImN1cnJlbnRWaWV3Iiwib25DbG9zZSIsImJhZGdlIiwiYXJpYS1saXZlIiwiYXJpYS1hdG9taWMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ })

});