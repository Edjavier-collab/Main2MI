"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AppPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types */ \"(app-pages-browser)/./types.ts\");\n/* harmony import */ var _services_patientService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/patientService */ \"(app-pages-browser)/./services/patientService.ts\");\n/* harmony import */ var _services_subscriptionService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/subscriptionService */ \"(app-pages-browser)/./services/subscriptionService.ts\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./contexts/AuthContext.tsx\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./lib/supabase.ts\");\n/* harmony import */ var _components_ui_LoadingSpinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/LoadingSpinner */ \"(app-pages-browser)/./components/ui/LoadingSpinner.tsx\");\n/* harmony import */ var _components_ui_BottomNavBar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/BottomNavBar */ \"(app-pages-browser)/./components/ui/BottomNavBar.tsx\");\n/* harmony import */ var _components_ui_ReviewPrompt__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/ui/ReviewPrompt */ \"(app-pages-browser)/./components/ui/ReviewPrompt.tsx\");\n/* harmony import */ var _components_views_ViewRenderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/views/ViewRenderer */ \"(app-pages-browser)/./components/views/ViewRenderer.tsx\");\n/* harmony import */ var _components_gamification_BadgeUnlockToast__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/gamification/BadgeUnlockToast */ \"(app-pages-browser)/./components/gamification/BadgeUnlockToast.tsx\");\n/* harmony import */ var _hooks_useAppState__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/hooks/useAppState */ \"(app-pages-browser)/./hooks/useAppState.ts\");\n/* harmony import */ var _hooks_useTierManager__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/hooks/useTierManager */ \"(app-pages-browser)/./hooks/useTierManager.ts\");\n/* harmony import */ var _hooks_useSessionManager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/hooks/useSessionManager */ \"(app-pages-browser)/./hooks/useSessionManager.ts\");\n/* harmony import */ var _hooks_useStreak__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/useStreak */ \"(app-pages-browser)/./hooks/useStreak.ts\");\n/* harmony import */ var _hooks_useXP__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/hooks/useXP */ \"(app-pages-browser)/./hooks/useXP.ts\");\n/* harmony import */ var _hooks_useBadges__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/hooks/useBadges */ \"(app-pages-browser)/./hooks/useBadges.ts\");\n/* harmony import */ var _hooks_useAuthCallback__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @/hooks/useAuthCallback */ \"(app-pages-browser)/./hooks/useAuthCallback.ts\");\n/* harmony import */ var _hooks_useStripeCallback__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/hooks/useStripeCallback */ \"(app-pages-browser)/./hooks/useStripeCallback.ts\");\n/* harmony import */ var _hooks_useAppRouter__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @/hooks/useAppRouter */ \"(app-pages-browser)/./hooks/useAppRouter.ts\");\n/* harmony import */ var _hooks_useOnlineSync__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @/hooks/useOnlineSync */ \"(app-pages-browser)/./hooks/useOnlineSync.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Core components (always loaded)\n\n\n\n\n// Lazy-loaded components\nconst Onboarding = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_components_views_Onboarding_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! @/components/views/Onboarding */ \"(app-pages-browser)/./components/views/Onboarding.tsx\")));\n_c = Onboarding;\n// Gamification components\n\n// Custom hooks\n\n\n\n\n\n\n\n\n\n\nfunction AppPage() {\n    _s();\n    const { user, loading: authLoading, signOut } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth)();\n    // Use consolidated app state hook\n    const appState = (0,_hooks_useAppState__WEBPACK_IMPORTED_MODULE_12__.useAppState)();\n    const { view, setView, sessions, setSessions, sessionsLoading, setSessionsLoading, remainingFreeSessions, setRemainingFreeSessions, currentPatient, setCurrentPatient, currentSession, setCurrentSession, showOnboarding, setShowOnboarding, coachingSummary, setCoachingSummary, coachingSummaryError, setCoachingSummaryError, isGeneratingSummary, setIsGeneratingSummary, showReviewPrompt, setShowReviewPrompt, confirmationEmail, setConfirmationEmail, loggingOut, setLoggingOut } = appState;\n    // Use tier manager hook with server-side premium verification\n    const { userTier, setUserTier, refreshTier, isPremiumVerified, isVerifying: isTierVerifying } = (0,_hooks_useTierManager__WEBPACK_IMPORTED_MODULE_13__.useTierManager)();\n    // Use streak hook for gamification\n    const { currentStreak, updateStreak, processQueue: processStreakQueue } = (0,_hooks_useStreak__WEBPACK_IMPORTED_MODULE_15__.useStreak)();\n    // Use XP hook for gamification\n    const { addXP, processQueue: processXPQueue } = (0,_hooks_useXP__WEBPACK_IMPORTED_MODULE_16__.useXP)();\n    // Use badges hook for gamification\n    const { checkAndUnlockBadges, newlyUnlockedBadges, markBadgeAsSeen } = (0,_hooks_useBadges__WEBPACK_IMPORTED_MODULE_17__.useBadges)();\n    // Use online sync hook to process queued operations when connectivity is restored\n    (0,_hooks_useOnlineSync__WEBPACK_IMPORTED_MODULE_21__.useOnlineSync)({\n        processStreakQueue,\n        processXPQueue,\n        isAuthenticated: !!user\n    });\n    // Track which badge to show in toast (one at a time)\n    const [badgeToastQueue, setBadgeToastQueue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // When new badges are unlocked, add them to the toast queue - FIXED: Use ref to prevent loops\n    const previousBadgesRef = react__WEBPACK_IMPORTED_MODULE_1___default().useRef([]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppPage.useEffect\": ()=>{\n            const currentBadgeIds = newlyUnlockedBadges.map({\n                \"AppPage.useEffect.currentBadgeIds\": (b)=>b.id\n            }[\"AppPage.useEffect.currentBadgeIds\"]);\n            const previousBadgeIds = previousBadgesRef.current;\n            // Only process if badges actually changed\n            if (currentBadgeIds.length > 0 && JSON.stringify(currentBadgeIds) !== JSON.stringify(previousBadgeIds)) {\n                setBadgeToastQueue({\n                    \"AppPage.useEffect\": (prev)=>{\n                        // Add only badges not already in queue\n                        const existingIds = new Set(prev);\n                        const toAdd = currentBadgeIds.filter({\n                            \"AppPage.useEffect.toAdd\": (id)=>!existingIds.has(id)\n                        }[\"AppPage.useEffect.toAdd\"]);\n                        return [\n                            ...prev,\n                            ...toAdd\n                        ];\n                    }\n                }[\"AppPage.useEffect\"]);\n                previousBadgesRef.current = currentBadgeIds;\n            }\n        }\n    }[\"AppPage.useEffect\"], [\n        newlyUnlockedBadges\n    ]);\n    // Handle dismissing a badge toast\n    const handleBadgeToastClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleBadgeToastClose]\": async ()=>{\n            if (badgeToastQueue.length > 0) {\n                const dismissedBadgeId = badgeToastQueue[0];\n                await markBadgeAsSeen(dismissedBadgeId);\n                setBadgeToastQueue({\n                    \"AppPage.useCallback[handleBadgeToastClose]\": (prev)=>prev.slice(1)\n                }[\"AppPage.useCallback[handleBadgeToastClose]\"]);\n            }\n        }\n    }[\"AppPage.useCallback[handleBadgeToastClose]\"], [\n        badgeToastQueue,\n        markBadgeAsSeen\n    ]);\n    // Get the current badge to show\n    const currentBadgeToShow = newlyUnlockedBadges.find((b)=>b.id === badgeToastQueue[0]);\n    // Use session manager hook\n    const { saveNewSession } = (0,_hooks_useSessionManager__WEBPACK_IMPORTED_MODULE_14__.useSessionManager)({\n        user,\n        authLoading,\n        userTier,\n        setSessions,\n        setSessionsLoading,\n        setRemainingFreeSessions,\n        updateStreak,\n        addXP,\n        checkAndUnlockBadges,\n        currentStreak\n    });\n    // Use auth callback hook\n    (0,_hooks_useAuthCallback__WEBPACK_IMPORTED_MODULE_18__.useAuthCallback)({\n        setView\n    });\n    // Use Stripe callback hook\n    (0,_hooks_useStripeCallback__WEBPACK_IMPORTED_MODULE_19__.useStripeCallback)({\n        user,\n        authLoading,\n        setUserTier,\n        setRemainingFreeSessions,\n        setView\n    });\n    // Use app router hook\n    (0,_hooks_useAppRouter__WEBPACK_IMPORTED_MODULE_20__.useAppRouter)({\n        user,\n        authLoading,\n        view,\n        setView\n    });\n    // Load onboarding state - FIXED: Only run once on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppPage.useEffect\": ()=>{\n            const onboardingComplete = localStorage.getItem('mi-coach-onboarding-complete');\n            setShowOnboarding(onboardingComplete !== 'true');\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"AppPage.useEffect\"], []); // Empty deps - only run once on mount\n    const handleOnboardingFinish = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleOnboardingFinish]\": ()=>{\n            localStorage.setItem('mi-coach-onboarding-complete', 'true');\n            setShowOnboarding(false);\n            // After onboarding, go to Dashboard (anonymous users can access it)\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n        }\n    }[\"AppPage.useCallback[handleOnboardingFinish]\"], [\n        setShowOnboarding,\n        setView\n    ]);\n    const handleStartPractice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleStartPractice]\": async ()=>{\n            // Require authentication to start practice\n            if (!user) {\n                console.log('[App] User not authenticated, redirecting to login');\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Login);\n                return;\n            }\n            // Guard: wait until userTier is loaded and verification is complete\n            if (!userTier || userTier === '' || isTierVerifying) {\n                console.warn('[App] User tier not yet loaded or still verifying, waiting...');\n                return;\n            }\n            // Check if user can start a new session\n            const canStart = await (0,_services_subscriptionService__WEBPACK_IMPORTED_MODULE_4__.canStartSession)(user.id, userTier);\n            if (!canStart) {\n                console.log('[App] User cannot start session (limit reached), showing paywall');\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Paywall);\n                return;\n            }\n            if (userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium) {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.ScenarioSelection);\n            } else {\n                const patient = (0,_services_patientService__WEBPACK_IMPORTED_MODULE_3__.generatePatientProfile)();\n                setCurrentPatient(patient);\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Practice);\n            }\n        }\n    }[\"AppPage.useCallback[handleStartPractice]\"], [\n        user,\n        userTier,\n        isTierVerifying,\n        setView,\n        setCurrentPatient\n    ]);\n    const handleStartFilteredPractice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleStartFilteredPractice]\": (filters)=>{\n            // Require authentication to start practice\n            if (!user) {\n                console.log('[App] User not authenticated, redirecting to login');\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Login);\n                return;\n            }\n            const patient = (0,_services_patientService__WEBPACK_IMPORTED_MODULE_3__.generatePatientProfile)(filters);\n            setCurrentPatient(patient);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Practice);\n        }\n    }[\"AppPage.useCallback[handleStartFilteredPractice]\"], [\n        user,\n        setCurrentPatient,\n        setView\n    ]);\n    // Save the new session when practice is finished\n    const handleFinishPractice = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleFinishPractice]\": async (transcript, feedback)=>{\n            if (!currentPatient) {\n                console.error(\"[App] Cannot save session: missing patient\");\n                return;\n            }\n            const newSession = await saveNewSession(transcript, feedback, currentPatient, sessions, userTier);\n            setCurrentSession(newSession);\n            setCoachingSummary(null); // Invalidate old summary\n            setCoachingSummaryError(null);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Feedback);\n        }\n    }[\"AppPage.useCallback[handleFinishPractice]\"], [\n        currentPatient,\n        sessions,\n        userTier,\n        saveNewSession,\n        setCurrentSession,\n        setCoachingSummary,\n        setCoachingSummaryError,\n        setView\n    ]);\n    const handleDoneFromFeedback = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleDoneFromFeedback]\": ()=>{\n            const sessionCount = parseInt(localStorage.getItem('mi-coach-session-count') || '0', 10);\n            const reviewDismissed = localStorage.getItem('mi-coach-review-dismissed') === 'true';\n            const remindAfterCount = parseInt(localStorage.getItem('mi-coach-review-remind-after') || '0', 10);\n            if (!reviewDismissed && sessionCount >= 3 && sessionCount >= remindAfterCount) {\n                setShowReviewPrompt(true);\n            } else {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n            }\n        }\n    }[\"AppPage.useCallback[handleDoneFromFeedback]\"], [\n        setShowReviewPrompt,\n        setView\n    ]);\n    const handleReviewPromptClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleReviewPromptClose]\": (choice)=>{\n            setShowReviewPrompt(false);\n            if (choice === 'rate' || choice === 'no') {\n                localStorage.setItem('mi-coach-review-dismissed', 'true');\n                if (choice === 'rate') {\n                    // In a real app, you'd link to the store.\n                    alert(\"Thank you for your feedback! You will now be redirected to the app store.\");\n                }\n            } else if (choice === 'later') {\n                const sessionCount = parseInt(localStorage.getItem('mi-coach-session-count') || '0', 10);\n                // Remind again after 3 more sessions\n                localStorage.setItem('mi-coach-review-remind-after', (sessionCount + 3).toString());\n            }\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n        }\n    }[\"AppPage.useCallback[handleReviewPromptClose]\"], [\n        setShowReviewPrompt,\n        setView\n    ]);\n    const generateCoachingSummaryFromEdgeFunction = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\": async (sessions)=>{\n            // Get Supabase URL and construct Edge Function URL\n            const supabaseUrl = \"https://alszwgqoicjgfrhecscj.supabase.co\";\n            if (!supabaseUrl) {\n                throw new Error('Supabase URL not configured');\n            }\n            // Use dual-run wrapper for Strangler Fig migration tracking\n            // Calls both legacy and v2 functions, compares outputs, tracks matches\n            const functionsUrl = `${supabaseUrl}/functions/v1/dual-run-coaching-summary`;\n            // Require authentication - get JWT token from session\n            const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_6__.getSupabaseClient)();\n            let authToken;\n            try {\n                const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n                if (sessionError || !session || !session.access_token) {\n                    throw new Error('Your session has expired. Please refresh the page and log in again.');\n                }\n                authToken = session.access_token;\n            } catch (error) {\n                console.error('[App] Failed to get auth token:', error);\n                throw new Error('Failed to authenticate. Please refresh the page and try again.');\n            }\n            // Prepare request with required Authorization header\n            const headers = {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${authToken}`\n            };\n            // Make request to Edge Function\n            const response = await fetch(functionsUrl, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify({\n                    sessions\n                })\n            });\n            // Handle errors\n            if (!response.ok) {\n                const errorData = await response.json().catch({\n                    \"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\": ()=>({\n                            error: 'Unknown error'\n                        })\n                }[\"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\"]);\n                const errorMessage = errorData.error || `Failed to generate coaching summary (${response.status})`;\n                // Map HTTP status codes to user-friendly messages\n                if (response.status === 401) {\n                    throw new Error('Your session has expired. Please refresh the page and log in again.');\n                } else if (response.status === 429) {\n                    throw new Error('AI service is busy. Please try again in a moment.');\n                } else if (response.status === 504) {\n                    throw new Error('Coaching summary generation timed out. Please try again.');\n                } else if (response.status === 500) {\n                    throw new Error('AI service error. Please try again later.');\n                } else {\n                    throw new Error(errorMessage);\n                }\n            }\n            // Parse and return response\n            const data = await response.json();\n            return data;\n        }\n    }[\"AppPage.useCallback[generateCoachingSummaryFromEdgeFunction]\"], []);\n    const handleGenerateCoachingSummary = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleGenerateCoachingSummary]\": async ()=>{\n            if (coachingSummary && !isGeneratingSummary) {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.CoachingSummary);\n                return;\n            }\n            if (userTier !== _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium) {\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Paywall);\n                return;\n            }\n            setCoachingSummaryError(null);\n            setIsGeneratingSummary(true);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.CoachingSummary);\n            try {\n                const premiumSessions = sessions.filter({\n                    \"AppPage.useCallback[handleGenerateCoachingSummary].premiumSessions\": (s)=>s.tier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium\n                }[\"AppPage.useCallback[handleGenerateCoachingSummary].premiumSessions\"]);\n                if (premiumSessions.length === 0) {\n                    setCoachingSummaryError(\"You need to complete at least one Premium session to generate a summary.\");\n                    setIsGeneratingSummary(false);\n                    return;\n                }\n                const reportObject = await generateCoachingSummaryFromEdgeFunction(premiumSessions);\n                setCoachingSummary(reportObject);\n            } catch (error) {\n                console.error(\"Failed to generate coaching summary:\", error);\n                const errorMessage = error instanceof Error ? error.message : \"Sorry, we couldn't generate your summary at this time. Please try again later.\";\n                setCoachingSummaryError(errorMessage);\n            } finally{\n                setIsGeneratingSummary(false);\n            }\n        }\n    }[\"AppPage.useCallback[handleGenerateCoachingSummary]\"], [\n        coachingSummary,\n        isGeneratingSummary,\n        userTier,\n        sessions,\n        setView,\n        setCoachingSummaryError,\n        setIsGeneratingSummary,\n        setCoachingSummary,\n        generateCoachingSummaryFromEdgeFunction\n    ]);\n    const handleNavigate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleNavigate]\": (targetView)=>setView(targetView)\n    }[\"AppPage.useCallback[handleNavigate]\"], [\n        setView\n    ]);\n    const handleEmailConfirmation = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleEmailConfirmation]\": (email)=>{\n            setConfirmationEmail(email);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.EmailConfirmation);\n        }\n    }[\"AppPage.useCallback[handleEmailConfirmation]\"], [\n        setConfirmationEmail,\n        setView\n    ]);\n    const handleLogout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleLogout]\": async ()=>{\n            if (loggingOut) {\n                return;\n            }\n            setLoggingOut(true);\n            // Reset app state\n            setUserTier(_types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Free);\n            localStorage.removeItem('mi-coach-tier');\n            setSessions([]);\n            setRemainingFreeSessions(null);\n            setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Login);\n            let logoutError = null;\n            try {\n                await signOut();\n            } catch (error) {\n                const err = error instanceof Error ? error : new Error('Logout failed');\n                console.error('[App] Logout failed:', err);\n                logoutError = err;\n            } finally{\n                setLoggingOut(false);\n            }\n            if (logoutError) {\n                throw logoutError;\n            }\n        }\n    }[\"AppPage.useCallback[handleLogout]\"], [\n        loggingOut,\n        setLoggingOut,\n        setUserTier,\n        setSessions,\n        setRemainingFreeSessions,\n        setView,\n        signOut\n    ]);\n    // Save the new user tier to localStorage and Supabase upon upgrade.\n    const handleUpgrade = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleUpgrade]\": async ()=>{\n            if (!user) {\n                console.error('[App] Cannot upgrade: user not authenticated');\n                return;\n            }\n            try {\n                const newTier = _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium;\n                // Update in Supabase\n                console.log('[App] Upgrading user tier to Premium');\n                // Note: updateUserTier is called internally by the payment processor\n                // For now, just update locally and in localStorage\n                setUserTier(newTier);\n                // Reload tier from Supabase to confirm\n                const updatedTier = await refreshTier();\n                if (updatedTier) {\n                    setUserTier(updatedTier);\n                }\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard); // Go back to dashboard after upgrading\n            } catch (error) {\n                console.error('[App] Failed to upgrade tier:', error);\n                // Still navigate to dashboard even if refresh fails\n                setView(_types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard);\n            }\n        }\n    }[\"AppPage.useCallback[handleUpgrade]\"], [\n        user,\n        setUserTier,\n        refreshTier,\n        setView\n    ]);\n    const handleTierUpdated = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppPage.useCallback[handleTierUpdated]\": async ()=>{\n            // Reload tier from Supabase after subscription change\n            if (user) {\n                const updatedTier = await refreshTier();\n                if (updatedTier) {\n                    setUserTier(updatedTier);\n                }\n            }\n        }\n    }[\"AppPage.useCallback[handleTierUpdated]\"], [\n        user,\n        refreshTier,\n        setUserTier\n    ]);\n    // Show loading state while auth is initializing\n    if (authLoading || showOnboarding === null) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_LoadingSpinner__WEBPACK_IMPORTED_MODULE_7__.PageLoader, {\n            message: \"Initializing...\"\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n            lineNumber: 430,\n            columnNumber: 12\n        }, this);\n    }\n    // Show onboarding if not completed\n    if (showOnboarding) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n            fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_LoadingSpinner__WEBPACK_IMPORTED_MODULE_7__.PageLoader, {\n                message: \"Loading onboarding...\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 436,\n                columnNumber: 27\n            }, void 0),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Onboarding, {\n                onFinish: handleOnboardingFinish\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 437,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n            lineNumber: 436,\n            columnNumber: 7\n        }, this);\n    }\n    // Show login/auth screens when on those views (allow anonymous access to other views)\n    const isAuthView = view === _types__WEBPACK_IMPORTED_MODULE_2__.View.Login || view === _types__WEBPACK_IMPORTED_MODULE_2__.View.ForgotPassword || view === _types__WEBPACK_IMPORTED_MODULE_2__.View.EmailConfirmation || view === _types__WEBPACK_IMPORTED_MODULE_2__.View.ResetPassword;\n    const shouldRenderAuthViews = !user && !authLoading && isAuthView;\n    const viewsWithNavBar = [\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.Dashboard,\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.ResourceLibrary,\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.Settings,\n        _types__WEBPACK_IMPORTED_MODULE_2__.View.Calendar\n    ];\n    const isPremiumFeedback = view === _types__WEBPACK_IMPORTED_MODULE_2__.View.Feedback && userTier === _types__WEBPACK_IMPORTED_MODULE_2__.UserTier.Premium;\n    const shouldShowNavBar = viewsWithNavBar.includes(view) || isPremiumFeedback;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-transparent text-[var(--color-text-primary)]\",\n        id: \"main-content\",\n        children: [\n            shouldShowNavBar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col\",\n                style: {\n                    height: '100vh'\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                        className: \"flex-1 overflow-y-auto pb-20\",\n                        role: \"main\",\n                        \"aria-label\": \"Main content\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_views_ViewRenderer__WEBPACK_IMPORTED_MODULE_10__.ViewRenderer, {\n                            view: view,\n                            userTier: userTier,\n                            user: user,\n                            sessions: sessions,\n                            remainingFreeSessions: remainingFreeSessions,\n                            currentPatient: currentPatient,\n                            currentSession: currentSession,\n                            coachingSummary: coachingSummary,\n                            coachingSummaryError: coachingSummaryError,\n                            isGeneratingSummary: isGeneratingSummary,\n                            confirmationEmail: confirmationEmail,\n                            isPremiumVerified: isPremiumVerified,\n                            isTierVerifying: isTierVerifying,\n                            onNavigate: handleNavigate,\n                            onStartPractice: handleStartPractice,\n                            onStartFilteredPractice: handleStartFilteredPractice,\n                            onFinishPractice: handleFinishPractice,\n                            onDoneFromFeedback: handleDoneFromFeedback,\n                            onUpgrade: handleUpgrade,\n                            onLogout: handleLogout,\n                            onGenerateCoachingSummary: handleGenerateCoachingSummary,\n                            onEmailConfirmation: handleEmailConfirmation,\n                            onTierUpdated: handleTierUpdated\n                        }, void 0, false, {\n                            fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                            lineNumber: 455,\n                            columnNumber: 19\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                        lineNumber: 454,\n                        columnNumber: 15\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_BottomNavBar__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        currentView: view,\n                        onNavigate: handleNavigate,\n                        userTier: userTier\n                    }, void 0, false, {\n                        fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                        lineNumber: 481,\n                        columnNumber: 15\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 453,\n                columnNumber: 11\n            }, this) : // Views without the main nav bar (e.g., practice, feedback, paywall)\n            // These components manage their own full-screen layout.\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_views_ViewRenderer__WEBPACK_IMPORTED_MODULE_10__.ViewRenderer, {\n                view: view,\n                userTier: userTier,\n                user: user,\n                sessions: sessions,\n                remainingFreeSessions: remainingFreeSessions,\n                currentPatient: currentPatient,\n                currentSession: currentSession,\n                coachingSummary: coachingSummary,\n                coachingSummaryError: coachingSummaryError,\n                isGeneratingSummary: isGeneratingSummary,\n                confirmationEmail: confirmationEmail,\n                isPremiumVerified: isPremiumVerified,\n                isTierVerifying: isTierVerifying,\n                onNavigate: handleNavigate,\n                onStartPractice: handleStartPractice,\n                onStartFilteredPractice: handleStartFilteredPractice,\n                onFinishPractice: handleFinishPractice,\n                onDoneFromFeedback: handleDoneFromFeedback,\n                onUpgrade: handleUpgrade,\n                onLogout: handleLogout,\n                onGenerateCoachingSummary: handleGenerateCoachingSummary,\n                onEmailConfirmation: handleEmailConfirmation,\n                onTierUpdated: handleTierUpdated\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 486,\n                columnNumber: 11\n            }, this),\n            showReviewPrompt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_ReviewPrompt__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                onClose: handleReviewPromptClose\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 513,\n                columnNumber: 11\n            }, this),\n            currentBadgeToShow && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_gamification_BadgeUnlockToast__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                badge: currentBadgeToShow,\n                onClose: handleBadgeToastClose\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 517,\n                columnNumber: 11\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"aria-live-region\",\n                \"aria-live\": \"polite\",\n                \"aria-atomic\": \"true\",\n                className: \"sr-only\"\n            }, void 0, false, {\n                fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n                lineNumber: 523,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/javi/dev/Main2MI/app/page.tsx\",\n        lineNumber: 451,\n        columnNumber: 5\n    }, this);\n}\n_s(AppPage, \"CJVSLQ9qUfukkbDXB1V/MUWsiBg=\", false, function() {\n    return [\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth,\n        _hooks_useAppState__WEBPACK_IMPORTED_MODULE_12__.useAppState,\n        _hooks_useTierManager__WEBPACK_IMPORTED_MODULE_13__.useTierManager,\n        _hooks_useStreak__WEBPACK_IMPORTED_MODULE_15__.useStreak,\n        _hooks_useXP__WEBPACK_IMPORTED_MODULE_16__.useXP,\n        _hooks_useBadges__WEBPACK_IMPORTED_MODULE_17__.useBadges,\n        _hooks_useOnlineSync__WEBPACK_IMPORTED_MODULE_21__.useOnlineSync,\n        _hooks_useSessionManager__WEBPACK_IMPORTED_MODULE_14__.useSessionManager,\n        _hooks_useAuthCallback__WEBPACK_IMPORTED_MODULE_18__.useAuthCallback,\n        _hooks_useStripeCallback__WEBPACK_IMPORTED_MODULE_19__.useStripeCallback,\n        _hooks_useAppRouter__WEBPACK_IMPORTED_MODULE_20__.useAppRouter\n    ];\n});\n_c1 = AppPage;\nvar _c, _c1;\n$RefreshReg$(_c, \"Onboarding\");\n$RefreshReg$(_c1, \"AppPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEIvSCxrQ0FDRyw4REFBQ3hDLG1FQUFZQTtnQkFBQ3VNLFNBQVNsRjs7Ozs7O1lBRzFCakMsb0NBQ0csOERBQUNqRixrRkFBZ0JBO2dCQUNmcU0sT0FBT3BIO2dCQUNQbUgsU0FBU3RIOzs7Ozs7MEJBSWYsOERBQUNvRztnQkFBSWhILElBQUc7Z0JBQW1Cb0ksYUFBVTtnQkFBU0MsZUFBWTtnQkFBT3BCLFdBQVU7Ozs7Ozs7Ozs7OztBQUdqRjtHQTVld0J4Szs7UUFDMEJsQiwwREFBT0E7UUFHdENRLDREQUFXQTtRQStCb0VDLGtFQUFjQTtRQUdwQ0Usd0RBQVNBO1FBR25DQyxnREFBS0E7UUFHa0JDLHdEQUFTQTtRQUdoRkksZ0VBQWFBO1FBeUNjUCx3RUFBaUJBO1FBYzVDSSxvRUFBZUE7UUFHZkMsd0VBQWlCQTtRQVNqQkMsOERBQVlBOzs7TUFsSFVFIiwic291cmNlcyI6WyIvVXNlcnMvamF2aS9kZXYvTWFpbjJNSS9hcHAvcGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIFN1c3BlbnNlLCBsYXp5IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXNlclRpZXIsIFZpZXcsIFBhdGllbnRQcm9maWxlLCBTZXNzaW9uLCBGZWVkYmFjaywgQ2hhdE1lc3NhZ2UsIFBhdGllbnRQcm9maWxlRmlsdGVycywgQ29hY2hpbmdTdW1tYXJ5IH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVBhdGllbnRQcm9maWxlIH0gZnJvbSAnQC9zZXJ2aWNlcy9wYXRpZW50U2VydmljZSc7XG5pbXBvcnQgeyBjYW5TdGFydFNlc3Npb24gfSBmcm9tICdAL3NlcnZpY2VzL3N1YnNjcmlwdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgZ2V0U3VwYWJhc2VDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5cbi8vIENvcmUgY29tcG9uZW50cyAoYWx3YXlzIGxvYWRlZClcbmltcG9ydCB7IFBhZ2VMb2FkZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvTG9hZGluZ1NwaW5uZXInO1xuaW1wb3J0IEJvdHRvbU5hdkJhciBmcm9tICdAL2NvbXBvbmVudHMvdWkvQm90dG9tTmF2QmFyJztcbmltcG9ydCBSZXZpZXdQcm9tcHQgZnJvbSAnQC9jb21wb25lbnRzL3VpL1Jldmlld1Byb21wdCc7XG5pbXBvcnQgeyBWaWV3UmVuZGVyZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdmlld3MvVmlld1JlbmRlcmVyJztcblxuLy8gTGF6eS1sb2FkZWQgY29tcG9uZW50c1xuY29uc3QgT25ib2FyZGluZyA9IGxhenkoKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvdmlld3MvT25ib2FyZGluZycpKTtcblxuLy8gR2FtaWZpY2F0aW9uIGNvbXBvbmVudHNcbmltcG9ydCBCYWRnZVVubG9ja1RvYXN0IGZyb20gJ0AvY29tcG9uZW50cy9nYW1pZmljYXRpb24vQmFkZ2VVbmxvY2tUb2FzdCc7XG5cbi8vIEN1c3RvbSBob29rc1xuaW1wb3J0IHsgdXNlQXBwU3RhdGUgfSBmcm9tICdAL2hvb2tzL3VzZUFwcFN0YXRlJztcbmltcG9ydCB7IHVzZVRpZXJNYW5hZ2VyIH0gZnJvbSAnQC9ob29rcy91c2VUaWVyTWFuYWdlcic7XG5pbXBvcnQgeyB1c2VTZXNzaW9uTWFuYWdlciB9IGZyb20gJ0AvaG9va3MvdXNlU2Vzc2lvbk1hbmFnZXInO1xuaW1wb3J0IHsgdXNlU3RyZWFrIH0gZnJvbSAnQC9ob29rcy91c2VTdHJlYWsnO1xuaW1wb3J0IHsgdXNlWFAgfSBmcm9tICdAL2hvb2tzL3VzZVhQJztcbmltcG9ydCB7IHVzZUJhZGdlcyB9IGZyb20gJ0AvaG9va3MvdXNlQmFkZ2VzJztcbmltcG9ydCB7IHVzZUF1dGhDYWxsYmFjayB9IGZyb20gJ0AvaG9va3MvdXNlQXV0aENhbGxiYWNrJztcbmltcG9ydCB7IHVzZVN0cmlwZUNhbGxiYWNrIH0gZnJvbSAnQC9ob29rcy91c2VTdHJpcGVDYWxsYmFjayc7XG5pbXBvcnQgeyB1c2VBcHBSb3V0ZXIgfSBmcm9tICdAL2hvb2tzL3VzZUFwcFJvdXRlcic7XG5pbXBvcnQgeyB1c2VPbmxpbmVTeW5jIH0gZnJvbSAnQC9ob29rcy91c2VPbmxpbmVTeW5jJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwUGFnZSgpIHtcbiAgY29uc3QgeyB1c2VyLCBsb2FkaW5nOiBhdXRoTG9hZGluZywgc2lnbk91dCB9ID0gdXNlQXV0aCgpO1xuICBcbiAgLy8gVXNlIGNvbnNvbGlkYXRlZCBhcHAgc3RhdGUgaG9va1xuICBjb25zdCBhcHBTdGF0ZSA9IHVzZUFwcFN0YXRlKCk7XG4gIGNvbnN0IHtcbiAgICB2aWV3LFxuICAgIHNldFZpZXcsXG4gICAgc2Vzc2lvbnMsXG4gICAgc2V0U2Vzc2lvbnMsXG4gICAgc2Vzc2lvbnNMb2FkaW5nLFxuICAgIHNldFNlc3Npb25zTG9hZGluZyxcbiAgICByZW1haW5pbmdGcmVlU2Vzc2lvbnMsXG4gICAgc2V0UmVtYWluaW5nRnJlZVNlc3Npb25zLFxuICAgIGN1cnJlbnRQYXRpZW50LFxuICAgIHNldEN1cnJlbnRQYXRpZW50LFxuICAgIGN1cnJlbnRTZXNzaW9uLFxuICAgIHNldEN1cnJlbnRTZXNzaW9uLFxuICAgIHNob3dPbmJvYXJkaW5nLFxuICAgIHNldFNob3dPbmJvYXJkaW5nLFxuICAgIGNvYWNoaW5nU3VtbWFyeSxcbiAgICBzZXRDb2FjaGluZ1N1bW1hcnksXG4gICAgY29hY2hpbmdTdW1tYXJ5RXJyb3IsXG4gICAgc2V0Q29hY2hpbmdTdW1tYXJ5RXJyb3IsXG4gICAgaXNHZW5lcmF0aW5nU3VtbWFyeSxcbiAgICBzZXRJc0dlbmVyYXRpbmdTdW1tYXJ5LFxuICAgIHNob3dSZXZpZXdQcm9tcHQsXG4gICAgc2V0U2hvd1Jldmlld1Byb21wdCxcbiAgICBjb25maXJtYXRpb25FbWFpbCxcbiAgICBzZXRDb25maXJtYXRpb25FbWFpbCxcbiAgICBsb2dnaW5nT3V0LFxuICAgIHNldExvZ2dpbmdPdXQsXG4gIH0gPSBhcHBTdGF0ZTtcblxuICAvLyBVc2UgdGllciBtYW5hZ2VyIGhvb2sgd2l0aCBzZXJ2ZXItc2lkZSBwcmVtaXVtIHZlcmlmaWNhdGlvblxuICBjb25zdCB7IHVzZXJUaWVyLCBzZXRVc2VyVGllciwgcmVmcmVzaFRpZXIsIGlzUHJlbWl1bVZlcmlmaWVkLCBpc1ZlcmlmeWluZzogaXNUaWVyVmVyaWZ5aW5nIH0gPSB1c2VUaWVyTWFuYWdlcigpO1xuXG4gIC8vIFVzZSBzdHJlYWsgaG9vayBmb3IgZ2FtaWZpY2F0aW9uXG4gIGNvbnN0IHsgY3VycmVudFN0cmVhaywgdXBkYXRlU3RyZWFrLCBwcm9jZXNzUXVldWU6IHByb2Nlc3NTdHJlYWtRdWV1ZSB9ID0gdXNlU3RyZWFrKCk7XG5cbiAgLy8gVXNlIFhQIGhvb2sgZm9yIGdhbWlmaWNhdGlvblxuICBjb25zdCB7IGFkZFhQLCBwcm9jZXNzUXVldWU6IHByb2Nlc3NYUFF1ZXVlIH0gPSB1c2VYUCgpO1xuXG4gIC8vIFVzZSBiYWRnZXMgaG9vayBmb3IgZ2FtaWZpY2F0aW9uXG4gIGNvbnN0IHsgY2hlY2tBbmRVbmxvY2tCYWRnZXMsIG5ld2x5VW5sb2NrZWRCYWRnZXMsIG1hcmtCYWRnZUFzU2VlbiB9ID0gdXNlQmFkZ2VzKCk7XG5cbiAgLy8gVXNlIG9ubGluZSBzeW5jIGhvb2sgdG8gcHJvY2VzcyBxdWV1ZWQgb3BlcmF0aW9ucyB3aGVuIGNvbm5lY3Rpdml0eSBpcyByZXN0b3JlZFxuICB1c2VPbmxpbmVTeW5jKHtcbiAgICBwcm9jZXNzU3RyZWFrUXVldWUsXG4gICAgcHJvY2Vzc1hQUXVldWUsXG4gICAgaXNBdXRoZW50aWNhdGVkOiAhIXVzZXIsXG4gIH0pO1xuXG4gIC8vIFRyYWNrIHdoaWNoIGJhZGdlIHRvIHNob3cgaW4gdG9hc3QgKG9uZSBhdCBhIHRpbWUpXG4gIGNvbnN0IFtiYWRnZVRvYXN0UXVldWUsIHNldEJhZGdlVG9hc3RRdWV1ZV0gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuXG4gIC8vIFdoZW4gbmV3IGJhZGdlcyBhcmUgdW5sb2NrZWQsIGFkZCB0aGVtIHRvIHRoZSB0b2FzdCBxdWV1ZSAtIEZJWEVEOiBVc2UgcmVmIHRvIHByZXZlbnQgbG9vcHNcbiAgY29uc3QgcHJldmlvdXNCYWRnZXNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKTtcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudEJhZGdlSWRzID0gbmV3bHlVbmxvY2tlZEJhZGdlcy5tYXAoYiA9PiBiLmlkKTtcbiAgICBjb25zdCBwcmV2aW91c0JhZGdlSWRzID0gcHJldmlvdXNCYWRnZXNSZWYuY3VycmVudDtcbiAgICBcbiAgICAvLyBPbmx5IHByb2Nlc3MgaWYgYmFkZ2VzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICBpZiAoY3VycmVudEJhZGdlSWRzLmxlbmd0aCA+IDAgJiYgSlNPTi5zdHJpbmdpZnkoY3VycmVudEJhZGdlSWRzKSAhPT0gSlNPTi5zdHJpbmdpZnkocHJldmlvdXNCYWRnZUlkcykpIHtcbiAgICAgIHNldEJhZGdlVG9hc3RRdWV1ZShwcmV2ID0+IHtcbiAgICAgICAgLy8gQWRkIG9ubHkgYmFkZ2VzIG5vdCBhbHJlYWR5IGluIHF1ZXVlXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSWRzID0gbmV3IFNldChwcmV2KTtcbiAgICAgICAgY29uc3QgdG9BZGQgPSBjdXJyZW50QmFkZ2VJZHMuZmlsdGVyKGlkID0+ICFleGlzdGluZ0lkcy5oYXMoaWQpKTtcbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2LCAuLi50b0FkZF07XG4gICAgICB9KTtcbiAgICAgIHByZXZpb3VzQmFkZ2VzUmVmLmN1cnJlbnQgPSBjdXJyZW50QmFkZ2VJZHM7XG4gICAgfVxuICB9LCBbbmV3bHlVbmxvY2tlZEJhZGdlc10pO1xuXG4gIC8vIEhhbmRsZSBkaXNtaXNzaW5nIGEgYmFkZ2UgdG9hc3RcbiAgY29uc3QgaGFuZGxlQmFkZ2VUb2FzdENsb3NlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmIChiYWRnZVRvYXN0UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZGlzbWlzc2VkQmFkZ2VJZCA9IGJhZGdlVG9hc3RRdWV1ZVswXTtcbiAgICAgIGF3YWl0IG1hcmtCYWRnZUFzU2VlbihkaXNtaXNzZWRCYWRnZUlkKTtcbiAgICAgIHNldEJhZGdlVG9hc3RRdWV1ZShwcmV2ID0+IHByZXYuc2xpY2UoMSkpO1xuICAgIH1cbiAgfSwgW2JhZGdlVG9hc3RRdWV1ZSwgbWFya0JhZGdlQXNTZWVuXSk7XG5cbiAgLy8gR2V0IHRoZSBjdXJyZW50IGJhZGdlIHRvIHNob3dcbiAgY29uc3QgY3VycmVudEJhZGdlVG9TaG93ID0gbmV3bHlVbmxvY2tlZEJhZGdlcy5maW5kKGIgPT4gYi5pZCA9PT0gYmFkZ2VUb2FzdFF1ZXVlWzBdKTtcblxuICAvLyBVc2Ugc2Vzc2lvbiBtYW5hZ2VyIGhvb2tcbiAgY29uc3QgeyBzYXZlTmV3U2Vzc2lvbiB9ID0gdXNlU2Vzc2lvbk1hbmFnZXIoe1xuICAgIHVzZXIsXG4gICAgYXV0aExvYWRpbmcsXG4gICAgdXNlclRpZXIsXG4gICAgc2V0U2Vzc2lvbnMsXG4gICAgc2V0U2Vzc2lvbnNMb2FkaW5nLFxuICAgIHNldFJlbWFpbmluZ0ZyZWVTZXNzaW9ucyxcbiAgICB1cGRhdGVTdHJlYWssXG4gICAgYWRkWFAsXG4gICAgY2hlY2tBbmRVbmxvY2tCYWRnZXMsXG4gICAgY3VycmVudFN0cmVhayxcbiAgfSk7XG5cbiAgLy8gVXNlIGF1dGggY2FsbGJhY2sgaG9va1xuICB1c2VBdXRoQ2FsbGJhY2soeyBzZXRWaWV3IH0pO1xuXG4gIC8vIFVzZSBTdHJpcGUgY2FsbGJhY2sgaG9va1xuICB1c2VTdHJpcGVDYWxsYmFjayh7XG4gICAgdXNlcixcbiAgICBhdXRoTG9hZGluZyxcbiAgICBzZXRVc2VyVGllcixcbiAgICBzZXRSZW1haW5pbmdGcmVlU2Vzc2lvbnMsXG4gICAgc2V0VmlldyxcbiAgfSk7XG5cbiAgLy8gVXNlIGFwcCByb3V0ZXIgaG9va1xuICB1c2VBcHBSb3V0ZXIoeyB1c2VyLCBhdXRoTG9hZGluZywgdmlldywgc2V0VmlldyB9KTtcblxuICAvLyBMb2FkIG9uYm9hcmRpbmcgc3RhdGUgLSBGSVhFRDogT25seSBydW4gb25jZSBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG9uYm9hcmRpbmdDb21wbGV0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtaS1jb2FjaC1vbmJvYXJkaW5nLWNvbXBsZXRlJyk7XG4gICAgc2V0U2hvd09uYm9hcmRpbmcob25ib2FyZGluZ0NvbXBsZXRlICE9PSAndHJ1ZScpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW10pOyAvLyBFbXB0eSBkZXBzIC0gb25seSBydW4gb25jZSBvbiBtb3VudFxuXG4gIGNvbnN0IGhhbmRsZU9uYm9hcmRpbmdGaW5pc2ggPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21pLWNvYWNoLW9uYm9hcmRpbmctY29tcGxldGUnLCAndHJ1ZScpO1xuICAgIHNldFNob3dPbmJvYXJkaW5nKGZhbHNlKTtcbiAgICAvLyBBZnRlciBvbmJvYXJkaW5nLCBnbyB0byBEYXNoYm9hcmQgKGFub255bW91cyB1c2VycyBjYW4gYWNjZXNzIGl0KVxuICAgIHNldFZpZXcoVmlldy5EYXNoYm9hcmQpO1xuICB9LCBbc2V0U2hvd09uYm9hcmRpbmcsIHNldFZpZXddKTtcblxuICBjb25zdCBoYW5kbGVTdGFydFByYWN0aWNlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIC8vIFJlcXVpcmUgYXV0aGVudGljYXRpb24gdG8gc3RhcnQgcHJhY3RpY2VcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQXBwXSBVc2VyIG5vdCBhdXRoZW50aWNhdGVkLCByZWRpcmVjdGluZyB0byBsb2dpbicpO1xuICAgICAgc2V0VmlldyhWaWV3LkxvZ2luKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBHdWFyZDogd2FpdCB1bnRpbCB1c2VyVGllciBpcyBsb2FkZWQgYW5kIHZlcmlmaWNhdGlvbiBpcyBjb21wbGV0ZVxuICAgIGlmICghdXNlclRpZXIgfHwgdXNlclRpZXIgPT09ICcnIHx8IGlzVGllclZlcmlmeWluZykge1xuICAgICAgY29uc29sZS53YXJuKCdbQXBwXSBVc2VyIHRpZXIgbm90IHlldCBsb2FkZWQgb3Igc3RpbGwgdmVyaWZ5aW5nLCB3YWl0aW5nLi4uJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBjYW4gc3RhcnQgYSBuZXcgc2Vzc2lvblxuICAgIGNvbnN0IGNhblN0YXJ0ID0gYXdhaXQgY2FuU3RhcnRTZXNzaW9uKHVzZXIuaWQsIHVzZXJUaWVyKTtcbiAgICBpZiAoIWNhblN0YXJ0KSB7XG4gICAgICBjb25zb2xlLmxvZygnW0FwcF0gVXNlciBjYW5ub3Qgc3RhcnQgc2Vzc2lvbiAobGltaXQgcmVhY2hlZCksIHNob3dpbmcgcGF5d2FsbCcpO1xuICAgICAgc2V0VmlldyhWaWV3LlBheXdhbGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh1c2VyVGllciA9PT0gVXNlclRpZXIuUHJlbWl1bSkge1xuICAgICAgc2V0VmlldyhWaWV3LlNjZW5hcmlvU2VsZWN0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGF0aWVudCA9IGdlbmVyYXRlUGF0aWVudFByb2ZpbGUoKTtcbiAgICAgIHNldEN1cnJlbnRQYXRpZW50KHBhdGllbnQpO1xuICAgICAgc2V0VmlldyhWaWV3LlByYWN0aWNlKTtcbiAgICB9XG4gIH0sIFt1c2VyLCB1c2VyVGllciwgaXNUaWVyVmVyaWZ5aW5nLCBzZXRWaWV3LCBzZXRDdXJyZW50UGF0aWVudF0pO1xuICBcbiAgY29uc3QgaGFuZGxlU3RhcnRGaWx0ZXJlZFByYWN0aWNlID0gdXNlQ2FsbGJhY2soKGZpbHRlcnM6IFBhdGllbnRQcm9maWxlRmlsdGVycykgPT4ge1xuICAgIC8vIFJlcXVpcmUgYXV0aGVudGljYXRpb24gdG8gc3RhcnQgcHJhY3RpY2VcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQXBwXSBVc2VyIG5vdCBhdXRoZW50aWNhdGVkLCByZWRpcmVjdGluZyB0byBsb2dpbicpO1xuICAgICAgc2V0VmlldyhWaWV3LkxvZ2luKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXRpZW50ID0gZ2VuZXJhdGVQYXRpZW50UHJvZmlsZShmaWx0ZXJzKTtcbiAgICBzZXRDdXJyZW50UGF0aWVudChwYXRpZW50KTtcbiAgICBzZXRWaWV3KFZpZXcuUHJhY3RpY2UpO1xuICB9LCBbdXNlciwgc2V0Q3VycmVudFBhdGllbnQsIHNldFZpZXddKTtcblxuICAvLyBTYXZlIHRoZSBuZXcgc2Vzc2lvbiB3aGVuIHByYWN0aWNlIGlzIGZpbmlzaGVkXG4gIGNvbnN0IGhhbmRsZUZpbmlzaFByYWN0aWNlID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRyYW5zY3JpcHQ6IENoYXRNZXNzYWdlW10sIGZlZWRiYWNrOiBGZWVkYmFjaykgPT4ge1xuICAgIGlmICghY3VycmVudFBhdGllbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbQXBwXSBDYW5ub3Qgc2F2ZSBzZXNzaW9uOiBtaXNzaW5nIHBhdGllbnRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3U2Vzc2lvbiA9IGF3YWl0IHNhdmVOZXdTZXNzaW9uKHRyYW5zY3JpcHQsIGZlZWRiYWNrLCBjdXJyZW50UGF0aWVudCwgc2Vzc2lvbnMsIHVzZXJUaWVyKTtcbiAgICBcbiAgICBzZXRDdXJyZW50U2Vzc2lvbihuZXdTZXNzaW9uKTtcbiAgICBzZXRDb2FjaGluZ1N1bW1hcnkobnVsbCk7IC8vIEludmFsaWRhdGUgb2xkIHN1bW1hcnlcbiAgICBzZXRDb2FjaGluZ1N1bW1hcnlFcnJvcihudWxsKTtcbiAgICBzZXRWaWV3KFZpZXcuRmVlZGJhY2spO1xuICB9LCBbY3VycmVudFBhdGllbnQsIHNlc3Npb25zLCB1c2VyVGllciwgc2F2ZU5ld1Nlc3Npb24sIHNldEN1cnJlbnRTZXNzaW9uLCBzZXRDb2FjaGluZ1N1bW1hcnksIHNldENvYWNoaW5nU3VtbWFyeUVycm9yLCBzZXRWaWV3XSk7XG4gIFxuICBjb25zdCBoYW5kbGVEb25lRnJvbUZlZWRiYWNrID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHNlc3Npb25Db3VudCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtaS1jb2FjaC1zZXNzaW9uLWNvdW50JykgfHwgJzAnLCAxMCk7XG4gICAgY29uc3QgcmV2aWV3RGlzbWlzc2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21pLWNvYWNoLXJldmlldy1kaXNtaXNzZWQnKSA9PT0gJ3RydWUnO1xuICAgIGNvbnN0IHJlbWluZEFmdGVyQ291bnQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWktY29hY2gtcmV2aWV3LXJlbWluZC1hZnRlcicpIHx8ICcwJywgMTApO1xuXG4gICAgaWYgKCFyZXZpZXdEaXNtaXNzZWQgJiYgc2Vzc2lvbkNvdW50ID49IDMgJiYgc2Vzc2lvbkNvdW50ID49IHJlbWluZEFmdGVyQ291bnQpIHtcbiAgICAgICAgc2V0U2hvd1Jldmlld1Byb21wdCh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzZXRWaWV3KFZpZXcuRGFzaGJvYXJkKTtcbiAgICB9XG4gIH0sIFtzZXRTaG93UmV2aWV3UHJvbXB0LCBzZXRWaWV3XSk7XG4gIFxuICBjb25zdCBoYW5kbGVSZXZpZXdQcm9tcHRDbG9zZSA9IHVzZUNhbGxiYWNrKChjaG9pY2U6ICdyYXRlJyB8ICdsYXRlcicgfCAnbm8nKSA9PiB7XG4gICAgc2V0U2hvd1Jldmlld1Byb21wdChmYWxzZSk7XG4gICAgXG4gICAgaWYgKGNob2ljZSA9PT0gJ3JhdGUnIHx8IGNob2ljZSA9PT0gJ25vJykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbWktY29hY2gtcmV2aWV3LWRpc21pc3NlZCcsICd0cnVlJyk7XG4gICAgICAgIGlmIChjaG9pY2UgPT09ICdyYXRlJykge1xuICAgICAgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHlvdSdkIGxpbmsgdG8gdGhlIHN0b3JlLlxuICAgICAgICAgICAgIGFsZXJ0KFwiVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrISBZb3Ugd2lsbCBub3cgYmUgcmVkaXJlY3RlZCB0byB0aGUgYXBwIHN0b3JlLlwiKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hvaWNlID09PSAnbGF0ZXInKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db3VudCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtaS1jb2FjaC1zZXNzaW9uLWNvdW50JykgfHwgJzAnLCAxMCk7XG4gICAgICAgIC8vIFJlbWluZCBhZ2FpbiBhZnRlciAzIG1vcmUgc2Vzc2lvbnNcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21pLWNvYWNoLXJldmlldy1yZW1pbmQtYWZ0ZXInLCAoc2Vzc2lvbkNvdW50ICsgMykudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIFxuICAgIHNldFZpZXcoVmlldy5EYXNoYm9hcmQpO1xuICB9LCBbc2V0U2hvd1Jldmlld1Byb21wdCwgc2V0Vmlld10pO1xuXG4gIGNvbnN0IGdlbmVyYXRlQ29hY2hpbmdTdW1tYXJ5RnJvbUVkZ2VGdW5jdGlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jIChzZXNzaW9uczogU2Vzc2lvbltdKTogUHJvbWlzZTxDb2FjaGluZ1N1bW1hcnk+ID0+IHtcbiAgICAvLyBHZXQgU3VwYWJhc2UgVVJMIGFuZCBjb25zdHJ1Y3QgRWRnZSBGdW5jdGlvbiBVUkxcbiAgICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgICBpZiAoIXN1cGFiYXNlVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIFVSTCBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cblxuICAgIC8vIFVzZSBkdWFsLXJ1biB3cmFwcGVyIGZvciBTdHJhbmdsZXIgRmlnIG1pZ3JhdGlvbiB0cmFja2luZ1xuICAgIC8vIENhbGxzIGJvdGggbGVnYWN5IGFuZCB2MiBmdW5jdGlvbnMsIGNvbXBhcmVzIG91dHB1dHMsIHRyYWNrcyBtYXRjaGVzXG4gICAgY29uc3QgZnVuY3Rpb25zVXJsID0gYCR7c3VwYWJhc2VVcmx9L2Z1bmN0aW9ucy92MS9kdWFsLXJ1bi1jb2FjaGluZy1zdW1tYXJ5YDtcblxuICAgIC8vIFJlcXVpcmUgYXV0aGVudGljYXRpb24gLSBnZXQgSldUIHRva2VuIGZyb20gc2Vzc2lvblxuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcbiAgICBsZXQgYXV0aFRva2VuOiBzdHJpbmc7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0sIGVycm9yOiBzZXNzaW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xuICAgICAgXG4gICAgICBpZiAoc2Vzc2lvbkVycm9yIHx8ICFzZXNzaW9uIHx8ICFzZXNzaW9uLmFjY2Vzc190b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgc2Vzc2lvbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgYW5kIGxvZyBpbiBhZ2Fpbi4nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYXV0aFRva2VuID0gc2Vzc2lvbi5hY2Nlc3NfdG9rZW47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBcHBdIEZhaWxlZCB0byBnZXQgYXV0aCB0b2tlbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhdXRoZW50aWNhdGUuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uJyk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSByZXF1ZXN0IHdpdGggcmVxdWlyZWQgQXV0aG9yaXphdGlvbiBoZWFkZXJcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2F1dGhUb2tlbn1gLFxuICAgIH07XG5cbiAgICAvLyBNYWtlIHJlcXVlc3QgdG8gRWRnZSBGdW5jdGlvblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZnVuY3Rpb25zVXJsLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNlc3Npb25zIH0pLFxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIGVycm9yc1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBlcnJvcjogJ1Vua25vd24gZXJyb3InIH0pKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yRGF0YS5lcnJvciB8fCBgRmFpbGVkIHRvIGdlbmVyYXRlIGNvYWNoaW5nIHN1bW1hcnkgKCR7cmVzcG9uc2Uuc3RhdHVzfSlgO1xuXG4gICAgICAvLyBNYXAgSFRUUCBzdGF0dXMgY29kZXMgdG8gdXNlci1mcmllbmRseSBtZXNzYWdlc1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBzZXNzaW9uIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZSBhbmQgbG9nIGluIGFnYWluLicpO1xuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FJIHNlcnZpY2UgaXMgYnVzeS4gUGxlYXNlIHRyeSBhZ2FpbiBpbiBhIG1vbWVudC4nKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA1MDQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb2FjaGluZyBzdW1tYXJ5IGdlbmVyYXRpb24gdGltZWQgb3V0LiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDUwMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FJIHNlcnZpY2UgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYXJzZSBhbmQgcmV0dXJuIHJlc3BvbnNlXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YSBhcyBDb2FjaGluZ1N1bW1hcnk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVHZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKGNvYWNoaW5nU3VtbWFyeSAmJiAhaXNHZW5lcmF0aW5nU3VtbWFyeSkge1xuICAgICAgICAgICAgc2V0VmlldyhWaWV3LkNvYWNoaW5nU3VtbWFyeSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlclRpZXIgIT09IFVzZXJUaWVyLlByZW1pdW0pIHtcbiAgICAgICAgICAgIHNldFZpZXcoVmlldy5QYXl3YWxsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2V0Q29hY2hpbmdTdW1tYXJ5RXJyb3IobnVsbCk7XG4gICAgICAgIHNldElzR2VuZXJhdGluZ1N1bW1hcnkodHJ1ZSk7XG4gICAgICAgIHNldFZpZXcoVmlldy5Db2FjaGluZ1N1bW1hcnkpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcmVtaXVtU2Vzc2lvbnMgPSBzZXNzaW9ucy5maWx0ZXIocyA9PiBzLnRpZXIgPT09IFVzZXJUaWVyLlByZW1pdW0pO1xuICAgICAgICAgICAgaWYgKHByZW1pdW1TZXNzaW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgc2V0Q29hY2hpbmdTdW1tYXJ5RXJyb3IoXCJZb3UgbmVlZCB0byBjb21wbGV0ZSBhdCBsZWFzdCBvbmUgUHJlbWl1bSBzZXNzaW9uIHRvIGdlbmVyYXRlIGEgc3VtbWFyeS5cIik7XG4gICAgICAgICAgICAgICAgIHNldElzR2VuZXJhdGluZ1N1bW1hcnkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXBvcnRPYmplY3QgPSBhd2FpdCBnZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeUZyb21FZGdlRnVuY3Rpb24ocHJlbWl1bVNlc3Npb25zKTtcbiAgICAgICAgICAgIHNldENvYWNoaW5nU3VtbWFyeShyZXBvcnRPYmplY3QpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZW5lcmF0ZSBjb2FjaGluZyBzdW1tYXJ5OlwiLCBlcnJvcik7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiU29ycnksIHdlIGNvdWxkbid0IGdlbmVyYXRlIHlvdXIgc3VtbWFyeSBhdCB0aGlzIHRpbWUuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCI7XG4gICAgICAgICAgICBzZXRDb2FjaGluZ1N1bW1hcnlFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0SXNHZW5lcmF0aW5nU3VtbWFyeShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9LCBbY29hY2hpbmdTdW1tYXJ5LCBpc0dlbmVyYXRpbmdTdW1tYXJ5LCB1c2VyVGllciwgc2Vzc2lvbnMsIHNldFZpZXcsIHNldENvYWNoaW5nU3VtbWFyeUVycm9yLCBzZXRJc0dlbmVyYXRpbmdTdW1tYXJ5LCBzZXRDb2FjaGluZ1N1bW1hcnksIGdlbmVyYXRlQ29hY2hpbmdTdW1tYXJ5RnJvbUVkZ2VGdW5jdGlvbl0pO1xuXG4gIGNvbnN0IGhhbmRsZU5hdmlnYXRlID0gdXNlQ2FsbGJhY2soKHRhcmdldFZpZXc6IFZpZXcpID0+IHNldFZpZXcodGFyZ2V0VmlldyksIFtzZXRWaWV3XSk7XG4gIFxuICBjb25zdCBoYW5kbGVFbWFpbENvbmZpcm1hdGlvbiA9IHVzZUNhbGxiYWNrKChlbWFpbDogc3RyaW5nKSA9PiB7XG4gICAgc2V0Q29uZmlybWF0aW9uRW1haWwoZW1haWwpO1xuICAgIHNldFZpZXcoVmlldy5FbWFpbENvbmZpcm1hdGlvbik7XG4gIH0sIFtzZXRDb25maXJtYXRpb25FbWFpbCwgc2V0Vmlld10pO1xuXG4gIGNvbnN0IGhhbmRsZUxvZ291dCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAobG9nZ2luZ091dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldExvZ2dpbmdPdXQodHJ1ZSk7XG4gICAgXG4gICAgLy8gUmVzZXQgYXBwIHN0YXRlXG4gICAgc2V0VXNlclRpZXIoVXNlclRpZXIuRnJlZSk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21pLWNvYWNoLXRpZXInKTtcbiAgICBzZXRTZXNzaW9ucyhbXSk7XG4gICAgc2V0UmVtYWluaW5nRnJlZVNlc3Npb25zKG51bGwpO1xuICAgIHNldFZpZXcoVmlldy5Mb2dpbik7XG5cbiAgICBsZXQgbG9nb3V0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNpZ25PdXQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCdMb2dvdXQgZmFpbGVkJyk7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQXBwXSBMb2dvdXQgZmFpbGVkOicsIGVycik7XG4gICAgICBsb2dvdXRFcnJvciA9IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9nZ2luZ091dChmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKGxvZ291dEVycm9yKSB7XG4gICAgICB0aHJvdyBsb2dvdXRFcnJvcjtcbiAgICB9XG4gIH0sIFtsb2dnaW5nT3V0LCBzZXRMb2dnaW5nT3V0LCBzZXRVc2VyVGllciwgc2V0U2Vzc2lvbnMsIHNldFJlbWFpbmluZ0ZyZWVTZXNzaW9ucywgc2V0Vmlldywgc2lnbk91dF0pO1xuXG4gIC8vIFNhdmUgdGhlIG5ldyB1c2VyIHRpZXIgdG8gbG9jYWxTdG9yYWdlIGFuZCBTdXBhYmFzZSB1cG9uIHVwZ3JhZGUuXG4gIGNvbnN0IGhhbmRsZVVwZ3JhZGUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQXBwXSBDYW5ub3QgdXBncmFkZTogdXNlciBub3QgYXV0aGVudGljYXRlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdUaWVyID0gVXNlclRpZXIuUHJlbWl1bTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGluIFN1cGFiYXNlXG4gICAgICBjb25zb2xlLmxvZygnW0FwcF0gVXBncmFkaW5nIHVzZXIgdGllciB0byBQcmVtaXVtJyk7XG4gICAgICAvLyBOb3RlOiB1cGRhdGVVc2VyVGllciBpcyBjYWxsZWQgaW50ZXJuYWxseSBieSB0aGUgcGF5bWVudCBwcm9jZXNzb3JcbiAgICAgIC8vIEZvciBub3csIGp1c3QgdXBkYXRlIGxvY2FsbHkgYW5kIGluIGxvY2FsU3RvcmFnZVxuICAgICAgc2V0VXNlclRpZXIobmV3VGllcik7XG4gICAgICBcbiAgICAgIC8vIFJlbG9hZCB0aWVyIGZyb20gU3VwYWJhc2UgdG8gY29uZmlybVxuICAgICAgY29uc3QgdXBkYXRlZFRpZXIgPSBhd2FpdCByZWZyZXNoVGllcigpO1xuICAgICAgaWYgKHVwZGF0ZWRUaWVyKSB7XG4gICAgICAgIHNldFVzZXJUaWVyKHVwZGF0ZWRUaWVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0VmlldyhWaWV3LkRhc2hib2FyZCk7IC8vIEdvIGJhY2sgdG8gZGFzaGJvYXJkIGFmdGVyIHVwZ3JhZGluZ1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQXBwXSBGYWlsZWQgdG8gdXBncmFkZSB0aWVyOicsIGVycm9yKTtcbiAgICAgIC8vIFN0aWxsIG5hdmlnYXRlIHRvIGRhc2hib2FyZCBldmVuIGlmIHJlZnJlc2ggZmFpbHNcbiAgICAgIHNldFZpZXcoVmlldy5EYXNoYm9hcmQpO1xuICAgIH1cbiAgfSwgW3VzZXIsIHNldFVzZXJUaWVyLCByZWZyZXNoVGllciwgc2V0Vmlld10pO1xuXG4gIGNvbnN0IGhhbmRsZVRpZXJVcGRhdGVkID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIC8vIFJlbG9hZCB0aWVyIGZyb20gU3VwYWJhc2UgYWZ0ZXIgc3Vic2NyaXB0aW9uIGNoYW5nZVxuICAgIGlmICh1c2VyKSB7XG4gICAgICBjb25zdCB1cGRhdGVkVGllciA9IGF3YWl0IHJlZnJlc2hUaWVyKCk7XG4gICAgICBpZiAodXBkYXRlZFRpZXIpIHtcbiAgICAgICAgc2V0VXNlclRpZXIodXBkYXRlZFRpZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3VzZXIsIHJlZnJlc2hUaWVyLCBzZXRVc2VyVGllcl0pO1xuICBcbiAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlIHdoaWxlIGF1dGggaXMgaW5pdGlhbGl6aW5nXG4gIGlmIChhdXRoTG9hZGluZyB8fCBzaG93T25ib2FyZGluZyA9PT0gbnVsbCkge1xuICAgIHJldHVybiA8UGFnZUxvYWRlciBtZXNzYWdlPVwiSW5pdGlhbGl6aW5nLi4uXCIgLz47XG4gIH1cblxuICAvLyBTaG93IG9uYm9hcmRpbmcgaWYgbm90IGNvbXBsZXRlZFxuICBpZiAoc2hvd09uYm9hcmRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8UGFnZUxvYWRlciBtZXNzYWdlPVwiTG9hZGluZyBvbmJvYXJkaW5nLi4uXCIgLz59PlxuICAgICAgICA8T25ib2FyZGluZyBvbkZpbmlzaD17aGFuZGxlT25ib2FyZGluZ0ZpbmlzaH0gLz5cbiAgICAgIDwvU3VzcGVuc2U+XG4gICAgKTtcbiAgfVxuXG4gIC8vIFNob3cgbG9naW4vYXV0aCBzY3JlZW5zIHdoZW4gb24gdGhvc2Ugdmlld3MgKGFsbG93IGFub255bW91cyBhY2Nlc3MgdG8gb3RoZXIgdmlld3MpXG4gIGNvbnN0IGlzQXV0aFZpZXcgPSB2aWV3ID09PSBWaWV3LkxvZ2luIHx8IHZpZXcgPT09IFZpZXcuRm9yZ290UGFzc3dvcmQgfHwgdmlldyA9PT0gVmlldy5FbWFpbENvbmZpcm1hdGlvbiB8fCB2aWV3ID09PSBWaWV3LlJlc2V0UGFzc3dvcmQ7XG4gIGNvbnN0IHNob3VsZFJlbmRlckF1dGhWaWV3cyA9ICF1c2VyICYmICFhdXRoTG9hZGluZyAmJiBpc0F1dGhWaWV3O1xuXG4gIGNvbnN0IHZpZXdzV2l0aE5hdkJhciA9IFtWaWV3LkRhc2hib2FyZCwgVmlldy5SZXNvdXJjZUxpYnJhcnksIFZpZXcuU2V0dGluZ3MsIFZpZXcuQ2FsZW5kYXJdO1xuICBjb25zdCBpc1ByZW1pdW1GZWVkYmFjayA9IHZpZXcgPT09IFZpZXcuRmVlZGJhY2sgJiYgdXNlclRpZXIgPT09IFVzZXJUaWVyLlByZW1pdW07XG4gIGNvbnN0IHNob3VsZFNob3dOYXZCYXIgPSB2aWV3c1dpdGhOYXZCYXIuaW5jbHVkZXModmlldykgfHwgaXNQcmVtaXVtRmVlZGJhY2s7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy10cmFuc3BhcmVudCB0ZXh0LVt2YXIoLS1jb2xvci10ZXh0LXByaW1hcnkpXVwiIGlkPVwibWFpbi1jb250ZW50XCI+XG4gICAgICB7c2hvdWxkU2hvd05hdkJhciA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIiBzdHlsZT17eyBoZWlnaHQ6ICcxMDB2aCcgfX0+XG4gICAgICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcGItMjBcIiByb2xlPVwibWFpblwiIGFyaWEtbGFiZWw9XCJNYWluIGNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgIDxWaWV3UmVuZGVyZXJcbiAgICAgICAgICAgICAgICAgICAgdmlldz17dmlld31cbiAgICAgICAgICAgICAgICAgICAgdXNlclRpZXI9e3VzZXJUaWVyfVxuICAgICAgICAgICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9ucz17c2Vzc2lvbnN9XG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0ZyZWVTZXNzaW9ucz17cmVtYWluaW5nRnJlZVNlc3Npb25zfVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGF0aWVudD17Y3VycmVudFBhdGllbnR9XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZXNzaW9uPXtjdXJyZW50U2Vzc2lvbn1cbiAgICAgICAgICAgICAgICAgICAgY29hY2hpbmdTdW1tYXJ5PXtjb2FjaGluZ1N1bW1hcnl9XG4gICAgICAgICAgICAgICAgICAgIGNvYWNoaW5nU3VtbWFyeUVycm9yPXtjb2FjaGluZ1N1bW1hcnlFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgaXNHZW5lcmF0aW5nU3VtbWFyeT17aXNHZW5lcmF0aW5nU3VtbWFyeX1cbiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uRW1haWw9e2NvbmZpcm1hdGlvbkVtYWlsfVxuICAgICAgICAgICAgICAgICAgICBpc1ByZW1pdW1WZXJpZmllZD17aXNQcmVtaXVtVmVyaWZpZWR9XG4gICAgICAgICAgICAgICAgICAgIGlzVGllclZlcmlmeWluZz17aXNUaWVyVmVyaWZ5aW5nfVxuICAgICAgICAgICAgICAgICAgICBvbk5hdmlnYXRlPXtoYW5kbGVOYXZpZ2F0ZX1cbiAgICAgICAgICAgICAgICAgICAgb25TdGFydFByYWN0aWNlPXtoYW5kbGVTdGFydFByYWN0aWNlfVxuICAgICAgICAgICAgICAgICAgICBvblN0YXJ0RmlsdGVyZWRQcmFjdGljZT17aGFuZGxlU3RhcnRGaWx0ZXJlZFByYWN0aWNlfVxuICAgICAgICAgICAgICAgICAgICBvbkZpbmlzaFByYWN0aWNlPXtoYW5kbGVGaW5pc2hQcmFjdGljZX1cbiAgICAgICAgICAgICAgICAgICAgb25Eb25lRnJvbUZlZWRiYWNrPXtoYW5kbGVEb25lRnJvbUZlZWRiYWNrfVxuICAgICAgICAgICAgICAgICAgICBvblVwZ3JhZGU9e2hhbmRsZVVwZ3JhZGV9XG4gICAgICAgICAgICAgICAgICAgIG9uTG9nb3V0PXtoYW5kbGVMb2dvdXR9XG4gICAgICAgICAgICAgICAgICAgIG9uR2VuZXJhdGVDb2FjaGluZ1N1bW1hcnk9e2hhbmRsZUdlbmVyYXRlQ29hY2hpbmdTdW1tYXJ5fVxuICAgICAgICAgICAgICAgICAgICBvbkVtYWlsQ29uZmlybWF0aW9uPXtoYW5kbGVFbWFpbENvbmZpcm1hdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgb25UaWVyVXBkYXRlZD17aGFuZGxlVGllclVwZGF0ZWR9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L21haW4+XG4gICAgICAgICAgICAgIDxCb3R0b21OYXZCYXIgY3VycmVudFZpZXc9e3ZpZXd9IG9uTmF2aWdhdGU9e2hhbmRsZU5hdmlnYXRlfSB1c2VyVGllcj17dXNlclRpZXJ9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICApIDogKFxuICAgICAgICAgIC8vIFZpZXdzIHdpdGhvdXQgdGhlIG1haW4gbmF2IGJhciAoZS5nLiwgcHJhY3RpY2UsIGZlZWRiYWNrLCBwYXl3YWxsKVxuICAgICAgICAgIC8vIFRoZXNlIGNvbXBvbmVudHMgbWFuYWdlIHRoZWlyIG93biBmdWxsLXNjcmVlbiBsYXlvdXQuXG4gICAgICAgICAgPFZpZXdSZW5kZXJlclxuICAgICAgICAgICAgdmlldz17dmlld31cbiAgICAgICAgICAgIHVzZXJUaWVyPXt1c2VyVGllcn1cbiAgICAgICAgICAgIHVzZXI9e3VzZXJ9XG4gICAgICAgICAgICBzZXNzaW9ucz17c2Vzc2lvbnN9XG4gICAgICAgICAgICByZW1haW5pbmdGcmVlU2Vzc2lvbnM9e3JlbWFpbmluZ0ZyZWVTZXNzaW9uc31cbiAgICAgICAgICAgIGN1cnJlbnRQYXRpZW50PXtjdXJyZW50UGF0aWVudH1cbiAgICAgICAgICAgIGN1cnJlbnRTZXNzaW9uPXtjdXJyZW50U2Vzc2lvbn1cbiAgICAgICAgICAgIGNvYWNoaW5nU3VtbWFyeT17Y29hY2hpbmdTdW1tYXJ5fVxuICAgICAgICAgICAgY29hY2hpbmdTdW1tYXJ5RXJyb3I9e2NvYWNoaW5nU3VtbWFyeUVycm9yfVxuICAgICAgICAgICAgaXNHZW5lcmF0aW5nU3VtbWFyeT17aXNHZW5lcmF0aW5nU3VtbWFyeX1cbiAgICAgICAgICAgIGNvbmZpcm1hdGlvbkVtYWlsPXtjb25maXJtYXRpb25FbWFpbH1cbiAgICAgICAgICAgIGlzUHJlbWl1bVZlcmlmaWVkPXtpc1ByZW1pdW1WZXJpZmllZH1cbiAgICAgICAgICAgIGlzVGllclZlcmlmeWluZz17aXNUaWVyVmVyaWZ5aW5nfVxuICAgICAgICAgICAgb25OYXZpZ2F0ZT17aGFuZGxlTmF2aWdhdGV9XG4gICAgICAgICAgICBvblN0YXJ0UHJhY3RpY2U9e2hhbmRsZVN0YXJ0UHJhY3RpY2V9XG4gICAgICAgICAgICBvblN0YXJ0RmlsdGVyZWRQcmFjdGljZT17aGFuZGxlU3RhcnRGaWx0ZXJlZFByYWN0aWNlfVxuICAgICAgICAgICAgb25GaW5pc2hQcmFjdGljZT17aGFuZGxlRmluaXNoUHJhY3RpY2V9XG4gICAgICAgICAgICBvbkRvbmVGcm9tRmVlZGJhY2s9e2hhbmRsZURvbmVGcm9tRmVlZGJhY2t9XG4gICAgICAgICAgICBvblVwZ3JhZGU9e2hhbmRsZVVwZ3JhZGV9XG4gICAgICAgICAgICBvbkxvZ291dD17aGFuZGxlTG9nb3V0fVxuICAgICAgICAgICAgb25HZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeT17aGFuZGxlR2VuZXJhdGVDb2FjaGluZ1N1bW1hcnl9XG4gICAgICAgICAgICBvbkVtYWlsQ29uZmlybWF0aW9uPXtoYW5kbGVFbWFpbENvbmZpcm1hdGlvbn1cbiAgICAgICAgICAgIG9uVGllclVwZGF0ZWQ9e2hhbmRsZVRpZXJVcGRhdGVkfVxuICAgICAgICAgIC8+XG4gICAgICApfVxuICAgICAge3Nob3dSZXZpZXdQcm9tcHQgJiYgKFxuICAgICAgICAgIDxSZXZpZXdQcm9tcHQgb25DbG9zZT17aGFuZGxlUmV2aWV3UHJvbXB0Q2xvc2V9IC8+XG4gICAgICApfVxuICAgICAgey8qIEJhZGdlIHVubG9jayBjZWxlYnJhdGlvbiB0b2FzdCAqL31cbiAgICAgIHtjdXJyZW50QmFkZ2VUb1Nob3cgJiYgKFxuICAgICAgICAgIDxCYWRnZVVubG9ja1RvYXN0XG4gICAgICAgICAgICBiYWRnZT17Y3VycmVudEJhZGdlVG9TaG93fVxuICAgICAgICAgICAgb25DbG9zZT17aGFuZGxlQmFkZ2VUb2FzdENsb3NlfVxuICAgICAgICAgIC8+XG4gICAgICApfVxuICAgICAgey8qIEFyaWEgbGl2ZSByZWdpb24gZm9yIGFzeW5jIGZlZWRiYWNrICovfVxuICAgICAgPGRpdiBpZD1cImFyaWEtbGl2ZS1yZWdpb25cIiBhcmlhLWxpdmU9XCJwb2xpdGVcIiBhcmlhLWF0b21pYz1cInRydWVcIiBjbGFzc05hbWU9XCJzci1vbmx5XCI+PC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwiU3VzcGVuc2UiLCJsYXp5IiwiVXNlclRpZXIiLCJWaWV3IiwiZ2VuZXJhdGVQYXRpZW50UHJvZmlsZSIsImNhblN0YXJ0U2Vzc2lvbiIsInVzZUF1dGgiLCJnZXRTdXBhYmFzZUNsaWVudCIsIlBhZ2VMb2FkZXIiLCJCb3R0b21OYXZCYXIiLCJSZXZpZXdQcm9tcHQiLCJWaWV3UmVuZGVyZXIiLCJPbmJvYXJkaW5nIiwiQmFkZ2VVbmxvY2tUb2FzdCIsInVzZUFwcFN0YXRlIiwidXNlVGllck1hbmFnZXIiLCJ1c2VTZXNzaW9uTWFuYWdlciIsInVzZVN0cmVhayIsInVzZVhQIiwidXNlQmFkZ2VzIiwidXNlQXV0aENhbGxiYWNrIiwidXNlU3RyaXBlQ2FsbGJhY2siLCJ1c2VBcHBSb3V0ZXIiLCJ1c2VPbmxpbmVTeW5jIiwiQXBwUGFnZSIsInVzZXIiLCJsb2FkaW5nIiwiYXV0aExvYWRpbmciLCJzaWduT3V0IiwiYXBwU3RhdGUiLCJ2aWV3Iiwic2V0VmlldyIsInNlc3Npb25zIiwic2V0U2Vzc2lvbnMiLCJzZXNzaW9uc0xvYWRpbmciLCJzZXRTZXNzaW9uc0xvYWRpbmciLCJyZW1haW5pbmdGcmVlU2Vzc2lvbnMiLCJzZXRSZW1haW5pbmdGcmVlU2Vzc2lvbnMiLCJjdXJyZW50UGF0aWVudCIsInNldEN1cnJlbnRQYXRpZW50IiwiY3VycmVudFNlc3Npb24iLCJzZXRDdXJyZW50U2Vzc2lvbiIsInNob3dPbmJvYXJkaW5nIiwic2V0U2hvd09uYm9hcmRpbmciLCJjb2FjaGluZ1N1bW1hcnkiLCJzZXRDb2FjaGluZ1N1bW1hcnkiLCJjb2FjaGluZ1N1bW1hcnlFcnJvciIsInNldENvYWNoaW5nU3VtbWFyeUVycm9yIiwiaXNHZW5lcmF0aW5nU3VtbWFyeSIsInNldElzR2VuZXJhdGluZ1N1bW1hcnkiLCJzaG93UmV2aWV3UHJvbXB0Iiwic2V0U2hvd1Jldmlld1Byb21wdCIsImNvbmZpcm1hdGlvbkVtYWlsIiwic2V0Q29uZmlybWF0aW9uRW1haWwiLCJsb2dnaW5nT3V0Iiwic2V0TG9nZ2luZ091dCIsInVzZXJUaWVyIiwic2V0VXNlclRpZXIiLCJyZWZyZXNoVGllciIsImlzUHJlbWl1bVZlcmlmaWVkIiwiaXNWZXJpZnlpbmciLCJpc1RpZXJWZXJpZnlpbmciLCJjdXJyZW50U3RyZWFrIiwidXBkYXRlU3RyZWFrIiwicHJvY2Vzc1F1ZXVlIiwicHJvY2Vzc1N0cmVha1F1ZXVlIiwiYWRkWFAiLCJwcm9jZXNzWFBRdWV1ZSIsImNoZWNrQW5kVW5sb2NrQmFkZ2VzIiwibmV3bHlVbmxvY2tlZEJhZGdlcyIsIm1hcmtCYWRnZUFzU2VlbiIsImlzQXV0aGVudGljYXRlZCIsImJhZGdlVG9hc3RRdWV1ZSIsInNldEJhZGdlVG9hc3RRdWV1ZSIsInByZXZpb3VzQmFkZ2VzUmVmIiwidXNlUmVmIiwiY3VycmVudEJhZGdlSWRzIiwibWFwIiwiYiIsImlkIiwicHJldmlvdXNCYWRnZUlkcyIsImN1cnJlbnQiLCJsZW5ndGgiLCJKU09OIiwic3RyaW5naWZ5IiwicHJldiIsImV4aXN0aW5nSWRzIiwiU2V0IiwidG9BZGQiLCJmaWx0ZXIiLCJoYXMiLCJoYW5kbGVCYWRnZVRvYXN0Q2xvc2UiLCJkaXNtaXNzZWRCYWRnZUlkIiwic2xpY2UiLCJjdXJyZW50QmFkZ2VUb1Nob3ciLCJmaW5kIiwic2F2ZU5ld1Nlc3Npb24iLCJvbmJvYXJkaW5nQ29tcGxldGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFuZGxlT25ib2FyZGluZ0ZpbmlzaCIsInNldEl0ZW0iLCJEYXNoYm9hcmQiLCJoYW5kbGVTdGFydFByYWN0aWNlIiwiY29uc29sZSIsImxvZyIsIkxvZ2luIiwid2FybiIsImNhblN0YXJ0IiwiUGF5d2FsbCIsIlByZW1pdW0iLCJTY2VuYXJpb1NlbGVjdGlvbiIsInBhdGllbnQiLCJQcmFjdGljZSIsImhhbmRsZVN0YXJ0RmlsdGVyZWRQcmFjdGljZSIsImZpbHRlcnMiLCJoYW5kbGVGaW5pc2hQcmFjdGljZSIsInRyYW5zY3JpcHQiLCJmZWVkYmFjayIsImVycm9yIiwibmV3U2Vzc2lvbiIsIkZlZWRiYWNrIiwiaGFuZGxlRG9uZUZyb21GZWVkYmFjayIsInNlc3Npb25Db3VudCIsInBhcnNlSW50IiwicmV2aWV3RGlzbWlzc2VkIiwicmVtaW5kQWZ0ZXJDb3VudCIsImhhbmRsZVJldmlld1Byb21wdENsb3NlIiwiY2hvaWNlIiwiYWxlcnQiLCJ0b1N0cmluZyIsImdlbmVyYXRlQ29hY2hpbmdTdW1tYXJ5RnJvbUVkZ2VGdW5jdGlvbiIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIkVycm9yIiwiZnVuY3Rpb25zVXJsIiwic3VwYWJhc2UiLCJhdXRoVG9rZW4iLCJkYXRhIiwic2Vzc2lvbiIsInNlc3Npb25FcnJvciIsImF1dGgiLCJnZXRTZXNzaW9uIiwiYWNjZXNzX3Rva2VuIiwiaGVhZGVycyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5Iiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiY2F0Y2giLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJoYW5kbGVHZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeSIsIkNvYWNoaW5nU3VtbWFyeSIsInByZW1pdW1TZXNzaW9ucyIsInMiLCJ0aWVyIiwicmVwb3J0T2JqZWN0IiwibWVzc2FnZSIsImhhbmRsZU5hdmlnYXRlIiwidGFyZ2V0VmlldyIsImhhbmRsZUVtYWlsQ29uZmlybWF0aW9uIiwiZW1haWwiLCJFbWFpbENvbmZpcm1hdGlvbiIsImhhbmRsZUxvZ291dCIsIkZyZWUiLCJyZW1vdmVJdGVtIiwibG9nb3V0RXJyb3IiLCJlcnIiLCJoYW5kbGVVcGdyYWRlIiwibmV3VGllciIsInVwZGF0ZWRUaWVyIiwiaGFuZGxlVGllclVwZGF0ZWQiLCJmYWxsYmFjayIsIm9uRmluaXNoIiwiaXNBdXRoVmlldyIsIkZvcmdvdFBhc3N3b3JkIiwiUmVzZXRQYXNzd29yZCIsInNob3VsZFJlbmRlckF1dGhWaWV3cyIsInZpZXdzV2l0aE5hdkJhciIsIlJlc291cmNlTGlicmFyeSIsIlNldHRpbmdzIiwiQ2FsZW5kYXIiLCJpc1ByZW1pdW1GZWVkYmFjayIsInNob3VsZFNob3dOYXZCYXIiLCJpbmNsdWRlcyIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwiaGVpZ2h0IiwibWFpbiIsInJvbGUiLCJhcmlhLWxhYmVsIiwib25OYXZpZ2F0ZSIsIm9uU3RhcnRQcmFjdGljZSIsIm9uU3RhcnRGaWx0ZXJlZFByYWN0aWNlIiwib25GaW5pc2hQcmFjdGljZSIsIm9uRG9uZUZyb21GZWVkYmFjayIsIm9uVXBncmFkZSIsIm9uTG9nb3V0Iiwib25HZW5lcmF0ZUNvYWNoaW5nU3VtbWFyeSIsIm9uRW1haWxDb25maXJtYXRpb24iLCJvblRpZXJVcGRhdGVkIiwiY3VycmVudFZpZXciLCJvbkNsb3NlIiwiYmFkZ2UiLCJhcmlhLWxpdmUiLCJhcmlhLWF0b21pYyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ })

});